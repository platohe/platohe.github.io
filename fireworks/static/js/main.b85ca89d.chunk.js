(this["webpackJsonpastonishing-fireworks"]=this["webpackJsonpastonishing-fireworks"]||[]).push([[0],{174:function(t,e,i){t.exports=i(305)},179:function(t,e,i){},305:function(t,e,i){"use strict";i.r(e);var a=i(0),n=i.n(a),r=i(10),o=i.n(r),s=(i(95),i(179),i(180),i(56)),h=[];function c(t,e){console.log('event: "'.concat(t,'" subscribed')),h.push({name:t,handler:e})}function l(t,e){var i=h.filter((function(i){return!(i.name===t&&i.handler===e)}));i.length!==h.length?(console.log('event: "'.concat(t,'" unsubscribed')),h=i):console.log('event: failed to unsubscribe "'.concat(t,'"'))}function u(t,e){var i,a=Object(s.a)(h);try{for(a.s();!(i=a.n()).done;){i.value.handler(t,e)}}catch(n){a.e(n)}finally{a.f()}}var f=i(1),d=i(2),v=i(9),p=i(5),g=i(4),m=i(12),y=i(307),k=i(312),w=i(315),x=i(316),b=i(317),M=i(318),C=i(319),O=i(141);function S(t){return t<9?"0".concat(t):t}function I(t){return t<99?t<9?"00".concat(t):"0".concat(t):t}var j,E="",P=new(function(){function t(){Object(f.a)(this,t),this._deserialize()}return Object(d.a)(t,[{key:"_serialize",value:function(){var t=JSON.stringify(this);t!==E&&(!function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"localStorage";if(void 0!==e&&null!==e&&i in window){var a="string"!==typeof e?JSON.stringify(e):e;console.log("storage<- ".concat(t,": ").concat(a.substr(0,64),"...")),window[i].setItem(t,a)}}("firework#pref",t),E=t)}},{key:"_deserialize",value:function(){var t=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"localStorage";if(e in window){var i=window[e].getItem(t);if(i)return console.log("storage->".concat(t,": ").concat(i.substr(0,64),"...")),JSON.parse(i)}}("firework#pref")||{};Object.assign(this,t),void 0===this.fireworkIndex&&(this.fireworkIndex=0),void 0===this.backgroundImageDarkness&&(this.backgroundImageDarkness=.5),void 0===this.backgroundEffectNames&&(this.backgroundEffectNames=[])}},{key:"getConfigName",value:function(t,e){return"".concat(t,"#").concat(e)}},{key:"getConfigValue",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return this[this.getConfigName(t,e)]||i}},{key:"changeConfig",value:function(t,e){console.log("config: ".concat(t,"=").concat(e)),this[t]=e,this._serialize(),u("event@config-changed",{name:t,value:e})}}]),t}()),L=i(311),D={toDeg:180/Math.PI,toRad:Math.PI/180,halfPI:Math.PI/2,twoPI:2*Math.PI,dist:function(t,e){return Math.sqrt(t*t+e*e)},pointDist:function(t,e,i,a){var n=i-t,r=a-e;return Math.sqrt(n*n+r*r)},angle:function(t,e){return D.halfPI+Math.atan2(e,t)},pointAngle:function(t,e,i,a){return D.halfPI+Math.atan2(a-e,i-t)},splitVector:function(t,e){return{x:Math.sin(e)*t,y:-Math.cos(e)*t}},random:function(t,e){return void 0!==t&&void 0!==e?Math.random()*(e-t)+t:Math.random()},randomInt:function(t,e){return(Math.random()*(e-t)|0)+t},randomChoice:function(t){if(Array.isArray(t))return t[Math.random()*t.length|0]},clamp:function(t,e,i){return Math.min(Math.max(t,e),i)}},F=D;function R(t){return(window.devicePixelRatio||1)/(t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1)}function T(t,e){return j||(j=document.createElement("canvas")),j.width=t,j.height=e,j.getContext("2d")}var z=i(309);function V(t){var e=t.minLabel,i=t.maxLabel,a=t.min,n=t.max,r=t.value;return r===a?e||a:r===n?i||n:"".concat(S((r-a)/(n-a)*100|0),"%")}function A(t){var e=t.title,i=t.minLabel,a=t.maxLabel,r=t.min,o=t.max,s=t.step,h=t.getCurrentValue,c=t.onChangeValue,l=h();return n.a.createElement("div",{key:"slider#".concat(e),style:{margin:"8px 0"}},n.a.createElement("span",null,"".concat(e,": ").concat(V({minLabel:i,maxLabel:a,min:r,max:o,value:l}))),n.a.createElement("div",{style:{display:"flex",width:"100%"}},i&&n.a.createElement("span",{style:{margin:"0 12px 0 0",fontWeight:"500"}},i),n.a.createElement(z.a,{style:{flex:"auto"},min:r,max:o,step:s,value:l,tipFormatter:function(t){return V({minLabel:i,maxLabel:a,min:r,max:o,value:t})},onChange:function(t){return c(t)}}),a&&n.a.createElement("span",{style:{margin:"0 0 0 12px",fontWeight:"500"}},a)))}var B=i(52),Y={lift:{volume:1,playbackRateMin:.85,playbackRateMax:.95,fileNames:["lift1.mp3","lift2.mp3","lift3.mp3"]},burst:{volume:1,playbackRateMin:.8,playbackRateMax:.9,fileNames:["burst1.mp3","burst2.mp3"]},burstSmall:{volume:.25,playbackRateMin:.8,playbackRateMax:1,fileNames:["burst-sm-1.mp3","burst-sm-2.mp3"]},crackle:{volume:.2,playbackRateMin:1,playbackRateMax:1,fileNames:["crackle1.mp3"]},crackleSmall:{volume:.3,playbackRateMin:1,playbackRateMax:1,fileNames:["crackle-sm-1.mp3"]},bomb:{volume:1,playbackRateMin:1,playbackRateMax:1,fileNames:["bomb.mp3"]},crackers:{volume:1,playbackRateMin:1,playbackRateMax:1,fileNames:["crackers.mp3"]},rocket:{volume:1,playbackRateMin:1,playbackRateMax:1,fileNames:["rocket.mp3"]},gun:{volume:1,playbackRateMin:1,playbackRateMax:1,fileNames:["gun.mp3"]},shellFall:{volume:.85,playbackRateMin:1,playbackRateMax:1,fileNames:["shells-falls.mp3"]},whistle:{volume:1,playbackRateMin:1,playbackRateMax:1,fileNames:["whistle.mp3"]}},W=new(function(){function t(){var e=this;Object(f.a)(this,t),this.ctx=new(window.AudioContext||window.webkitAudioContext),this.pauseAll(),this._lastSmallBurstTime=0;var i=[];Object.keys(Y).forEach((function(t){var a=Y[t],n=a.fileNames,r=[];n.forEach((function(t){var a="./sound/".concat(t),n=fetch(a).then((function(t){if(t.status>=200&&t.status<300)return t;var e=new Error(t.statusText);throw e.response=t,e})).then((function(t){return t.arrayBuffer()})).then((function(t){return new Promise((function(i){e.ctx.decodeAudioData(t,i)}))}));r.push(n),i.push(n)})),Promise.all(r).then((function(t){a.buffers=t}))})),Promise.all(i)}return Object(d.a)(t,[{key:"getContext",value:function(){return this.ctx}},{key:"pauseAll",value:function(){this.ctx.suspend(),console.log("sound: paused")}},{key:"resumeAll",value:function(){var t=this;this.playSound("lift",0),setTimeout((function(){t.ctx.resume(),console.log("sound: resumed")}),250)}},{key:"playSound",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(e=F.clamp(e,0,1),"burstSmall"===t){var i=Date.now();if(i-this._lastSmallBurstTime<20)return;this._lastSmallBurstTime=i}var a=Y[t];if(!a)throw new Error('Sound of type "'.concat(t,"\" doesn't exist."));var n=a.volume,r=F.random(a.playbackRateMin,a.playbackRateMax),o=n*e,s=r*(2-e),h=this.ctx.createGain();h.gain.value=o;var c=F.randomChoice(a.buffers),l=this.ctx.createBufferSource();l.playbackRate.value=s,l.buffer=c,l.connect(h),h.connect(this.ctx.destination),l.start(0)}}]),t}()),X=new(function(){function t(){Object(f.a)(this,t),this.hitx=-1,this.hity=-1,this.x=0,this.y=0,this.width=0,this.height=0,this.xDirection=1,this.yDirection=1,this.padding=0,this.scale=1,this.effect=void 0}return Object(d.a)(t,[{key:"useEffect",value:function(t){this.effect=t}},{key:"fireworkBurst",value:function(t,e,i,a){Array.isArray(t)?t.forEach((function(t){return W.playSound(t)})):(W.playSound(t),"bomb"===t&&(e=3)),this.scale=e,void 0!==i&&void 0!==a&&(this.hitx=0|i,this.hity=0|a,this.effect&&this.effect.add(this.hitx,this.hity,this.width,this.height))}},{key:"getFireworkBurstScale",value:function(){return this.scale}},{key:"resetPosition",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this.x=F.randomInt(0,t),this.y=F.randomInt(0,e),this.padding=i,this.width=t,this.height=e,this.xDirection=1,this.yDirection=1}},{key:"_updatePosition",value:function(t,e){var i=this.padding,a=this.width,n=this.height;t<i&&(t=i),t>a-i&&(t=a-i),e<i&&(e=i),e>n-i&&(e=n-i),this.x=t,this.y=e}},{key:"updatePosition",value:function(){var t=this.padding,e=this.x,i=this.y,a=this.width,n=this.height;Math.random()>.1?(e>=a-t?this.xDirection=-1:e<=t&&(this.xDirection=1),this._updatePosition((e+4*this.xDirection)%a,i)):(i>=n-t?this.yDirection=-1:i<=t&&(this.yDirection=1),this._updatePosition(e,(i+4*this.yDirection)%n))}},{key:"getPosition",value:function(){return{x:this.x,y:this.y}}},{key:"getFirePosition",value:function(){return{x:this.hitx,y:this.hity}}}]),t}()),N=function(){function t(e,i,a){Object(f.a)(this,t),this.id=e,this.name=i,this.effect=a}return Object(d.a)(t,[{key:"getDescriptor",value:function(){return{id:this.id,name:this.name}}},{key:"getConfigName",value:function(t){return this.effect.getConfigName(this.id,t)}},{key:"getConfigValue",value:function(t,e){return this.effect.getConfigValue(this.id,t,e)}},{key:"changeConfig",value:function(t,e){return this.effect.changeConfig(this.getConfigName(t),e)}},{key:"configChanged",value:function(){this.postInit()}},{key:"postInit",value:function(){}},{key:"draw",value:function(){}},{key:"option",value:function(){return[]}}]),t}(),q=function t(e,i){var a=i.x,n=i.y,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:F.randomInt(0,360),o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:F.randomInt(50,60);Object(f.a)(this,t);var s=F.random(0,2*Math.PI),h=15*Math.cos(F.random(0,2*Math.PI));this.rocket=e,this.p={x:a,y:n},this.velocity={x:e?F.random(-3,3):Math.cos(s)*h,y:e?F.random(-10,-4):Math.sin(s)*h},this.shrink=e?.999:F.random(0,.05)+.93,this.gravity=e?.01:.2,this.resistance=e?1:.92,this.size=3,this.hue=r,this.brightness=o,this.positions=[];for(var c=0;c<this.size;c++)this.positions.push({x:a,y:n})},_=function(t){Object(p.a)(i,t);var e=Object(g.a)(i);function i(t){var a;return Object(f.a)(this,i),(a=e.call(this,"f6df9bb2","Splendid",t)).count=2,a.particles=[],a}return Object(d.a)(i,[{key:"postInit",value:function(){this.count=this.getConfigValue("count",5)}},{key:"draw",value:function(){var t=this,e=this.count,i=this.particles,a=this.effect,n=a.width,r=a.height;i.forEach((function(e,i){return t.drawParticle(i)})),i.filter((function(t){return t.rocket})).length<e&&i.push(new q(!0,{x:F.randomInt(0,n),y:r}))}},{key:"drawParticle",value:function(t){var e=this.particles,i=this.effect,a=i.ctx,n=i.width,r=i.height,o=e[t],s=o.rocket,h=o.velocity,c=o.p,l=o.positions,u=o.size,f=o.shrink,d=o.gravity,v=o.resistance,p=o.hue,g=o.brightness,m=o.positions.pop();if(a.beginPath(),a.moveTo(m.x,m.y),a.lineTo(c.x,c.y),a.lineWidth=u,a.strokeStyle="hsla(".concat(p,",100%,").concat(g,"%,1)"),a.stroke(),l.unshift({x:c.x,y:c.y}),o.velocity.x*=v,o.velocity.y*=v,o.velocity.y+=d,c.x+=h.x,c.y+=h.y,o.size*=f,o.size<=1||c.x>n||c.x<0||c.y>r||c.y<0)e.splice(t,1);else if(s&&c.y<=.5*r&&F.random(0,1)<=.08){for(var y=F.randomInt(0,10)+100,k=0;k<y;k+=1)e.push(new q(!1,c,p,g));X.fireworkBurst("burst",1,c.x,c.y),e.splice(t,1)}}},{key:"option",value:function(){var t=this;return[this.effect.renderSliderOption({name:this.getConfigName("count"),title:"Number of Particles",minLabel:"sparse",maxLabel:"dense",min:1,max:20,step:1,defaultValue:2}),n.a.createElement(B.a,{type:"primary",onClick:function(e){t.changeConfig("count",2)}},"Restore Default")]}}]),i}(N);var G=i(6);var U={circle:function(t){var e=(t%=360)/360*2*Math.PI;return{x:1*Math.cos(e),y:1*Math.sin(e)}},archimedean:function(t,e){t%=360;var i=(t*=(null===e||void 0===e?void 0:e.cycles)||2)/360*2*Math.PI,a=.5+.3*t/360;return{x:a*Math.cos(i),y:a*Math.sin(i)}},helix:function(t,e){t%=360;var i=(t*=(null===e||void 0===e?void 0:e.cycles)||2)/360*2*Math.PI,a=.08*i;return{x:a*Math.cos(i),y:a*Math.sin(i)}},square:function(t,e){t%=360;var i=(t*=(null===e||void 0===e?void 0:e.cycles)||2)/360*2*Math.PI,a=i*i/300;return{x:a*Math.cos(i),y:a*Math.sin(i)}},ln:function(t,e){t%=360;var i=(t*=.1)/360*2*Math.PI,a=Math.log(i);return{x:a*Math.cos(t),y:a*Math.sin(t)}},sqrt:function(t,e){t%=360;var i=(t*=(null===e||void 0===e?void 0:e.cycles)||2)/360*2*Math.PI,a=.3*Math.sqrt(i);return{x:a*Math.cos(i),y:a*Math.sin(i)}},hyperbolic:function(t,e){t%=360;var i=(t*=(null===e||void 0===e?void 0:e.cycles)||2)/360*2*Math.PI,a=1/i;return{x:a*Math.cos(i),y:a*Math.sin(i)}},lituus:function(t,e){t%=360;var i=(t*=(null===e||void 0===e?void 0:e.cycles)||2)/360*2*Math.PI,a=Math.sqrt(1/i);return{x:a*Math.cos(i),y:a*Math.sin(i)}},exp:function(t,e){t%=360;var i=(t*=(null===e||void 0===e?void 0:e.cycles)||2)/360*2*Math.PI,a=Math.pow(Math.E,-.1*i);return{x:a*Math.cos(i),y:a*Math.sin(i)}},hypotrochoid:function(t,e){t%=360;var i=(t*=(null===e||void 0===e?void 0:e.cycles)||2)/360*2*Math.PI;return{x:.5*(-2*Math.cos(i)+2.2*Math.cos((5/7-1)*i)),y:.5*(-2*Math.sin(i)-2.2*Math.sin((5/7-1)*i))}},hypocycloid:function(t,e){t%=360;var i=(t*=(null===e||void 0===e?void 0:e.cycles)||2)/360*2*Math.PI;return{x:.3*(2*Math.cos(i)+3*Math.cos((5/3-1)*i)),y:.3*(2*Math.sin(i)-3*Math.sin((5/3-1)*i))}},epicycloid:function(t,e){t%=360;var i=(t*=(null===e||void 0===e?void 0:e.cycles)||2)/360*2*Math.PI;return{x:.1*(13*Math.cos(i)-5*Math.cos(2.6*i)),y:.1*(13*Math.sin(i)-5*Math.sin(2.6*i))}},epitrochoid:function(t,e){var i=(t%=360)/360*2*Math.PI;return{x:.1*(12*Math.cos(i)-2.2*Math.cos((5/7+1)*i)),y:.1*(12*Math.sin(i)-2.2*Math.sin((5/7+1)*i))}},trisectrix:function(t){var e=(t%=360)/360*2*Math.PI,i=Math.sin(3*e)/Math.sin(2*e);return{y:i*Math.cos(e),x:i*Math.sin(e)}},trifolium:function(t){t%=360;var e=(t/=2)/360*2*Math.PI,i=Math.sin(e),a=Math.cos(e),n=a*(4*i*i-1);return{x:n*a,y:n*i}},doubleFolium:function(t){t%=360;var e=(t/=2)/360*2*Math.PI,i=Math.cos(e),a=Math.sin(e),n=2.5*i*a*a;return{x:n*i,y:n*a}},rhodonea:function(t){t%=360;var e=(t/=2)/360*2*Math.PI,i=Math.sin(5*e);return{x:i*Math.cos(e),y:i*Math.sin(e)}},nephroid:function(t){var e=(t%=360)/360*2*Math.PI;return{x:.3*(3*Math.cos(e)-Math.cos(3*e)),y:.3*(3*Math.sin(e)-Math.sin(3*e))}},limacon:function(t){var e=(t%=360)/360*2*Math.PI,i=.2*(3+2*Math.cos(e));return{x:i*Math.cos(e),y:i*Math.sin(e)}},tricuspoid:function(t){var e=(t%=360)/360*2*Math.PI;return{x:.5*(2*Math.cos(e)+Math.cos(2*e)),y:.5*(2*Math.sin(e)-Math.sin(2*e))}},freeth:function(t,e){t%=360;var i=(t*=(null===e||void 0===e?void 0:e.cycles)||2)/360*2*Math.PI,a=.3*(1+2*Math.sin(i/2));return{x:a*Math.cos(i),y:a*Math.sin(i)}},lissajous:function(t){var e=(t%=360)/360*2*Math.PI;return{x:1*Math.sin(3*e+1),y:1*Math.sin(e)}},cochleoid:function(t,e){t%=360;var i=(t*=(null===e||void 0===e?void 0:e.cycles)||2)/360*2*Math.PI,a=Math.sin(i)/i*2;return{x:a*Math.cos(i),y:a*Math.sin(i)}},cycloid:function(t,e){t%=360;var i=(t*=(null===e||void 0===e?void 0:e.cycles)||2)/360*2*Math.PI;return{x:.2*(1*i-2*Math.sin(i)),y:.2*(1-2*Math.cos(i))}},polar1:function(t){t%=360;var e=(t*=2)/360*2*Math.PI,i=.1*e;return{x:i*Math.cos(e),y:i*Math.sin(e)}},polar2:function(t){var e=(t%=360)/360*2*Math.PI,i=.5*(Math.sin(Math.pow(2,e))-1.7);return{x:i*Math.cos(e),y:i*Math.sin(e)}},cayley:function(t,e){t%=360;var i=(t*=(null===e||void 0===e?void 0:e.cycles)||2.2)/360*2*Math.PI,a=Math.cos(i/3),n=a*a*a;return{x:n*Math.cos(i),y:n*Math.sin(i)}},heart:function(t){var e=(t%=360)/360*2*Math.PI,i=Math.sin(e);return{x:16*i*i*i*.08,y:.08*(13*Math.cos(e)-5*Math.cos(2*e)-2*Math.cos(3*e)-Math.cos(4*e))}},heart1:function(t){var e=(t%=360)/360*2*Math.PI,i=1*(1-Math.sin(e));return{x:i*Math.cos(e),y:i*Math.sin(e)}},heart3:function(t){var e=(t%=360)/360*2-1;return{x:2*Math.sin(e)*Math.cos(e)*Math.log(Math.abs(e)),y:2*Math.sqrt(Math.abs(e))*Math.cos(e)}},heart5:function(t){var e=(t%=360)/360*2*Math.PI,i=Math.sin(e),a=Math.cos(e),n=.5*(2-2*i+i*Math.sqrt(Math.abs(a))/(i+1.4));return{x:n*a,y:n*i}},heart7:function(t){t%=360;var e=(t-=180)/360*2*Math.PI,i=Math.sin(e),a=5*Math.pow(i,7)*Math.pow(Math.E,Math.abs(2*e))*.01;return{x:a*Math.cos(e),y:a*Math.sin(e)}},heart8:function(t){t%=360;var e=(t-=180)/360*2*Math.PI,i=Math.abs(e)/Math.PI;return{x:i*Math.cos(e),y:i*Math.sin(e)}},heart9:function(t){var e=(t%=360)/360*2-1,i=(1-Math.abs(e))*(1+3*Math.abs(e));return{x:i*Math.cos(e),y:i*Math.sin(e)}},heart10:function(t){t%=360;var e=(t-=180)/360*2*Math.PI,i=1-Math.cos(e/2);return{x:i*Math.cos(e),y:i*Math.sin(e)}}};function H(t){return U[t]}var J=i(172),K=["#ff0000","#00ff00","#0000ff","#33ff33","#ccff00","#ff9900","#3399ff","#ff3399","#cc0066"];function $(){return K[F.randomInt(0,K.length)]}var Q=function(){function t(e){var i=e.x,a=e.y,n=e.width,r=e.height,o=e.color,s=e.life,h=e.radius,c=e.velocity,l=e.accelerate,u=Object(J.a)(e,["x","y","width","height","color","life","radius","velocity","accelerate"]);Object(f.a)(this,t),this.width=n,this.height=r,this.x=i||F.randomInt(n/5,4*n/5),this.y=a||F.randomInt(r/5,4*r/5),this.radius=h||1+Math.random(),this.life=s||F.randomInt(50,150),this.wholeLife=this.life,this.color=o||$();var d=function(t){return void 0===t?{red:F.randomInt(0,256),green:F.randomInt(0,256),blue:F.randomInt(0,256)}:"object"===typeof t?{red:t.red,green:t.green,blue:t.blue}:("string"===typeof t&&(t=parseInt(t.startsWith("#")?t.substr(1):t,16)),{red:(t>>16)%256,green:(t>>8)%256,blue:t%256})}(this.color),v=d.red,p=d.green,g=d.blue;this.red=v,this.green=p,this.blue=g,this.alpha=.05;var m=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(t||(t={x:.1,y:.1}),void 0===t.x||void 0===t.y){var i,a,n=(null===(i=t)||void 0===i?void 0:i.speed)||.1,r=(null===(a=t)||void 0===a?void 0:a.angle)||F.randomInt(0,360);t.x=Math.cos(r)*n,t.y=Math.sin(r)*n}return void 0!==e.x&&void 0!==e.y||(void 0===e.x&&(e.x=.001*(t.x>0?1:-1)),void 0===e.y&&(e.y=.01)),{velocity:t,accelerate:e}}(c,l);this.velocity=m.velocity,this.accelerate=m.accelerate,this.props=Object(G.a)({},u)}return Object(d.a)(t,[{key:"draw",value:function(t){var e=this.x,i=this.y,a=this.radius,n=this.color,r=this.lineWidth;t.beginPath(),t.arc(e,i,a,0,2*Math.PI,!0),t.lineWidth=r,t.fillStyle=n,t.fill()}},{key:"isLive",value:function(){var t=this.x,e=this.y,i=this.width,a=this.height,n=this.alpha,r=this.life;return!(e>a||t<0||t>i||n<=0||r<=0)}}]),t}(),Z=function t(e){Object(f.a)(this,t),this.options=e.options||0,this.width=e.width,this.height=e.height,this.x=e.x||e.width*(.8*Math.random()+.1),this.y=e.y||e.height*(.8*Math.random()+.1),this.color=e.color||$(),this.life=e.life||50+F.randomInt(0,200),this.wholeLife=this.life,this.particleClass=e.particleClass,this.particles=[]},tt=function(t){Object(p.a)(i,t);var e=Object(g.a)(i);function i(t){var a;Object(f.a)(this,i),(a=e.call(this,t)).strength=t.trailStrength||F.random(1.5,7);var n=t.particleCount||F.randomInt(7,30),r={x:a.x,y:a.y,width:a.width,height:a.height,color:a.color},o=H(t.shape||"circle"),s=t.rotateAngle;void 0===s&&(s=F.randomInt(0,2*Math.PI));var h=Math.sin(s),c=Math.cos(s);a.radius=.01;for(var l=n;l--;){var u=l*Math.PI*2/n;r.velocity={x:a.strength*Math.sin(u),y:a.strength*Math.cos(u)};var d=new a.particleClass(r),v=o(360*l/n);d.curvePosition={x:v.x*c-v.y*h,y:v.x*h+v.y*c},a.particles.push(d)}return a}return Object(d.a)(i,[{key:"update",value:function(){if(this.life--,this.isLive()){var t=this.x,e=this.y,i=this.radius;this.particles.forEach((function(a){var n=a.curvePosition;a.update(t+n.x*i,e+n.y*i+.1)}))}this.radius+=this.strength}},{key:"draw",value:function(t){this.isLive()&&this.particles.forEach((function(e){return e.draw(t)}))}},{key:"isLive",value:function(){return this.life>0}}]),i}(Z),et=function(t){Object(p.a)(i,t);var e=Object(g.a)(i);function i(t){var a;return Object(f.a)(this,i),(a=e.call(this,t)).trailLength=t.trailLength||8,a.trailDelta=void 0!==t.trailDelta?t.trailDelta:1.5,a.initialLife=a.life,a.path=[],a}return Object(d.a)(i,[{key:"update",value:function(t,e){this.life--;var i=this.path,a=this.trailLength,n=this.trailDelta;i.length>=a&&i.shift(),i.push([this.x,this.y]),this.velocity.y+=this.accelerate.y,this.velocity.x+=this.accelerate.x;var r=0,o=0;Math.random()>.5&&(r=(Math.random()>.5?n:-n)*Math.random(),o=(Math.random()>.5?n:-n)*Math.random()),void 0!==t?this.x=t+r:this.x+=this.velocity.x+r,void 0!==e?this.y=e+o:this.y+=this.velocity.y+o}},{key:"draw",value:function(t){var e=this.x,i=this.y,a=this.radius,n=this.red,r=this.green,o=this.blue,s=this.life,h=this.initialLife,c=this.path,l=~~(100*s/h)/100;t.fillStyle="rgba(".concat(n,",").concat(r,",").concat(o,",").concat(~~(.4*l*256),")"),s>.95*h&&(t.fillStyle="#fff"),t.lineWidth=1,t.beginPath(),t.moveTo(e-a,i),c.length&&t.lineTo(c[0][0],c[0][1]),t.lineTo(e+a,i),t.closePath(),t.fill(),t.fillStyle="rgba(".concat(n,",").concat(r,",").concat(o,",").concat(256*l,")"),s>.95*h&&(t.fillStyle="#fff"),t.beginPath(),t.arc(~~e,~~i,1,0,2*Math.PI),t.fill(),t.closePath()}},{key:"isLive",value:function(){return this.life>0}}]),i}(Q),it=function(t){Object(p.a)(i,t);var e=Object(g.a)(i);function i(){return Object(f.a)(this,i),e.apply(this,arguments)}return Object(d.a)(i,[{key:"update",value:function(t,e){this.life--;var i=this.life;i<=this.wholeLife/3?(this.alpha+=.01,this.color=this.getColor(240,230,210,.4)):this.color=this.getColor(this.red,this.green,this.blue,.4+.3*Math.random()),i<30?(this.alpha-=.02,this.color=this.getColor()):this.alpha<1&&(this.alpha+=.03),void 0!==t&&(this.x=t),void 0!==e&&(this.y=e)}},{key:"getColor",value:function(t,e,i,a){return"rgba(".concat(t||this.red,", ").concat(e||this.green,", ").concat(i||this.blue,", ").concat(a||this.alpha,")")}}]),i}(Q),at=[{particleClass:et,shape:"circle",trailStrength:7,particleCount:30},{particleClass:it,shape:"circle",trailStrength:1.5,particleCount:30},{particleClass:it,shape:"heart",color:"#ff0000",trailStrength:5,particleCount:150}],nt=function(t){Object(p.a)(i,t);var e=Object(g.a)(i);function i(t){var a;Object(f.a)(this,i),(a=e.call(this,"a0886f1a","Radiancy",t)).explosions=[];for(var n=0;n<3;n++){var r=a.createExplosion();a.explosions.push(r)}return a}return Object(d.a)(i,[{key:"createExplosion",value:function(){var t=this.effect,e=t.width,i=t.height,a=at[F.randomInt(0,at.length)],n=new tt(Object(G.a)(Object(G.a)({},a),{},{width:e,height:i}));return X.fireworkBurst("burst",1,n.x,n.y),n}},{key:"draw",value:function(){var t=this,e=this.effect.ctx;this.explosions.forEach((function(i,a){if(i.update(),i.isLive())i.draw(e);else{var n=t.createExplosion();t.explosions[a]=n}}))}}]),i}(N);var rt=-10,ot=20,st=25,ht=15,ct=1;function lt(t){t=t||0,this.r=ut(t),this.g=ut(t),this.b=ut(t),this.style=function(t,e,i){return"rgba("+t+","+e+","+i+", 0.8)"}(this.r,this.g,this.b)}function ut(t){return Math.floor(255*Math.random()+t)}var ft=function(){function t(e,i){Object(f.a)(this,t),this.radius=10,this.previousRadius=10,this.explodingDuration=100,this.hasExploded=!1,this.alive=!0,this.color=new lt,this.px=e/4+Math.random()*i/2,this.py=i,this.vx=rt+Math.random()*ot,this.vy=-1*(st+Math.random()*ht),this.duration=40}return Object(d.a)(t,[{key:"update",value:function(t){if(this.hasExploded){var e=200-this.radius;this.previousRadius=this.radius,this.radius+=e/10,this.explodingDuration--,0===this.explodingDuration&&(this.alive=!1)}else this.vx+=0,this.vy+=ct,this.vy>=0&&(this.explode(t),X.fireworkBurst("burst",2,this.px,this.py)),this.px+=this.vx,this.py+=this.vy}},{key:"draw",value:function(t){t.beginPath(),t.arc(this.px,this.py,this.previousRadius,0,2*Math.PI,!1),this.hasExploded||(t.fillStyle=this.color.style,t.lineWidth=1,t.fill())}},{key:"explode",value:function(t){this.hasExploded=!0;for(var e=3+Math.floor(3*Math.random()),i=0;i<e;i++)for(var a=10+Math.floor(21*Math.random()),n=5+5*Math.random(),r=2*Math.PI/a,o=Math.random()*r,s=0;s<a;s++)t.push(new dt(this,s*r+o,n))}}]),t}(),dt=function(){function t(e,i,a){Object(f.a)(this,t),this.px=e.px,this.py=e.py,this.vx=Math.cos(i)*a,this.vy=Math.sin(i)*a,this.color=e.color,this.duration=40+Math.floor(20*Math.random()),this.alive=!0}return Object(d.a)(t,[{key:"update",value:function(){this.vx+=0,this.vy+=ct/10,this.px+=this.vx,this.py+=this.vy,this.radius=3,this.duration--,this.duration<=0&&(this.alive=!1)}},{key:"draw",value:function(t){t.beginPath(),t.arc(this.px,this.py,this.radius,0,2*Math.PI,!1),t.fillStyle=this.color.style,t.lineWidth=1,t.fill()}}]),t}(),vt=function(t){Object(p.a)(i,t);var e=Object(g.a)(i);function i(t){var a;Object(f.a)(this,i),(a=e.call(this,"b93d0d69","Bang",t)).readyBombs=[],a.explodedBombs=[],a.particles=[];for(var n=0;n<1;n++)a.readyBombs.push(new ft(a.width,a.height));return a}return Object(d.a)(i,[{key:"postInit",value:function(){ct=this.getConfigValue("gravity",1)}},{key:"update",value:function(){for(var t=[];this.explodedBombs.length>0;){var e=this.explodedBombs.shift();e.update(),e.alive&&t.push(e)}this.explodedBombs=t;for(var i=[];this.readyBombs.length>0;){var a=this.readyBombs.shift();a.update(this.particles),a.hasExploded?this.explodedBombs.push(a):i.push(a)}this.readyBombs=i;for(var n=[];this.particles.length>0;){var r=this.particles.shift();r.update(),r.alive&&n.push(r)}this.particles=n}},{key:"draw",value:function(t){var e=this.effect,i=e.ctx,a=e.width,n=e.height;this.update(),i.beginPath();for(var r=this.readyBombs,o=this.explodedBombs,s=this.particles,h=0;h<r.length;h++)r[h].draw(i);for(var c=0;c<o.length;c++)o[c].draw(i);for(var l=0;l<s.length;l++)s[l].draw(i);100*Math.random()<5&&r.push(new ft(a,n))}},{key:"setSpeedParams",value:function(){for(var t=0,e=0;t<this.height&&e>=0;)t+=e+=ct;ht=e-(st=e/2);var i=1/4*this.width/(e/2);rt=-i,ot=2*i}},{key:"option",value:function(){var t=this;return[this.effect.renderSliderOption({name:this.getConfigName("gravity"),title:"Gravity",minLabel:"weak",maxLabel:"strong",min:1,max:3,step:.1,defaultValue:1}),n.a.createElement(B.a,{type:"primary",onClick:function(e){t.changeConfig("gravity",1)}},"Restore Default")]}},{key:"configChanged",value:function(){this.postInit()}}]),i}(N);function pt(t,e,i,a){var n=t-i,r=e-a;return Math.sqrt(Math.pow(n,2)+Math.pow(r,2))}var gt=function(){function t(e,i,a,n){for(Object(f.a)(this,t),this.x=e,this.y=i,this.startX=e,this.startY=i,this.endX=a,this.endY=n,this.distanceToEnd=pt(e,i,a,n),this.distanceTraveled=0,this.trail=[],this.trailLength=3;this.trailLength--;)this.trail.push([this.x,this.y]);this.angle=Math.atan2(n-i,a-e),this.speed=5,this.acceleration=1.05,this.brightness=F.randomInt(50,70),this.targetRadius=2.5}return Object(d.a)(t,[{key:"update",value:function(){this.trail.pop(),this.trail.unshift([this.x,this.y]),this.targetRadius<8?this.targetRadius+=.3:this.targetRadius=1,this.speed*=this.acceleration;var t=Math.cos(this.angle)*this.speed,e=Math.sin(this.angle)*this.speed;return this.distanceTraveled=pt(this.startX,this.startY,this.x+t,this.y+e),this.distanceTraveled>=this.distanceToEnd||(this.x+=t,this.y+=e,!1)}},{key:"draw",value:function(t,e){t.lineWidth=1,t.beginPath();var i=this.trail[this.trail.length-1][0],a=this.trail[this.trail.length-1][1];t.moveTo(i,a),t.lineTo(this.x,this.y),t.strokeStyle="hsl(".concat(e,", 100%, ").concat(this.brightness,"%)"),t.stroke(),t.beginPath(),t.arc(this.endX,this.endY,this.targetRadius,0,2*Math.PI),t.stroke()}}]),t}(),mt=function(){function t(e,i,a){for(Object(f.a)(this,t),this.x=e,this.y=i,this.angle=F.random(0,2*Math.PI),this.friction=.95,this.gravity=.7,this.hue=F.randomInt(a-20,a+20),this.brightness=F.randomInt(50,80),this.decay=F.random(.015,.03),this.speed=F.random(1,10),this.trail=[],this.trailLength=5;this.trailLength--;)this.trail.push([this.x,this.y]);this.transparency=1}return Object(d.a)(t,[{key:"update",value:function(){return this.trail.pop(),this.trail.unshift([this.x,this.y]),this.speed*=this.friction,this.x+=Math.cos(this.angle)*this.speed,this.y+=Math.sin(this.angle)*this.speed+this.gravity,this.transparency-=this.decay,this.transparency<=this.decay}},{key:"draw",value:function(t){t.lineWidth=1,t.beginPath();var e=this.trail[this.trail.length-1][0],i=this.trail[this.trail.length-1][1];t.moveTo(e,i),t.lineTo(this.x,this.y),t.strokeStyle="hsla(".concat(this.hue,", 100%, ").concat(this.brightness,"%, ").concat(this.transparency,")"),t.stroke()}}]),t}(),yt=function(t){Object(p.a)(i,t);var e=Object(g.a)(i);function i(t){var a;return Object(f.a)(this,i),(a=e.call(this,"6acdb162","Shooting",t)).fireworks=[],a.particles=[],a.isMouseDown=!1,a.hue=120,a.ticksSinceFireworkAutomated=0,a.ticksSinceFirework=0,a}return Object(d.a)(i,[{key:"draw",value:function(){this.hue+=.5,this.updateFireworks(),this.updateParticles(),this.launchAutomatedFirework(),this.launchManualFirework()}},{key:"createParticles",value:function(t,e){for(var i=this.particles,a=this.hue,n=100;n--;)i.push(new mt(t,e,a))}},{key:"launchAutomatedFirework",value:function(){var t=this.effect,e=t.width,i=t.height,a=this.fireworks,n=this.isMouseDown;if(this.ticksSinceFireworkAutomated>=F.random(20,80)){if(!n){var r=e/2,o=i,s=F.randomInt(0,e),h=F.randomInt(0,i/2);a.push(new gt(r,o,s,h)),this.ticksSinceFireworkAutomated=0}}else this.ticksSinceFireworkAutomated++}},{key:"launchManualFirework",value:function(){var t=this.effect,e=t.width,i=t.height,a=this.fireworks,n=this.isMouseDown,r=this.center;if(this.ticksSinceFirework>=5){if(n){var o=e/2,s=i,h=r.x,c=r.y;a.push(new gt(o,s,h,c)),this.ticksSinceFirework=0}}else this.ticksSinceFirework++}},{key:"updateFireworks",value:function(){for(var t=this.effect.ctx,e=this.fireworks,i=this.hue,a=e.length-1;a>=0;--a){var n=e[a];n.draw(t,i),n.update()&&(e.splice(a,1),this.createParticles(n.endX,n.endY),X.fireworkBurst(["gun","shellFall"],1,n.endX,n.endY))}}},{key:"updateParticles",value:function(){for(var t=this.effect.ctx,e=this.particles,i=e.length-1;i>=0;--i){var a=e[i];a.draw(t),a.update()&&e.splice(i,1)}}}]),i}(N);var kt=function(){function t(e,i,a,n,r){Object(f.a)(this,t),this.x=e,this.y=i,this.dir=a,this.power=n,this.vx=Math.cos(this.dir*Math.PI/180)*this.power,this.vy=Math.sin(this.dir*Math.PI/180)*this.power,this.health=100,this.hsl=r.replace(/[^\d,]/g,"").split(",")}return Object(d.a)(t,[{key:"update",value:function(){if(this.x+=this.vx,this.y+=this.vy,this.vx*=.98,this.vy*=.98,this.vy+=.15,this.health--,this.health<=0)return!0}},{key:"draw",value:function(t){t.fillStyle="hsla("+this.hsl[0]+","+this.hsl[1]+"%,"+this.hsl[2]+"%,"+this.health/100+")",t.fillRect(this.x-2,this.y-2,4,4)}}]),t}(),wt=function(){function t(e,i){Object(f.a)(this,t),this.x=Math.random()*e,this.y=i,this.vy=-(F.random(0,5)+10),this.color="hsl("+F.random(0,360)+", 100%, 50%)"}return Object(d.a)(t,[{key:"update",value:function(){if(this.y+=this.vy,this.vy+=.15,Math.abs(this.vy)<=.1)return!0}},{key:"draw",value:function(t){t.fillStyle=this.color,t.fillRect(this.x,this.y,3,3)}}]),t}(),xt=360,bt=function(t){Object(p.a)(i,t);var e=Object(g.a)(i);function i(t){var a;return Object(f.a)(this,i),(a=e.call(this,"b8d18c5b","Blossom",t)).postInit(),a}return Object(d.a)(i,[{key:"postInit",value:function(){var t=this.effect,e=t.width,i=t.height;this.fireworks=[new wt(e,i)],this.particles=[],this.lastTick=Date.now(),xt=this.getConfigValue("count",300)}},{key:"draw",value:function(t){var e=this.fireworks,i=this.particles,a=this.effect,n=a.ctx,r=a.width,o=a.height,s=xt;t||(s/=2);for(var h=e.length-1;h>=0;h--){var c=e[h];if(c.update()){for(var l=0;l<s;l++)i.push(new kt(c.x,c.y,F.randomInt(0,360),F.random(0,5),c.color));e.splice(h,1),X.fireworkBurst("burst",1,c.x,c.y)}c.draw(n)}for(var u=i.length-1;u>=0;u--){var f=i[u];f.update()&&i.splice(u,1),f.draw(n)}var d=Date.now();d-this.lastTick>1e3&&(this.lastTick=d,e.push(new wt(r,o)))}},{key:"option",value:function(){var t=this;return[this.effect.renderSliderOption({name:this.getConfigName("count"),title:"Number of Particles",minLabel:"sparse",maxLabel:"dense",min:1,max:1e3,step:1,defaultValue:350}),n.a.createElement(B.a,{type:"primary",onClick:function(e){t.changeConfig("count",300)}},"Restore Default")]}}]),i}(N);var Mt=3,Ct=.02,Ot=20,St=100,It=3,jt=.01,Et=10,Pt=50,Lt=2,Dt=2.5,Ft=.1,Rt=[0,0,0],Tt="round",zt=4,Vt=20,At=30,Bt=10,Yt=20,Wt=6,Xt=.05,Nt=8,qt=.5,_t=[[255,30,40],[255,150,20],[255,220,0],[0,255,100],[100,255,20],[50,200,200],[120,220,255],[80,180,255],[220,120,255],[255,100,150],[240,20,200],[140,140,140],[170,170,170],[200,200,200],[255,0,0]],Gt=function(t,e,i,a,n,r){t.strokeStyle=r,t.beginPath(),function(t,e,i,a,n){t.moveTo(e,i),t.lineTo(a,n)}(t,e,i,a,n),t.stroke()},Ut=function(t){Object(p.a)(i,t);var e=Object(g.a)(i);function i(t){var a;return Object(f.a)(this,i),(a=e.call(this,"70510490","Still Explod",t)).fireworks=[],a.rockets=[],a}return Object(d.a)(i,[{key:"draw",value:function(){var t=this.effect,e=t.ctx,i=t.width,a=t.height;e.lineCap=Tt,e.lineWidth=Mt;var n,r=Object(s.a)(this.fireworks);try{for(r.s();!(n=r.n()).done;){var o,h=n.value,c="rgba(".concat(h.color[0],", ").concat(h.color[1],", ").concat(h.color[2],", "),l=Object(s.a)(h.moving);try{for(l.s();!(o=l.n()).done;){var u=o.value;Gt(e,u.x,u.y,u.x+u.speedX/Dt*u.length,u.y+u.speedY/Dt*u.length,"".concat(c).concat(u.alpha,")"))}}catch(y){l.e(y)}finally{l.f()}var f,d=Object(s.a)(h.fading);try{for(d.s();!(f=d.n()).done;){var v=f.value;Gt(e,v.x,v.y,v.x+v.speedX/Dt*v.length,v.y+v.speedY/Dt*v.length,"".concat(c).concat(v.alpha,")"))}}catch(y){d.e(y)}finally{d.f()}}}catch(y){r.e(y)}finally{r.f()}e.lineWidth=zt,e.save(),e.shadowBlur=Vt;var p,g=Object(s.a)(this.rockets);try{for(g.s();!(p=g.n()).done;){var m=p.value;e.shadowColor=m.color,Gt(e,m.x,m.y,m.x+m.speedX/Nt*m.length,m.y+m.speedY/Nt*m.length,m.color)}}catch(y){g.e(y)}finally{g.f()}e.restore(),Math.random()<Xt&&this.createRocket(Math.random()*i,Math.random()*a);this.removeFireworks(1),this.removeRockets(1)}},{key:"removeFireworks",value:function(t){for(var e=this.fireworks,i=e.length-1;i>=0;i--){for(var a=e[i].moving.length-1;a>=0;a--){var n=e[i].moving[a];Math.abs(n.speedX)<Ft&&Math.abs(n.speedY)<Ft?(e[i].moving.splice(a,1),e[i].fading.push(n)):(n.x+=n.speedX*t,n.y+=n.speedY*t,Math.sign(n.speedX)===Math.sign(n.speedX-n.speedDecreaseX*t)?n.speedX-=n.speedDecreaseX*t:n.speedX=0,Math.sign(n.speedY)===Math.sign(n.speedY-n.speedDecreaseY*t)?n.speedY-=n.speedDecreaseY*t:n.speedY=0)}if(0===e[i].moving.length){for(var r=e[i].fading.length-1;r>=0;r--){var o=e[i].fading[r];o.alpha>o.alphaDecrease*t?o.alpha-=o.alphaDecrease*t:e[i].fading.splice(r,1)}0===e[i].fading.length&&e.splice(i,1)}}}},{key:"removeRockets",value:function(t){for(var e=this.rockets,i=e.length-1;i>=0;i--){var a=e[i];Math.abs(a.speedX)<qt&&Math.abs(a.speedY)<qt?(e.splice(i,1),this.createFirework(a.x,a.y,a.colorFirework)):(a.x+=a.speedX*t,a.y+=a.speedY*t,a.speedX-=a.speedDecreaseX*t,a.speedY-=a.speedDecreaseY*t)}}},{key:"createFirework",value:function(t,e,i){for(var a=this.fireworks,n=[],r=F.random(Pt,St),o=0;o<2*r;o++){var s=r*Math.sqrt(Math.random()),h=2*Math.PI*Math.random(),c=s*Math.cos(h),l=s*Math.sin(h),u=Math.sqrt(Math.pow(c,2)+Math.pow(l,2)),f=F.random(Lt,It),d=c/u*f,v=l/u*f;n.push({x:t,y:e,distX:c,distY:l,speedX:d,speedY:v,speedDecreaseX:Math.pow(d,2)/(2*c),speedDecreaseY:Math.pow(v,2)/(2*l),alpha:1,alphaDecrease:F.random(jt,Ct),length:F.randomInt(Et,Ot)})}a.push({color:i,moving:n,fading:[]}),X.fireworkBurst("burst",1,t,e)}},{key:"createRocket",value:function(t,e){var i,a=this.effect,n=a.width,r=a.height,o=this.rockets,s=t-n/2,h=e-r,c=Math.sqrt(Math.pow(s,2)+Math.pow(h,2)),l=F.random(Wt,Bt),u=s/c*l,f=h/c*l;i=16===_t.length+1?_t[F.randomInt(0,_t.length)]:16===_t.length?Rt:_t[16],o.push({x:n/2,y:r,color:"rgb(".concat(i[0],", ").concat(i[1],", ").concat(i[2],")"),colorFirework:i,length:F.randomInt(Yt,At),speedX:u,speedY:f,speedDecreaseX:Math.pow(u,2)/(2*s),speedDecreaseY:Math.pow(f,2)/(2*h)})}}]),i}(N);var Ht=i(310),Jt=i(120);function Kt(t,e,i){if(/\s/.test(t))return[];var a=T(e,e);a.font="bold ".concat(e,"px Arial"),a.fillStyle="white",a.textBaseline="middle",a.textAlign="center",a.fillText(t,e/2,e/2);for(var n=a.getImageData(0,0,e,e),r=[],o=0,s=0;r.length<i;s++){var h=e*Math.random(),c=e*Math.random(),l=parseInt(c)*e*4+4*parseInt(h);if(n.data[l]&&r.push([h-e/2,c-e/2]),++o>5*i)break}return r}var $t=function(t){Object(p.a)(i,t);var e=Object(g.a)(i);function i(t){var a;return Object(f.a)(this,i),(a=e.call(this,"28775d10","Yet Another Spew Text",t)).duration=3e3,a}return Object(d.a)(i,[{key:"postInit",value:function(){this.duration=this.getConfigValue("duration",3e3),this.words=this.getConfigValue("text","awesome").split("\n").map((function(t){return t.trim()})).filter((function(t){return t.length})),this.makeWord(0)}},{key:"draw",value:function(){var t=this,e=this.effect,i=e.ctx,a=e.width,n=e.height,r=this.words;this.tick=Date.now();var o=parseInt(this.tick/this.duration)%r.length;this.currentWord===o&&this.chars||this.makeWord(o),i.fillStyle="#00000010",i.fillRect(0,0,a,n),this.chars.forEach((function(e){t.firework(i,a,n,e)}))}},{key:"makeWord",value:function(t){var e=this.effect.width,i=this.words,a=e<400?300:400,n=e<400?300:400;t%=i.length,this.currentWord=t,this.chars=Object(m.a)(i[t]).map((function(t){return Kt(t,a,n)})).map((function(t,e){return{index:e,points:t,soundState:0}}))}},{key:"firework",value:function(t,e,i,a){var n=a.index,r=a.points,o=this.duration,s=this.tick;s-=200*n;var h=n+this.chars.length*parseInt(s-s%o);s=s%o/o;var c=(n+1)*e/(1+this.chars.length);c+=100*Math.min(.2,s)*Math.sin(h);var l=.5*i;l+=Math.sin(4547.411*h)*i*.1,s<.2?(this.rocket(t,c,l,h,3*s,i),a.soundState&&(a.soundState=0)):(this.explosion(t,r,c,l,h,Math.min(1,2*Math.max(0,s-.2)),i),a.soundState||Math.random()>.8&&(a.soundState=1,X.fireworkBurst(Math.random()>.5?"burstSmall":"burst",1,c,l)))}},{key:"rocket",value:function(t,e,i,a,n,r){t.fillStyle="white";var o=2-2*n+16*Math.pow(n,15*n);i=r-i*n,this.circle(t,e,i,o)}},{key:"explosion",value:function(t,e,i,a,n,r,o){var s=this,h=r*r*r*20,c=1*Math.sin(n)+8;c=r<.5?(r+.5)*r*c:c-r*c,t.fillStyle="hsl(".concat(55*n,", 55%, 55%)"),e.forEach((function(e,l){l%20===0&&(t.fillStyle="hsl(".concat(55*n,", 55%, ").concat(55+r*Math.sin(55*r+l)*45,"%)")),s.circle(t,r*e[0]+i,o-a+r*e[1]+h,c)}))}},{key:"circle",value:function(t,e,i,a){t.beginPath(),t.ellipse(e,i,a,a,0,0,6.283),t.fill()}},{key:"option",value:function(){var t=this;return[this.effect.renderSliderOption({name:this.getConfigName("duration"),title:"Duration",minLabel:"short",maxLabel:"long",min:2e3,max:15e3,step:500,defaultValue:5e3}),n.a.createElement(n.a.Fragment,null,n.a.createElement("span",null,"Text"),n.a.createElement(Ht.a.TextArea,{placeholder:"Text to firework",ref:function(e){return t.input=e},defaultValue:this.getConfigValue("text")||"fire!",onChange:function(e){return t.changeConfig("text",e.target.value)}}))]}}]),i}(N);var Qt=function(t){Object(p.a)(i,t);var e=Object(g.a)(i);function i(t){var a;if(Object(f.a)(this,i),a=e.call(this,t),t.data)a.data=t.data;else{var n=t.charCode||"abcdefghijklmnopqrstuvwxyz".charAt(F.randomInt(0,26)),r=Object(v.a)(a),o=r.width,s=r.height,h=Math.min(o,s)<400?300:400,c=Math.min(o,s)<400?300:400;a.data=Kt(n,h,c)}return a.data=function(t){var e=Number.MAX_VALUE,i=Number.MIN_VALUE,a=Number.MAX_VALUE,n=Number.MIN_VALUE;t.forEach((function(t){var r=Object(Jt.a)(t,2),o=r[0],s=r[1];o>i&&(i=o),o<e&&(e=o),s>n&&(n=s),s<a&&(a=s)}));var r=i!==e?1/(i-e):1,o=n!==a?1/(n-a):1,s=Math.min(r,o);return t.map((function(t){var e=Object(Jt.a)(t,2),i=e[0],a=e[1];return[i*s,a*s]}))}(a.data),a.velocity=t.velocity||{x:0,y:0},a.radius=1,a}return Object(d.a)(i,[{key:"update",value:function(){this.life--;var t=this.life/this.wholeLife;this.scale=100*Math.min(1,2*Math.max(0,t-.2)),this.radius+=.001;var e=this.velocity;this.x+=e.x,this.y+=e.y}},{key:"draw",value:function(t){var e=this,i=this.scale,a=this.x,n=this.y,r=this.radius;this.data.forEach((function(o,s){t.fillStyle=e.color,t.beginPath(),t.ellipse(a+o[0]*i,n+o[1]*i,r,r,0,0,6.283),t.fill()}))}},{key:"isLive",value:function(){return this.life>0}}]),i}(Z),Zt=function(){function t(e){var i=e.x,a=e.y,n=e.width,r=e.height,o=e.onEnd,s=e.color,h=void 0===s?"#ffffff":s,c=e.size,l=void 0===c?1:c,u=e.velocity,d=void 0===u?{x:F.random(-2,2),y:F.random(5,20)}:u,v=e.maxY,p=void 0===v?0:v,g=e.options;Object(f.a)(this,t),this.x=i,this.y=a,this.width=n,this.height=r,this.color=h,this.size=l,this.velocity=d,this.maxY=p||Math.random()*r/4+r/10,this.onEnd=o,this.visible=!0,this.options=g}return Object(d.a)(t,[{key:"draw",value:function(t){var e=this.x,i=this.y,a=this.size,n=this.color;this.visible&&(t.beginPath(),t.arc(e,i,a,0,2*Math.PI),t.fillStyle=n,t.fill(),t.closePath())}},{key:"update",value:function(){var t=this.velocity;if(this.visible){this.y-=t.y,this.x+=t.x;var e=this.x,i=this.y,a=this.maxY,n=this.width,r=this.onEnd;(i<=a||e<=0||e>=n)&&(this.visible=!1,r&&r(this,this.options))}}},{key:"isLive",value:function(){return this.visible}}]),t}(),te=function(t){Object(p.a)(i,t);var e=Object(g.a)(i);function i(t){var a;return Object(f.a)(this,i),(a=e.call(this,t)).dampening=100,a.initialVelocity=Object(G.a)({},a.velocity),a.wholeLife=a.life,a}return Object(d.a)(i,[{key:"update",value:function(t,e){this.life--;var i=this.life,a=this.wholeLife;i<=a/3?(this.x+=2.2*this.initialVelocity.x,this.y+=2.2*this.initialVelocity.y,this.alpha+=.01,this.color=this.getColor(240,230,210,.4)):(this.x+=this.velocity.x,this.y+=this.velocity.y,this.color=this.getColor(this.red,this.green,this.blue,.4+.3*Math.random())),this.velocity.y+=this.accelerate.y,i<a/8?(this.velocity.x-=this.velocity.x/this.dampening/10,this.velocity.y-=this.velocity.y/this.dampening/10):(this.velocity.x-=this.velocity.x/this.dampening,this.velocity.y-=this.velocity.y/this.dampening),i<30?(this.alpha-=.02,this.color=this.getColor()):this.alpha<1&&(this.alpha+=.03),void 0!==t&&(this.x=t),void 0!==e&&(this.y=e)}},{key:"getColor",value:function(t,e,i,a){return"rgba(".concat(t||this.red,", ").concat(e||this.green,", ").concat(i||this.blue,", ").concat(a||this.alpha,")")}}]),i}(Q),ee=function(t){Object(p.a)(i,t);var e=Object(g.a)(i);function i(t){var a;return Object(f.a)(this,i),(a=e.call(this,"e357b0d7","Spew Text",t)).rockets=[],a.explosions=[],a.particles=[],a.wordsIndex=0,a}return Object(d.a)(i,[{key:"postInit",value:function(){this.words=this.getConfigValue("text","awesome").split("\n").map((function(t){return t.trim()})).filter((function(t){return t.length})).map((function(t){return t.replace("love","*").replace(" ","")}))}},{key:"createExplosion",value:function(t,e){var i,a=e.fireworks,n=e.charCode,r=a.effect,o=r.width,s=r.height,h={x:~~t.x,y:~~t.y,width:o,height:s,life:150+F.randomInt(10,50),velocity:{x:0,y:.5}};if("*"===n)i=new tt(Object(G.a)(Object(G.a)({},h),{},{particleClass:te,shape:"heart",color:"#ff0000",rotateAngle:180,trailStrength:5,particleCount:150}));else{i=new Qt(Object(G.a)(Object(G.a)({},h),{},{charCode:n}));for(var c=0;c<5;c++)a.particles.push(new te({x:i.x,y:i.y,width:o,height:s,radius:2,color:i.color,life:150,velocity:{x:F.random(-1,1),y:F.random(-1,1)},accelerate:{x:1,y:F.random(-.1,.1)}}))}a.explosions.push(i),X.fireworkBurst("burst",1)}},{key:"createRockets",value:function(t){for(var e=this.rockets,i=this.effect,a=i.width,n=i.height,r=F.random(3,8),o=Math.random()*n/5,s=t.length>1?.7*a/(t.length-1):0,h=0;h<t.length;h++){var c=new Zt({x:.15*a+h*s,y:n,width:a,height:n,velocity:{x:0,y:r},maxY:o+.3*n+20*h,options:{fireworks:this,charCode:t[h]},onEnd:this.createExplosion});e.push(c)}}},{key:"draw",value:function(){var t=this.effect.ctx,e=this.words,i=this.rockets,a=this.explosions,n=this.particles;0===i.length&&0===a.length&&(this.rockets=[],this.createRockets(e[this.wordsIndex%e.length]),this.wordsIndex++);for(var r=i.length-1;r>=0;r--){var o=i[r];o.update(),o.isLive()?o.draw(t):i.splice(r,1)}for(var s=a.length-1;s>=0;s--){var h=a[s];h.update(),h.isLive()?h.draw(t):a.splice(s,1)}for(var c=n.length-1;c>=0;c--){var l=n[c];l.update(),l.isLive()?l.draw(t):n.splice(c,1)}}},{key:"option",value:function(){var t=this;return[n.a.createElement(n.a.Fragment,null,n.a.createElement("span",null,"Text"),n.a.createElement(Ht.a.TextArea,{placeholder:"Text to firework",ref:function(e){return t.input=e},defaultValue:this.getConfigValue("text")||"fire!",onChange:function(e){return t.changeConfig("text",e.target.value)}}))]}}]),i}(N);var ie=[{rocketSize:1,sparkSize:1,rocketCount:5,sparkCount:1,colors:["#FF0000"],x0:.1,y0:1},{rocketSize:2,sparkSize:2,rocketCount:5,sparkCount:1,colors:["#33FF33"],x0:.3,y0:1},{rocketSize:3,sparkSize:3,rocketCount:5,sparkCount:5,colors:["#FF0000","#33FF33","#CCFF00","#FF9900","#3399FF","#FF3399","#CC0066","#00FF00"],x0:.5,y0:1},{rocketSize:2,sparkSize:2,rocketCount:5,sparkCount:1,colors:["#CC0066"],x0:.7,y0:1},{rocketSize:1,sparkSize:1,rocketCount:5,sparkCount:1,colors:["#CCFF00"],x0:.9,y0:1}],ae=function(t){Object(p.a)(i,t);var e=Object(g.a)(i);function i(t){var a;return Object(f.a)(this,i),(a=e.call(this,"ba7eef99","Spray",t)).tick=0,a.sparks=[],a.rockets=[],ie.forEach((function(t){for(var e=0;e<t.rocketCount;e++)a.rockets.push(a.createRocket(t))})),a}return Object(d.a)(i,[{key:"createRocket",value:function(t){var e=this.effect,i=e.width,a=e.height;return t.fireworks=this,new Zt({x:t.x0*i,y:t.y0*a,width:i,height:a,color:t.colors[F.randomInt(0,t.colors.length)],velocity:{x:F.random(-2,2),y:F.random(5,20)},options:t,onEnd:this.onRocketEnd})}},{key:"onRocketEnd",value:function(t,e){for(var i=t.x,a=t.y,n=t.color,r=e.fireworks.sparks,o=e.sparkCount,s=e.sparkSize,h=0;h<o;h++)r.push(new te({x:i,y:a,radius:s,color:n,velocity:{x:3*Math.random()-1,y:6*Math.random()-1},accelerate:{x:0,y:.002}}))}},{key:"draw",value:function(t){var e=this,i=this.effect.ctx;this.tick++,this.tick%2e3&&X.fireworkBurst("crackers",2);var a=this.rockets,n=this.sparks;a.forEach((function(t,n){t.update(),t.isLive()?t.draw(i):a[n]=e.createRocket(t.options)}));for(var r=n.length-1;r>=0;r--){var o=n[r];o.update(),o.life<0?n.splice(r,1):o.draw(i)}}}]),i}(N);var ne=function(){function t(e){Object(f.a)(this,t),this.pos={x:e?e.x:0,y:e?e.y:0},this.vel={x:0,y:0},this.shrink=.97,this.size=2,this.resistance=1,this.gravity=0,this.flick=!1,this.alpha=1,this.fade=0,this.color=0}return Object(d.a)(t,[{key:"update",value:function(){this.vel.x*=this.resistance,this.vel.y*=this.resistance,this.vel.y+=this.gravity,this.pos.x+=this.vel.x,this.pos.y+=this.vel.y,this.size*=this.shrink,this.alpha-=this.fade}},{key:"render",value:function(t){if(this.exists()){var e=this.pos,i=e.x,a=e.y,n=this.size/2;t.save();var r=t.createRadialGradient(i,a,.1,i,a,n);r.addColorStop(.1,"rgba(255,255,255,"+this.alpha+")"),r.addColorStop(.8,"hsla("+this.color+", 100%, 50%, "+this.alpha+")"),r.addColorStop(1,"hsla("+this.color+", 100%, 50%, 0.1)"),t.fillStyle=r,t.beginPath(),t.arc(this.pos.x,this.pos.y,this.flick?F.random(0,this.size):this.size,0,2*Math.PI,!0),t.closePath(),t.fill(),t.restore()}}},{key:"exists",value:function(){return this.alpha>=.1&&this.size>=1}}]),t}(),re=function(t){Object(p.a)(i,t);var e=Object(g.a)(i);function i(t,a){var n;return Object(f.a)(this,i),(n=e.call(this,{x:t,y:a})).explosionColor=0,n}return Object(d.a)(i,[{key:"explode",value:function(t){for(var e=10*Math.random()+80,i=0;i<e;i++){var a=new ne(this.pos),n=Math.random()*Math.PI*2,r=15*Math.cos(Math.random()*Math.PI/2);a.vel.x=Math.cos(n)*r,a.vel.y=Math.sin(n)*r,a.size=10,a.gravity=.2,a.resistance=.92,a.shrink=F.random(.93,.98),a.flick=!0,a.color=this.explosionColor,t.push(a)}}},{key:"render",value:function(t){if(this.exists()){var e=this.pos,i=e.x,a=e.y,n=this.size/2;t.save();var r=t.createRadialGradient(i,a,.1,i,a,n);r.addColorStop(.1,"rgba(255, 255, 255 ,"+this.alpha+")"),r.addColorStop(1,"rgba(0, 0, 0, "+this.alpha+")"),t.fillStyle=r,t.beginPath(),t.arc(this.pos.x,this.pos.y,this.flick?F.random(this.size/2,this.size):this.size,0,2*Math.PI,!0),t.closePath(),t.fill(),t.restore()}}}]),i}(ne),oe=function(t){Object(p.a)(i,t);var e=Object(g.a)(i);function i(t){var a;Object(f.a)(this,i),(a=e.call(this,"604bc106","Slow Explod",t)).particles=[],a.rockets=[],a.colorCode=0;var n=Date.now();return a.tick=n,a.updateTick=n,a.launchTick=n,a}return Object(d.a)(i,[{key:"draw",value:function(){var t=this.effect.height,e=Date.now();e-this.launchTick>800&&(this.launch(this.effect.center.x,t),this.launchTick=e),e-this.updateTick>20&&(this.update(),this.updateTick=e)}},{key:"launch",value:function(t,e){var i=this.rockets;if(i.length<10){var a=new re(t,this.effect.height);a.explosionColor=10*Math.floor(360*Math.random()/10),a.vel.y=-3*Math.random()-4,a.vel.x=6*Math.random()-3,a.size=8,a.shrink=.999,a.gravity=.01,i.push(a)}}},{key:"update",value:function(){for(var t=this.effect,e=t.ctx,i=t.height,a=t.center,n=this.rockets,r=this.particles,o=[],s=0;s<n.length;s++){var h=n[s];h.update(),h.render(e);var c=Math.sqrt(Math.pow(a.x-h.pos.x,2)+Math.pow(a.y-h.pos.y,2)),l=h.pos.y<2*i/3&&100*Math.random()<=1;h.pos.y<i/5||h.vel.y>=0||c<50||l?h.explode(r):o.push(h)}this.rockets=o;for(var u=[],f=0;f<r.length;f++){var d=r[f];d.update(),d.exists()&&(d.render(e),u.push(d))}for(this.particles=u;r.length>400;)r.shift()}}]),i}(N);var se=[],he=function(t){Object(p.a)(i,t);var e=Object(g.a)(i);function i(t){var a;Object(f.a)(this,i),a=e.call(this,"b19b6683","Launcher",t);for(var n=0;n<5;n++){for(var r={sparks:[]},o=Math.floor(2*Math.random()),s=Math.floor(2*Math.random()),h=Math.floor(2*Math.random()),c=0;c<50;c++){var l={vx:5*Math.random()+.5,vy:5*Math.random()+.5,weight:.3*Math.random()+.03,red:o,green:s,blue:h};Math.random()>.5&&(l.vx=-l.vx),Math.random()>.5&&(l.vy=-l.vy),r.sparks.push(l)}se.push(r),a.resetFirework(r)}return a}return Object(d.a)(i,[{key:"resetFirework",value:function(t){var e=this.effect,i=e.width,a=e.height;t.x=Math.floor(Math.random()*i),t.y=a,t.age=0,t.phase="fly",X.fireworkBurst("rocket",1)}},{key:"draw",value:function(){var t=this,e=this.effect.ctx;se.forEach((function(i,a){if("explode"===i.phase)i.sparks.forEach((function(t){for(var a=0;a<10;a++){var n=i.age+a,r=i.x+t.vx*n,o=i.y+t.vy*n+t.weight*n*t.weight*n,s=20*a-2*i.age,h=Math.floor(t.red*s),c=Math.floor(t.green*s),l=Math.floor(t.blue*s);e.beginPath(),e.fillStyle="rgba("+h+","+c+","+l+",1)",e.rect(r,o,4,4),e.fill()}})),i.age++,i.age>100&&Math.random()<.05&&t.resetFirework(i);else{i.y=i.y-10;for(var n=0;n<15;n++)e.beginPath(),e.fillStyle="rgba("+50*a+","+17*n+",0,1)",e.rect(i.x+Math.random()*n-n/2,i.y+4*n,4,4),e.fill();(Math.random()<.001||i.y<200)&&(i.phase="explode",X.fireworkBurst("burst",2,i.x,i.y))}}))}}]),i}(N);var ce=function t(e,i,a,n,r){Object(f.a)(this,t),this.x=e,this.y=i,this.vx=a,this.vy=n,this.age=r},le=function(t){Object(p.a)(i,t);var e=Object(g.a)(i);function i(t){var a;return Object(f.a)(this,i),(a=e.call(this,"1aa742dd","Emit",t)).t0=Date.now(),a.positions=[],a.particles=[],a.particles_i=0,a.tick=0,a}return Object(d.a)(i,[{key:"postInit",value:function(){var t=this.effect,e=t.width,i=t.height;this.positions=[],this.positions.push({x:F.randomInt(2*e/5,4*e/5),y:F.randomInt(2*i/5,4*i/5)})}},{key:"draw",value:function(){var t=this,e=this.positions,i=this.particles,a=this.effect,n=a.ctx,r=a.canvas;this.tick++,this.tick%200&&X.fireworkBurst("crackleSmall",1);var o=Date.now(),s=(o-this.t0)/1e3;this.t0=o;var h=r.width,c=r.height;e.forEach((function(e){return t.emitParticles(e.x,e.y)})),n.fillStyle="rgba(0, 0, 0, 0.4)",n.fillRect(0,0,h,c);for(var l=n.getImageData(0,0,h,c),u=l.data,f=i.length-1;f>=0;f--){var d=i[f];if(d.age+=s,d.age>5)i.splice(f,1);else{d.vx*=.999,d.x+=d.vx*s,d.vy=.999*(d.vy+10*s),d.y+=d.vy*s;var v=~~d.x,p=~~d.y;if(v<0||v>=h||p<0||p>=c)i.splice(f,1);else{var g=4*(v+p*h);u[g]+=120,u[g+1]+=55,u[g+2]+=10,u[g+3]=255}}}n.putImageData(l,0,0)}},{key:"fuzzy",value:function(t,e){return(e||0)+(Math.random()-.5)*t*2}},{key:"emitParticles",value:function(t,e){var i=this.particles;if(!(i.length>=2e4))for(var a=0;a<250;a++){var n=this.fuzzy(Math.PI),r=F.randomInt(0,100),o=new ce(t,e,Math.cos(n)*r,Math.sin(n)*r,Math.random());this.particles_i=(this.particles_i+1)%2e4,i.length<2e4?i.push(o):i[this.particles_i]=o}}},{key:"createParticle",value:function(t,e){var i=this.fuzzy(Math.PI),a=F.randomInt(0,100);return new ce(t,e,Math.cos(i)*a,Math.sin(i)*a,Math.random())}}]),i}(N);var ue=function(){function t(e,i,a,n){Object(f.a)(this,t),this.x=i,this.y=a,this.coordLast=[{x:i,y:a},{x:i,y:a},{x:i,y:a}],this.angle=F.randomInt(0,360),this.speed=F.random(e.partSpeed-e.partSpeedVariance<=0?1:e.partSpeed-e.partSpeedVariance,e.partSpeed+e.partSpeedVariance),this.friction=1-e.partFriction/100,this.gravity=e.partGravity/2,this.hue=F.randomInt(n-e.hueVariance,n+e.hueVariance),this.brightness=F.randomInt(50,80),this.alpha=F.randomInt(40,100)/100,this.decay=F.random(10,50)/1e3,this.wind=(F.random(0,e.partWind)-e.partWind/2)/25,this.lineWidth=e.lineWidth}return Object(d.a)(t,[{key:"update",value:function(t){var e=this.angle*Math.PI/180,i=Math.cos(e)*this.speed,a=Math.sin(e)*this.speed+this.gravity;return this.speed*=this.friction,this.coordLast[2].x=this.coordLast[1].x,this.coordLast[2].y=this.coordLast[1].y,this.coordLast[1].x=this.coordLast[0].x,this.coordLast[1].y=this.coordLast[0].y,this.coordLast[0].x=this.x,this.coordLast[0].y=this.y,this.x+=i*t,this.y+=a*t,this.angle+=this.wind,this.alpha-=this.decay,!(this.alpha<.05)}},{key:"draw",value:function(t){var e=F.randomInt(1,3)-1;if(t.beginPath(),t.moveTo(Math.round(this.coordLast[e].x),Math.round(this.coordLast[e].y)),t.lineTo(Math.round(this.x),Math.round(this.y)),t.closePath(),t.strokeStyle="hsla("+this.hue+", 100%, "+this.brightness+"%, "+this.alpha+")",t.stroke(),this.flickerDensity>0){var i=50-this.flickerDensity;if(F.random(0,i)===i){t.beginPath(),t.arc(Math.round(this.x),Math.round(this.y),F.random(this.lineWidth,this.lineWidth+3)/2,0,2*Math.PI,!1),t.closePath();var a=F.randomInt(50,100)/100;t.fillStyle="hsla("+this.hue+", 100%, "+this.brightness+"%, "+a+")",t.fill()}}}}]),t}(),fe=function(){function t(e,i,a,n,r){Object(f.a)(this,t),this.preset=e,this.x=i,this.y=a,this.startX=i,this.startY=a,this.hitX=!1,this.hitY=!1,this.coordLast=[{x:i,y:a},{x:i,y:a},{x:i,y:a}],this.targetX=n,this.targetY=r,this.speed=e.fworkSpeed,this.angle=Math.atan2(r-a,n-i),this.shockwaveAngle=Math.atan2(r-a,n-i)+Math.PI/180*90,this.acceleration=e.fworkAccel/100,this.hue=F.randomInt(e.hueMin,e.hueMax),this.brightness=F.randomInt(50,80),this.alpha=F.randomInt(50,100)/100,this.lineWidth=e.lineWidth,this.targetRadius=1}return Object(d.a)(t,[{key:"update",value:function(t){var e=Math.cos(this.angle)*this.speed,i=Math.sin(this.angle)*this.speed;return this.speed*=1+this.acceleration,this.coordLast[2].x=this.coordLast[1].x,this.coordLast[2].y=this.coordLast[1].y,this.coordLast[1].x=this.coordLast[0].x,this.coordLast[1].y=this.coordLast[0].y,this.coordLast[0].x=this.x,this.coordLast[0].y=this.y,this.showTarget&&(this.targetRadius<8?this.targetRadius+=.25*t:this.targetRadius=1*t),this.startX>=this.targetX?this.x+e<=this.targetX?(this.x=this.targetX,this.hitX=!0):this.x+=e*t:this.x+e>=this.targetX?(this.x=this.targetX,this.hitX=!0):this.x+=e*t,this.startY>=this.targetY?this.y+i<=this.targetY?(this.y=this.targetY,this.hitY=!0):this.y+=i*t:this.y+i>=this.targetY?(this.y=this.targetY,this.hitY=!0):this.y+=i*t,!this.hitX||!this.hitY||(X.fireworkBurst(this.preset.sound||"burst",1,this.targetX,this.targetY),!1)}},{key:"draw",value:function(t){t.lineWidth=this.lineWidth;var e=F.randomInt(1,3)-1;t.beginPath(),t.moveTo(Math.round(this.coordLast[e].x),Math.round(this.coordLast[e].y)),t.lineTo(Math.round(this.x),Math.round(this.y)),t.closePath(),t.strokeStyle="hsla("+this.hue+", 100%, "+this.brightness+"%, "+this.alpha+")",t.stroke(),this.showTarget&&(t.save(),t.beginPath(),t.arc(Math.round(this.targetX),Math.round(this.targetY),this.targetRadius,0,2*Math.PI,!1),t.closePath(),t.lineWidth=1,t.stroke(),t.restore()),this.showShockwave&&(t.save(),t.translate(Math.round(this.x),Math.round(this.y)),t.rotate(this.shockwaveAngle),t.beginPath(),t.arc(0,0,this.speed/5*1,0,Math.PI,!0),t.strokeStyle="hsla("+this.hue+", 100%, "+this.brightness+"%, "+F.randomInt(25,60)/100+")",t.lineWidth=this.lineWidth,t.stroke(),t.restore())}}]),t}(),de=[{name:"Default",preset:{fworkSpeed:2,fworkAccel:4,showShockwave:!1,showTarget:!0,partCount:30,partSpeed:5,partSpeedVariance:10,partWind:50,partFriction:5,partGravity:1,flickerDensity:20,hueMin:150,hueMax:200,hueVariance:30,lineWidth:1,clearAlpha:25}},{name:"Anti Gravity",preset:{fworkSpeed:4,fworkAccel:10,showShockwave:!0,showTarget:!1,partCount:150,partSpeed:5,partSpeedVariance:10,partWind:10,partFriction:10,partGravity:-10,flickerDensity:30,hueMin:0,hueMax:360,hueVariance:30,lineWidth:1,clearAlpha:50}},{name:"Battle Field",preset:{fworkSpeed:10,fworkAccel:20,showShockwave:!0,showTarget:!0,partCount:200,partSpeed:30,partSpeedVariance:5,partWind:0,partFriction:5,partGravity:0,flickerDensity:0,hueMin:20,hueMax:30,hueVariance:10,lineWidth:1,clearAlpha:40}},{name:"Mega Blast",preset:{fworkSpeed:3,fworkAccel:3,showShockwave:!0,showTarget:!0,partCount:100,partSpeed:50,partSpeedVariance:5,partWind:0,partFriction:0,partGravity:0,flickerDensity:0,hueMin:0,hueMax:360,hueVariance:30,lineWidth:20,clearAlpha:20,sound:"bomb"}},{name:"Nimble",preset:{fworkSpeed:10,fworkAccel:50,showShockwave:!1,showTarget:!1,partCount:120,partSpeed:10,partSpeedVariance:10,partWind:100,partFriction:50,partGravity:0,flickerDensity:20,hueMin:0,hueMax:360,hueVariance:30,lineWidth:1,clearAlpha:80}},{name:"Slow Launch",preset:{fworkSpeed:2,fworkAccel:2,showShockwave:!1,showTarget:!1,partCount:200,partSpeed:10,partSpeedVariance:0,partWind:100,partFriction:0,partGravity:2,flickerDensity:50,hueMin:0,hueMax:360,hueVariance:20,lineWidth:4,clearAlpha:10}},{name:"Perma Trail",preset:{fworkSpeed:4,fworkAccel:10,showShockwave:!1,showTarget:!1,partCount:150,partSpeed:10,partSpeedVariance:10,partWind:100,partFriction:3,partGravity:0,flickerDensity:0,hueMin:0,hueMax:360,hueVariance:20,lineWidth:1,clearAlpha:0}},{name:"Lighning",preset:{fworkSpeed:1,fworkAccel:50,showShockwave:!1,showTarget:!1,partCount:5,partSpeed:100,partSpeedVariance:0,partWind:0,partFriction:0,partGravity:0,flickerDensity:0,hueMin:0,hueMax:360,hueVariance:30,lineWidth:1,clearAlpha:100}}],ve=function(t){Object(p.a)(i,t);var e=Object(g.a)(i);function i(t,a){var n;return Object(f.a)(this,i),(n=e.call(this,"289ba10e",de[a.preset].name,t)).dt=0,n.oldTime=Date.now(),n.particles=[],n.fireworks=[],n.presetIndex=a.preset,n.createFireworks(),n}return Object(d.a)(i,[{key:"postInit",value:function(){var t=de[0],e=this.id,i=this.effect;t.fworkSpeed=i.getConfigValue(e,"fworkSpeed",2),t.fworkAccel=i.getConfigValue(e,"fworkAccel",4),t.partCount=i.getConfigValue(e,"partCount",30),t.partSpeed=i.getConfigValue(e,"partSpeed",5),t.partSpeedVariance=i.getConfigValue(e,"partSpeedVariance",10),t.partWind=i.getConfigValue(e,"partWind",50),t.partFriction=i.getConfigValue(e,"partFriction",5),t.partGravity=i.getConfigValue(e,"partGravity",1),t.flickerDensity=i.getConfigValue(e,"flickerDensity",20),t.hueMin=i.getConfigValue(e,"hueMin",150),t.hueMax=i.getConfigValue(e,"hueMax",200),t.hueVariance=i.getConfigValue(e,"hueVariance",30),t.lineWidth=i.getConfigValue(e,"lineWidth",1),t.clearAlpha=i.getConfigValue(e,"clearAlpha",25)}},{key:"draw",value:function(){var t=this.fireworks,e=this.effect.ctx;e.lineCap="round",e.lineJoin="round",this.updateDelta(),this.updateFireworks(),this.updateParticles(),this.drawFireworks(e),this.drawParticles(e),t.length||this.createFireworks()}},{key:"event",value:function(t,e){var i=this.effect,a=i.width,n=i.height;switch(t){case"event@mouse-down":this.trackMouse=!0;break;case"event@mouse-up":this.trackMouse=!1;break;case"event@mouse-moved":this.center=e,this.trackMouse&&this.fireworks.push(new fe(this.getPreset(),a/2,n,this.center.x,this.center.y))}}},{key:"updateDelta",value:function(){var t=Date.now();this.dt=(t-this.oldTime)/16,this.dt=this.dt>5?5:this.dt,this.oldTime=t}},{key:"getPreset",value:function(){return de[this.presetIndex%de.length].preset}},{key:"createParticles",value:function(t,e,i,a){for(var n=t.partCount;n--;)this.particles.push(new ue(t,e,i,a))}},{key:"updateParticles",value:function(){for(var t=this.particles.length;t--;){this.particles[t].update(this.dt)||this.particles.splice(t,1)}}},{key:"drawParticles",value:function(t){for(var e=this.particles.length;e--;){this.particles[e].draw(t)}}},{key:"createFireworks",value:function(){for(var t=this.effect,e=t.width,i=t.height,a=this.getPreset(),n=0;n<3;n++){var r=F.randomInt(50,e-50),o=i,s=F.randomInt(50,e-50),h=F.randomInt(50,i-50);this.fireworks.push(new fe(a,r,o,s,h))}}},{key:"updateFireworks",value:function(){for(var t=this.fireworks.length;t--;){var e=this.fireworks[t];e.update(this.dt)||(this.fireworks.splice(t,1),this.createParticles(this.getPreset(),e.targetX,e.targetY,e.hue))}}},{key:"drawFireworks",value:function(t){for(var e=this.fireworks.length;e--;){this.fireworks[e].draw(t)}}},{key:"option",value:function(){if(0!==this.presetIndex)return[];var t=this.id,e=this.effect;return[e.renderSliderOption({name:e.getConfigName(t,"fworkSpeed"),title:"Firework Speed",min:1,max:10,step:1,defaultValue:2}),e.renderSliderOption({name:e.getConfigName(t,"fworkAccel"),title:"Firework Accellerator",min:0,max:50,step:1,defaultValue:4}),e.renderSliderOption({name:e.getConfigName(t,"partCount"),title:"Particle Count",min:0,max:500,step:1,defaultValue:30}),e.renderSliderOption({name:e.getConfigName(t,"partSpeed"),title:"Particle Speed",min:1,max:100,step:1,defaultValue:5}),e.renderSliderOption({name:e.getConfigName(t,"partSpeedVariance"),title:"Particle Speed Variance",min:0,max:50,step:1,defaultValue:10}),e.renderSliderOption({name:e.getConfigName(t,"partWind"),title:"Particle Wind",min:0,max:100,step:1,defaultValue:50}),e.renderSliderOption({name:e.getConfigName(t,"partFriction"),title:"Particle Friction",min:0,max:50,step:1,defaultValue:5}),e.renderSliderOption({name:e.getConfigName(t,"partGravity"),title:"Particle Gravity",min:-20,max:20,step:1,defaultValue:1}),e.renderSliderOption({name:e.getConfigName(t,"flickerDensity"),title:"Particle Flicker Density",min:0,max:50,step:1,defaultValue:20}),e.renderSliderOption({name:e.getConfigName(t,"hueMin"),title:"Hue Minimum",min:0,max:360,step:1,defaultValue:150}),e.renderSliderOption({name:e.getConfigName(t,"hueMax"),title:"Hue Maximum",min:0,max:360,step:1,defaultValue:200}),e.renderSliderOption({name:e.getConfigName(t,"hueVariance"),title:"Hue Variance",min:0,max:180,step:1,defaultValue:30}),e.renderSliderOption({name:e.getConfigName(t,"lineWidth"),title:"Line Width",min:1,max:20,step:1,defaultValue:1}),e.renderSliderOption({name:e.getConfigName(t,"clearAlpha"),title:"Clear Alpha",min:0,max:100,step:1,defaultValue:25})]}}]),i}(N);var pe,ge,me=window.innerWidth<=640,ye=window.innerWidth>800,ke=function(){var t=navigator.hardwareConcurrency;return!!t&&t>=(window.innerWidth<=1024?4:8)}(),we=1;var xe={Red:"#ff0043",Green:"#14fc56",Blue:"#1e7fff",Purple:"#e60aff",Gold:"#ffbf36",White:"#ffffff"},be="_INVISIBLE_",Me=2*Math.PI,Ce=.5*Math.PI,Oe={_listeners:new Set,_dispatch:function(t){var e=this;this._listeners.forEach((function(i){return i(e.state,t)}))},state:{paused:!0,soundEnabled:!1,menuOpen:!1,openHelpTopic:null,config:{quality:String(ke?3:2),shell:"Random",size:ye?"3":"2",autoLaunch:!0,finale:!1,skyLighting:"2",hideControls:!1,longExposure:!1,scaleFactor:me?.9:1}},setState:function(t){var e=this.state;this.state=Object.assign({},this.state,t),this._dispatch(e),this.persist()},subscribe:function(t){var e=this;return this._listeners.add(t),function(){return e._listeners.remove(t)}},load:function(){var t=localStorage.getItem("cm_fireworks_data");if(t){var e=JSON.parse(t),i=e.schemaVersion,a=e.data,n=this.state.config;switch(i){case"1.1":n.quality=a.quality,n.size=a.size,n.skyLighting=a.skyLighting;break;case"1.2":n.quality=a.quality,n.size=a.size,n.skyLighting=a.skyLighting,n.scaleFactor=a.scaleFactor;break;default:throw new Error("version switch should be exhaustive")}console.log("Loaded config (schema version ".concat(i,")"))}else if("1"===localStorage.getItem("schemaVersion")){var r;try{var o=localStorage.getItem("configSize");r="string"===typeof o&&JSON.parse(o)}catch(h){return console.log("Recovered from error parsing saved config:"),void console.error(h)}var s=parseInt(r,10);s>=0&&s<=4&&(this.state.config.size=String(s))}},persist:function(){var t=this.state.config;localStorage.setItem("cm_fireworks_data",JSON.stringify({schemaVersion:"1.2",data:{quality:t.quality,size:t.size,skyLighting:t.skyLighting,scaleFactor:t.scaleFactor}}))}};Oe.load();var Se,Ie=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Oe.state;return!t.paused&&!t.menuOpen},je=function(){return Oe.state.config.shell},Ee=function(){return+Oe.state.config.size},Pe=function(){return+Oe.state.config.skyLighting},Le=Object.keys(xe).map((function(t){return xe[t]})),De=[].concat(Object(m.a)(Le),[be]),Fe=(De.reduce((function(t,e,i){return t[e]=i,t}),{}),{});function Re(){return Le[Math.random()*Le.length|0]}function Te(t){var e=t&&t.notSame,i=t&&t.notColor,a=t&&t.limitWhite,n=Re();if(a&&n===xe.White&&Math.random()<.6&&(n=Re()),e)for(;n===Se;)n=Re();else if(i)for(;n===i;)n=Re();return Se=n,n}function ze(){return Math.random()<.5?xe.Gold:xe.White}function Ve(t){return t===xe.White||t===xe.Gold?Te({notColor:t}):ze()}Le.forEach((function(t){Fe[t]={r:parseInt(t.substr(1,2),16),g:parseInt(t.substr(3,2),16),b:parseInt(t.substr(5,2),16)}}));var Ae=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=Math.random()<.25,i=Math.random()<.72,a=i?Te({limitWhite:!0}):[Te(),Te({notSame:!0})],n=i&&Math.random()<.42,r=n&&Ve(a),o=i&&(Math.random()<.2||a===xe.White)?r||Te({notColor:a,limitWhite:!0}):null,s=!n&&a!==xe.White&&Math.random()<.42,h=e?1.1:1.25;return{name:"Crysanthemum",shellSize:t,spreadSize:300+100*t,starLife:900+200*t,starDensity:h,color:a,secondColor:o,glitter:e?"light":"",glitterColor:ze(),pistil:n,pistilColor:r,streamers:s}},Be=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=Ae(t);e.name="Ghost",e.starLife*=1.5;var i=Te({notColor:xe.White});e.streamers=!0;var a=Math.random()<.42;a&&Ve(i);return e.color=be,e.secondColor=i,e.glitter="",e},Ye=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=Te({limitWhite:!0});return{name:"Strobe",shellSize:t,spreadSize:280+92*t,starLife:1100+200*t,starLifeVariation:.4,starDensity:1.1,color:e,glitter:"light",glitterColor:xe.White,strobe:!0,strobeColor:Math.random()<.5?xe.White:null,pistil:Math.random()<.5,pistilColor:Ve(e)}},We=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=Te(),i=Math.random()<.5;return{name:"Palm",shellSize:t,color:e,spreadSize:250+75*t,starDensity:i?.15:.4,starLife:1800+200*t,glitter:i?"thick":"heavy"}},Xe=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=Te(),i=Math.random()<.75;return{name:"Ring",shellSize:t,ring:!0,color:e,spreadSize:300+100*t,starLife:900+200*t,starCount:2.2*Me*(t+1),pistil:i,pistilColor:Ve(e),glitter:i?"":"light",glitterColor:e===xe.Gold?xe.Gold:xe.White,streamers:Math.random()<.3}},Ne=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=Te({limitWhite:!0});return{name:"Crossette",shellSize:t,spreadSize:300+100*t,starLife:750+160*t,starLifeVariation:.4,starDensity:.85,color:e,crossette:!0,pistil:Math.random()<.5,pistilColor:Ve(e)}},qe=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return{name:"Floral",shellSize:t,spreadSize:300+120*t,starDensity:.12,starLife:500+50*t,starLifeVariation:.5,color:Math.random()<.65?"random":Math.random()<.15?Te():[Te(),Te({notSame:!0})],floral:!0}},_e=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return{name:"Falling Leaves",shellSize:t,color:be,spreadSize:300+120*t,starDensity:.12,starLife:500+50*t,starLifeVariation:.5,glitter:"medium",glitterColor:xe.Gold,fallingLeaves:!0}},Ge=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return{name:"Willow",shellSize:t,spreadSize:300+100*t,starDensity:.6,starLife:3e3+300*t,glitter:"willow",glitterColor:xe.Gold,color:be}},Ue=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=Math.random()<.75?xe.Gold:Te();return{name:"Crackle",shellSize:t,spreadSize:380+75*t,starDensity:1,starLife:600+100*t,starLifeVariation:.32,glitter:"light",glitterColor:xe.Gold,color:e,crackle:!0,pistil:Math.random()<.65,pistilColor:Ve(e)}},He=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=Te();return{name:"Horsetail",shellSize:t,horsetail:!0,color:e,spreadSize:250+38*t,starDensity:.9,starLife:2500+300*t,glitter:"medium",glitterColor:Math.random()<.5?ze():e,strobe:e===xe.White}};function Je(){return Math.random()<.5?"Crysanthemum":ei[Math.random()*(ei.length-1)+1|0]}function Ke(t){return ti[Je()](t)}function $e(t){return ti[je()](t)}var Qe=["Falling Leaves","Floral","Willow"];function Ze(){var t="Random"===je(),e=t?Je():je();if(t)for(;Qe.includes(e);)e=Je();return ti[e]}var ti={Random:Ke,Crackle:Ue,Crossette:Ne,Crysanthemum:Ae,"Falling Leaves":_e,Floral:qe,Ghost:Be,"Horse Tail":He,Palm:We,Ring:Xe,Strobe:Ye,Willow:Ge},ei=Object.keys(ti);function ii(){!function(t){var e,i=Oe.state.paused;i!==(e="boolean"===typeof t?t:!i)&&Oe.setState({paused:e})}(!1)}function ai(t){return.64*t+.18}function ni(t){return.75*t}function ri(){var t=Ee(),e=Math.min(2.5,t),i=Math.random()*e,a=t-i,n=0===e?Math.random():1-i/e,r=Math.random()*(1-.65*n)*.5;return{size:a,x:ai(Math.random()<.5?.5-r:.5+r),height:ni(n)}}function oi(){var t=ri(),e=new Ci($e(t.size));e.launch(t.x,t.height);var i=e.starLife;return e.fallingLeaves&&(i=4600),900+600*Math.random()+i}function si(){var t=ri(),e=ri(),i=new Ci($e(t.size)),a=new Ci($e(e.size)),n=.2*Math.random()-.1,r=.2*Math.random()-.1;i.launch(.3+n,t.height),setTimeout((function(){a.launch(.7+r,e.height)}),100);var o=Math.max(i.starLife,a.starLife);return(i.fallingLeaves||a.fallingLeaves)&&(o=4600),900+600*Math.random()+o}function hi(){var t=Ze(),e=Ee(),i=Math.max(0,e-1.25),a=.08*Math.random()-.04;new Ci(t(e)).launch(.5+a,.7);var n=1e3+400*Math.random(),r=1e3+400*Math.random();return setTimeout((function(){var e=.08*Math.random()-.04;new Ci(t(i)).launch(.2+e,.1)}),n),setTimeout((function(){var e=.08*Math.random()-.04;new Ci(t(i)).launch(.8+e,.1)}),r),4e3}function ci(){var t=ye?7:4,e=Ee(),i=Math.max(0,e-3),a=Math.random()<.78?Ae:Xe,n=Ke;function r(t,r){var o="Random"===je()?r?n:a:ti[je()],s=t<=.5?t/.5:(1-t)/.5;new Ci(o(r?e:i)).launch(t,r?.75:.42*s)}for(var o=0,s=0;o<=t;)o===t?setTimeout((function(){r(.5,!0)}),s):function(){var e=o/t*.5,i=30*Math.random()+30;setTimeout((function(){r(e,!1)}),s),setTimeout((function(){r(1-e,!1)}),s+i)}(),o++,s+=200;return 3400+250*t}function li(){li.lastCalled=Date.now();var t=ye?11:5,e=ye?3:1,i=Math.max(0,Ee()-2),a=Math.random()<.78?Ae:Xe,n=Ze();function r(t,e){var r="Random"===je()?e?n:a:ti[je()],o=new Ci(r(i)),s=(Math.cos(5*t*Math.PI+Ce)+1)/2;o.launch(t,.75*s)}for(var o=0,s=0;o<t;)0===o?(r(.5,!1),o+=1):function(){var i=(o+1)/t/2,a=30*Math.random()+30,n=o===e;setTimeout((function(){r(.5+i,n)}),s),setTimeout((function(){r(.5-i,n)}),s+a),o+=2}(),s+=200;return 3400+120*t}li.cooldown=15e3,li.lastCalled=Date.now();var ui=!0,fi=0;function di(t){if(ui)return ui=!1,new Ci(t.shellType(Ee())||Ae(Ee())).launch(.5,.5),2400;if(Oe.state.config.finale)return function(t){var e=Ze(),i=ri(),a=new Ci(t.shellType(i.size)||e(i.size));a.launch(i.x,i.height);var n=a.starLife;Math.random()}(t),fi<32?(fi++,170):(fi=0,6e3);var e=Math.random();return e<.08&&Date.now()-li.lastCalled>li.cooldown?li():e<.1?ci():e<.6?oi():e<.8?si():e<1?hi():void 0}var vi=0,pi=0,gi=0;function mi(t,e,i){if(Ie()){var a=e*we,n=we*i;!function(t,e,i){vi++,(pi-=i/30)<0&&(pi=0),Oe.state.config.autoLaunch&&(gi-=e)<=0&&(gi=1.25*di(t))}(t,a,i);var r=1-(1-Ii.airDrag)*n,o=1-(1-Ii.airDragHeavy)*n,s=1-(1-ji.airDrag)*n,h=a/1e3*.9;De.forEach((function(t){for(var e=Ii.active[t],i=e.length-1;i>=0;i-=1){var c=e[i];if(c.updateFrame!==vi)if(c.updateFrame=vi,c.life-=a,c.life<=0)e.splice(i,1),Ii.returnInstance(c);else{var l=Math.pow(c.life/c.fullLife,.5),u=1-l;if(c.prevX=c.x,c.prevY=c.y,c.x+=c.speedX*n,c.y+=c.speedY*n,c.heavy?(c.speedX*=o,c.speedY*=o):(c.speedX*=r,c.speedY*=r),c.speedY+=h,c.spinRadius&&(c.spinAngle+=c.spinSpeed*n,c.x+=Math.sin(c.spinAngle)*c.spinRadius*n,c.y+=Math.cos(c.spinAngle)*c.spinRadius*n),c.sparkFreq)for(c.sparkTimer-=a;c.sparkTimer<0;)c.sparkTimer+=.75*c.sparkFreq+c.sparkFreq*u*4,ji.add(c.x,c.y,c.sparkColor,Math.random()*Me,Math.random()*c.sparkSpeed*l,.8*c.sparkLife+Math.random()*c.sparkLifeVariation*c.sparkLife);c.life<c.transitionTime&&(c.secondColor&&!c.colorChanged&&(c.colorChanged=!0,c.color=c.secondColor,e.splice(i,1),Ii.active[c.secondColor].push(c),c.secondColor===be&&(c.sparkFreq=0)),c.strobe&&(c.visible=Math.floor(c.life/c.strobeFreq)%3===0))}}for(var f=ji.active[t],d=f.length-1;d>=0;d-=1){var v=f[d];v.life-=a,v.life<=0?(f.splice(d,1),ji.returnInstance(v)):(v.prevX=v.x,v.prevY=v.y,v.x+=v.speedX*n,v.y+=v.speedY*n,v.speedX*=s,v.speedY*=s,v.speedY+=h)}})),function(t,e){var i=t.width,a=t.height,n=t.mainCtx,r=t.trailsCtx;0!==Pe()&&function(t){var e=15*Pe(),i=0;ki.r=0,ki.g=0,ki.b=0,Le.forEach((function(t){var e=Fe[t],a=Ii.active[t].length;i+=a,ki.r+=e.r*a,ki.g+=e.g*a,ki.b+=e.b*a}));var a=Math.pow(Math.min(1,i/500),.3),n=Math.max(1,ki.r,ki.g,ki.b);ki.r=ki.r/n*e*a,ki.g=ki.g/n*e*a,ki.b=ki.b/n*e*a;yi.r+=(ki.r-yi.r)/10*t,yi.g+=(ki.g-yi.g)/10*t,yi.b+=(ki.b-yi.b)/10*t}(e);for(;Oi.active.length;){var o=Oi.active.pop(),s=r.createRadialGradient(o.x,o.y,0,o.x,o.y,o.radius);s.addColorStop(.024,"rgba(255, 255, 255, 1)"),s.addColorStop(.125,"rgba(255, 160, 20, 0.2)"),s.addColorStop(.32,"rgba(255, 140, 20, 0.11)"),s.addColorStop(1,"rgba(255, 120, 20, 0)"),r.fillStyle=s,r.fillRect(o.x-o.radius,o.y-o.radius,2*o.radius,2*o.radius),Oi.returnInstance(o)}if(n.strokeStyle="#fff",r.lineCap="round",n.beginPath(),Le.forEach((function(t){var e=Ii.active[t];r.strokeStyle=t,r.beginPath(),e.forEach((function(t){t.visible&&(r.lineWidth=Ii.drawWidth,r.moveTo(t.x,t.y),r.lineTo(t.prevX,t.prevY),n.lineWidth=1,n.moveTo(t.x,t.y),n.lineTo(t.x-1.6*t.speedX,t.y-1.6*t.speedY))})),r.stroke()})),n.stroke(),r.lineWidth=ji.drawWidth,r.lineCap="butt",Le.forEach((function(t){var e=ji.active[t];r.strokeStyle=t,r.beginPath(),e.forEach((function(t){r.moveTo(t.x,t.y),r.lineTo(t.prevX,t.prevY)})),r.stroke()})),pi){n.globalAlpha=pi,n.fillStyle=xe.Blue,n.fillRect(0,a-6,i*we,6),n.globalAlpha=1}}(t,n)}}var yi={r:0,g:0,b:0},ki={r:0,g:0,b:0};function wi(t,e,i,a,n){var r=e/i,o=t+e-.5*r;if(o>t)for(var s=t;s<o;s+=r)n(s+Math.random()*r*a);else for(var h=t;h>o;h+=r)n(h+Math.random()*r*a)}function xi(t,e){for(var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Me,n=.5*Math.sqrt(t/Math.PI),r=2*n*Math.PI,o=r/2,s=0;s<=o;s++)for(var h=s/o*Ce,c=Math.cos(h),l=r*c,u=l*(a/Me),f=Me/l,d=Math.random()*f+i,v=.33*f,p=0;p<u;p++){var g=Math.random()*v,m=f*p+d+g;e(m,c)}}function bi(t){xi(18,(function(e,i){Ii.add(t.x,t.y,t.color,e,2.4*i,1e3+300*Math.random(),t.speedX,t.speedY)})),Oi.add(t.x,t.y,46),X.fireworkBurst("burstSmall",1,t.x,t.y)}function Mi(t){xi(7,(function(e,i){var a=Ii.add(t.x,t.y,be,e,2.4*i,2400+600*Math.random(),t.speedX,t.speedY);a.sparkColor=xe.Gold,a.sparkFreq=144,a.sparkSpeed=.28,a.sparkLife=750,a.sparkLifeVariation=3.2})),Oi.add(t.x,t.y,46),X.fireworkBurst("burstSmall",1,t.x,t.y)}var Ci=function(){function t(e){if(Object(f.a)(this,t),Object.assign(this,e),this.starLifeVariation=e.starLifeVariation||.125,this.color=e.color||Te(),this.glitterColor=e.glitterColor||this.color,!this.starCount){var i=e.starDensity||1,a=this.spreadSize/54;this.starCount=Math.max(6,a*a*i)}}return Object(d.a)(t,[{key:"launch",value:function(t,e){var i=this,a=ge-.45*ge,n=t*(pe-120)+60,r=ge,o=r-(a-e*(a-50)),s=Math.pow(.04*o,.64),h=this.comet=Ii.add(n,r,"string"===typeof this.color&&"random"!==this.color?this.color:xe.White,Math.PI,s*(this.horsetail?1.2:1),s*(this.horsetail?100:400));h.heavy=!0,h.spinRadius=F.random(.32,.85),h.sparkFreq=32,h.sparkLife=320,h.sparkLifeVariation=3,("willow"===this.glitter||this.fallingLeaves)&&(h.sparkFreq=20,h.sparkSpeed=.5,h.sparkLife=500),this.color===be&&(h.sparkColor=xe.Gold),Math.random()>.4&&!this.horsetail&&(h.secondColor=be,h.transitionTime=700*Math.pow(Math.random(),1.5)+500),h.onDeath=function(t){return i.burst(t.x,t.y)},X.fireworkBurst("lift",1)}},{key:"burst",value:function(e,i){var a,n,r,o,s,h=this,c=this.spreadSize/96,l=.25,u=!1;this.crossette&&(n=function(t){u||(X.fireworkBurst("crackleSmall",1,e,i),u=!0),function(t){wi(Math.random()*Ce,Me,4,.5,(function(e){Ii.add(t.x,t.y,t.color,e,.6*Math.random()+.75,600)}))}(t)}),this.crackle&&(n=function(t){u||(X.fireworkBurst("crackle",1,e,i),u=!0),function(t){wi(0,Me,16,1.8,(function(e){ji.add(t.x,t.y,xe.Gold,e,2.4*Math.pow(Math.random(),.45),300+200*Math.random())}))}(t)}),this.floral&&(n=bi),this.fallingLeaves&&(n=Mi),"light"===this.glitter?(r=400,o=.3,s=300,l=2):"medium"===this.glitter?(r=200,o=.44,s=700,l=2):"heavy"===this.glitter?(r=80,o=.8,s=1400,l=2):"thick"===this.glitter?(r=16,o=1.5,s=1400,l=3):"streamer"===this.glitter?(r=32,o=1.05,s=620,l=2):"willow"===this.glitter&&(r=120,o=.34,s=1400,l=3.8),r/=1;var f=function(t,u){var f=h.spreadSize/1800,d=Ii.add(e,i,a||Te(),t,u*c,h.starLife+Math.random()*h.starLife*h.starLifeVariation,h.horsetail?h.comet&&h.comet.speedX:0,h.horsetail?h.comet&&h.comet.speedY:-f);h.secondColor&&(d.transitionTime=h.starLife*(.05*Math.random()+.32),d.secondColor=h.secondColor),h.strobe&&(d.transitionTime=h.starLife*(.08*Math.random()+.46),d.strobe=!0,d.strobeFreq=20*Math.random()+40,h.strobeColor&&(d.secondColor=h.strobeColor)),d.onDeath=n,h.glitter&&(d.sparkFreq=r,d.sparkSpeed=o,d.sparkLife=s,d.sparkLifeVariation=l,d.sparkColor=h.glitterColor,d.sparkTimer=Math.random()*d.sparkFreq)};if("string"===typeof this.color)if(a="random"===this.color?null:this.color,this.ring){var d=Math.random()*Math.PI,v=.85*Math.pow(Math.random(),2)+.15;wi(0,Me,this.starCount,0,(function(t){var n=Math.sin(t)*c*v,u=Math.cos(t)*c,f=F.pointDist(0,0,n,u),p=F.pointAngle(0,0,n,u)+d,g=Ii.add(e,i,a,p,f,h.starLife+Math.random()*h.starLife*h.starLifeVariation);h.glitter&&(g.sparkFreq=r,g.sparkSpeed=o,g.sparkLife=s,g.sparkLifeVariation=l,g.sparkColor=h.glitterColor,g.sparkTimer=Math.random()*g.sparkFreq)}))}else xi(this.starCount,f);else{if(!Array.isArray(this.color))throw new Error("Invalid shell color. Expected string or array of strings, but got: "+this.color);if(Math.random()<.5){var p=Math.random()*Math.PI,g=p+Math.PI,m=Math.PI;a=this.color[0],xi(this.starCount,f,p,m),a=this.color[1],xi(this.starCount,f,g,m)}else a=this.color[0],xi(this.starCount/2,f),a=this.color[1],xi(this.starCount/2,f)}this.pistil&&new t({spreadSize:.5*this.spreadSize,starLife:.6*this.starLife,starLifeVariation:this.starLifeVariation,starDensity:1.4,color:this.pistilColor,glitter:"light",glitterColor:this.pistilColor===xe.Gold?xe.Gold:xe.White}).burst(e,i);this.streamers&&new t({spreadSize:.9*this.spreadSize,starLife:.8*this.starLife,starLifeVariation:this.starLifeVariation,starCount:Math.floor(Math.max(6,this.spreadSize/45)),color:xe.White,glitter:"streamer"}).burst(e,i);if(Oi.add(e,i,this.spreadSize/4),this.comet){var y=.3*(1-Math.min(2,Ee()-this.shellSize)/2)+.7;X.fireworkBurst("burst",y,e,i)}}}]),t}(),Oi={active:[],_pool:[],_new:function(){return{}},add:function(t,e,i){var a=this._pool.pop()||this._new();return a.x=t,a.y=e,a.radius=i,this.active.push(a),a},returnInstance:function(t){this._pool.push(t)}};function Si(){var t={};return De.forEach((function(e){t[e]=[]})),t}var Ii={drawWidth:3,airDrag:.98,airDragHeavy:.992,active:Si(),_pool:[],_new:function(){return{}},add:function(t,e,i,a,n,r,o,s){var h=this._pool.pop()||this._new();return h.visible=!0,h.heavy=!1,h.x=t,h.y=e,h.prevX=t,h.prevY=e,h.color=i,h.speedX=Math.sin(a)*n+(o||0),h.speedY=Math.cos(a)*n+(s||0),h.life=r,h.fullLife=r,h.spinAngle=Math.random()*Me,h.spinSpeed=.8,h.spinRadius=0,h.sparkFreq=0,h.sparkSpeed=1,h.sparkTimer=0,h.sparkColor=i,h.sparkLife=750,h.sparkLifeVariation=.25,h.strobe=!1,this.active[i].push(h),h},returnInstance:function(t){t.onDeath&&t.onDeath(t),t.onDeath=null,t.secondColor=null,t.transitionTime=0,t.colorChanged=!1,this._pool.push(t)}},ji={drawWidth:0,airDrag:.9,active:Si(),_pool:[],_new:function(){return{}},add:function(t,e,i,a,n,r){var o=this._pool.pop()||this._new();return o.x=t,o.y=e,o.prevX=t,o.prevY=e,o.color=i,o.speedX=Math.sin(a)*n,o.speedY=Math.cos(a)*n,o.life=r,this.active[i].push(o),o},returnInstance:function(t){this._pool.push(t)}},Ei=function(t){Object(p.a)(i,t);var e=Object(g.a)(i);function i(t,a,n){var r;return Object(f.a)(this,i),(r=e.call(this,"547846ad",a,t)).effect=t,r.shellName=a,r.shellType=n,r.fireworks=Object.keys(ti),r.postInit(),ii(),r}return Object(d.a)(i,[{key:"postInit",value:function(){var t=this.effect,e=t.width,i=t.height,a=t.ctx;pe=e,ge=i,this.context={dpr:window.devicePixelRatio||1,width:e,height:i,mainCtx:a,trailsCtx:a},Oe.state.config.shell=this.shellName,Oe.state.config.hideControls=!0,Oe.state.config.size=this.getConfigValue("shellSize",3),this.lag=this.getConfigValue("lag",5),we=this.getConfigValue("speed",.2),this.timeStep=1,this.context.shellType=this.shellType}},{key:"draw",value:function(){this.timeStep=(this.timeStep+1)%900,mi(this.context,this.timeStep,this.lag)}},{key:"option",value:function(){var t=this,e=this.effect;return[e.renderSelectOption(this.getConfigName("shellType"),"Shell Type",ei,this.getConfigValue("shellType")||0),e.renderSliderOption({name:this.getConfigName("shellSize"),title:"Shell Size",minLabel:"small",maxLabel:"large",min:1,max:10,step:1,defaultValue:3}),e.renderSliderOption({name:this.getConfigName("lag"),title:"View Distance",minLabel:"far",maxLabel:"near",min:1,max:20,step:1,defaultValue:10}),e.renderSliderOption({name:this.getConfigName("speed"),title:"Speed",minLabel:"slow",maxLabel:"fast",min:.1,max:1,step:.1,defaultValue:.2}),n.a.createElement(B.a,{type:"primary",onClick:function(e){t.changeConfig("lag",10),t.changeConfig("speed",.2),t.changeConfig("shellSize",3),t.changeConfig("shellType",0)}},"Restore Default")]}}]),i}(N);var Pi=function(t){Object(p.a)(i,t);var e=Object(g.a)(i);function i(t){var a;Object(f.a)(this,i),(a=e.call(this,t)).strategy=t.strategy||1,a.particleCount=t.particleCount||F.randomInt(300,400);var n=t.particleSpeed||.3;(n=Math.random()*n+.3)<1&&(n+=.8);for(var r=n,o=Object(v.a)(a).particles,s={x:a.x,y:a.y,width:a.width,height:a.height,radius:a.radius,life:a.life,color:a.color,accelerate:{x:0,y:0}},h=0;h<a.particleCount;h++){var c=Math.random()*n+.1,l=F.randomInt(0,360);s.velocity={x:Math.cos(l)*c,y:Math.sin(l)*c},s.radius=1+Math.random(),o.push(new a.particleClass(s)),r=n>r?n:r}return a}return Object(d.a)(i,[{key:"draw",value:function(t,e,i){t.globalCompositeOperation="source-over",t.fillStyle="rgba(0,0,0,0.03)",t.fillRect(0,0,e,i),this.particles.forEach((function(e){e.draw(t)}))}},{key:"update",value:function(){var t=this.particles,e=this.life<this.wholeLife/2&&0!==(2&this.strategy);t.forEach((function(i,a){i.update(),i.isLive()||t.splice(a,1),e&&(i.velocity={x:0,y:0},i.accelerate={x:0,y:0})}))}},{key:"isLive",value:function(){return this.particles.length>0}}]),i}(Z),Li=function(t){Object(p.a)(i,t);var e=Object(g.a)(i);function i(t){return Object(f.a)(this,i),e.call(this,Object(G.a)(Object(G.a)({},t),{},{particleClass:t.particleClass||te,life:200,particleSpeed:3,strategy:2}))}return i}(Pi),Di=function(t){Object(p.a)(i,t);var e=Object(g.a)(i);function i(t){var a;return Object(f.a)(this,i),(a=e.call(this,"4f464923","Baby's Breath",t)).explosions=[],a}return Object(d.a)(i,[{key:"draw",value:function(){var t,e=this.explosions,i=this.effect,a=i.ctx,n=i.width,r=i.height;Math.random()<.015&&(t=Math.random()>.8?new Li({particleClass:te,width:n,height:r}):new Pi({particleClass:Math.random()>.8?et:te,width:n,height:r}),this.explosions.push(t),X.fireworkBurst("burst",2,t.x,t.y));e.forEach((function(t){return t.update()})),e.forEach((function(t,i){t.isLive()?t.draw(a,n,r):e.splice(i,1)}))}}]),i}(N);var Fi=[1,2,3,4,5],Ri=function(t){Object(p.a)(i,t);var e=Object(g.a)(i);function i(t){var a;return Object(f.a)(this,i),(a=e.call(this,"4d49047a","Fountain",t)).reset(),a}return Object(d.a)(i,[{key:"reset",value:function(){this.tick=0,this.sparks=[],this.rockets=[],this.indices=[];for(var t=0;t<60;t++)this.indices.push(t)}},{key:"onRocketEnd",value:function(t,e){for(var i=e.sparkCount,a=e.sparkSize,n=e.fireworks,r=n.sparks,o=n.effect,s=o.width,h=o.height,c=0;c<i;c++)r.push(new te({x:t.x,y:t.y,width:s,height:h,radius:a,color:e.color,velocity:{x:F.random(-1,1),y:F.random(-1,1)},accelerate:{x:0,y:.002}}));X.fireworkBurst("burst",1)}},{key:"createRockets",value:function(t){var e=this.rockets;if(!(e.length>=60)){0===e.length&&(this.launchPattern=Fi[F.randomInt(0,Fi.length)],this.rocketColors=[$(),$()]),t%=120;for(var i,a,n=this.effect,r=n.width,o=n.height,s=this.rocketColors[0],h=e.length,c=0;c<.5;c++){var l=h+c;switch(this.launchPattern){case 0:a=1+.2*t,s=$();var u=F.randomInt(0,this.indices.length);l=this.indices[u],this.indices.splice(u,1),i=1-l/60;break;case 2:i=1-l/60,a=1+.2*t;break;case 3:i=t%2===0?.5+l/60/2:.5-l/60/2,a=1+.1*(120-t);break;case 4:i=t%2===0?l/60/2:1-l/60/2,a=1+.1*(120-t);break;case 5:t%2===0?(i=2*l/60,a=1+.2*t):(i=1-2*l/60,a=1+.2*t,s=this.rocketColors[1]),a=1+.1*(120-t);break;case 1:default:i=l/60,a=1+.2*t}var f=F.randomInt(1,3),d={fireworks:this,rocketSize:f,sparkSize:f,rocketCount:1,sparkCount:3,color:s,velocity:{x:0,y:a}},v=new Zt({x:i*r,y:o,width:r,height:o,size:f,color:s,velocity:d.velocity,maxY:F.randomInt(o/10,2*o/3),options:d,onEnd:this.onRocketEnd});this.rockets.push(v)}}}},{key:"draw",value:function(t){var e=this.effect.ctx;this.createRockets(this.tick),this.tick++;var i=this.rockets,a=this.sparks,n=0;i.forEach((function(t,i){t.update(),t.isLive()&&(t.draw(e),n++)}));for(var r=a.length-1;r>=0;r--){var o=a[r];o.update(),o.isLive()?o.draw(e):a.splice(r,1)}i.length>=60&&0===n&&a.length<27&&this.reset()}}]),i}(N);var Ti=[{id:"5eff3b68",name:"Curves",parcileLife:360,curves:[{name:"circle"},{name:"archimedean"},{name:"hyperbolic"},{name:"exp"},{name:"hypotrochoid"},{name:"epicycloid"},{name:"epitrochoid"},{name:"trisectrix"},{name:"trifolium"},{name:"nephroid"},{name:"limacon"},{name:"freeth"},{name:"lissajous"},{name:"cochleoid"},{name:"polar1"},{name:"polar2"}]},{id:"63520d2c",name:"Hearts",color:"#FF0000",particleLife:360,curves:[{name:"cayley"},{name:"heart"},{name:"heart1"},{name:"heart3"},{name:"heart5"},{name:"heart7"},{name:"heart8"},{name:"heart9"},{name:"heart10"}]}],zi=function(t){Object(p.a)(i,t);var e=Object(g.a)(i);function i(t,a){var n;return Object(f.a)(this,i),(n=e.call(this,a.id,a.name,t)).preset=a,n.reset(),n}return Object(d.a)(i,[{key:"reset",value:function(){var t=this.preset,e=t.curves,i=t.color,a=this.effect,n=a.width,r=a.height;this.tick=0,this.sparks=[],this.center={x:F.randomInt(n/5,4*n/5),y:F.randomInt(r/5,4*r/5)},this.color=i||$();var o=e[F.randomInt(0,e.length)];this.curve=H(o.name),this.rotateAngle=F.randomInt(0,360),this.clockwise=F.randomInt(0,2),this.rotateSin=Math.sin(this.rotateAngle),this.rotateCos=Math.cos(this.rotateAngle)}},{key:"getRadius",value:function(t,e){return Math.min(t,e)/5}},{key:"draw",value:function(){var t=this.effect,e=t.ctx,i=t.width,a=t.height;this.tick++;var n=this.sparks,r=this.rotateSin,o=this.rotateCos,s=this.clockwise,h=this.tick;if(h>360)this.reset();else{s&&(h=360-h);var c=F.random(1,3);c*=h<180?.01*h:.01*(360-h);var l=this.curve(h,this.options),u=l.x,f=l.y,d=this.getRadius(i,a),v=this.center.x+d*(u*o-f*r),p=this.center.y+d*(u*r+f*o);n.push(new te({x:v,y:p,width:i,height:a,radius:c,color:this.color,life:this.preset.particleLife,velocity:{x:.1,y:.002},accelerate:{x:0,y:0}}));var g=0;h>45&&(h<90?g=1:h<135?g=2:h<225?g=3:h<270&&(g=2)),h>90&&h<270&&h%45===0&&X.fireworkBurst("crackleSmall",1);for(var m=F.randomInt(0,g),y=0;y<m;y++)n.push(new te({x:v,y:p,width:i,height:a,radius:1,color:this.color,life:25*g,velocity:{x:3*Math.random()-1,y:3*Math.random()-1},accelerate:{x:0,y:.002}}));for(var k=n.length-1;k>=0;k--){var w=n[k];w.update(),w.isLive()?w.draw(e):n.splice(k,1)}}}}]),i}(N);var Vi=function(){function t(e){var i=e.x,a=void 0===i?0:i,n=e.y,r=void 0===n?0:n,o=e.size,s=void 0===o?2:o,h=e.color,c=e.alpha,l=void 0===c?1:c,u=e.resistance,d=void 0===u?1:u,v=e.shrink,p=void 0===v?.97:v,g=e.gravity,m=void 0===g?0:g,y=e.flick,k=void 0!==y&&y,w=e.fade,x=void 0===w?0:w,b=e.velocity,M=void 0===b?{x:0,y:0}:b;Object(f.a)(this,t),this.pos={x:a,y:r},this.size=s,this.color=h,this.alpha=l,this.velocity=M,this.shrink=p,this.resistance=d,this.gravity=m,this.flick=k,this.fade=x}return Object(d.a)(t,[{key:"update",value:function(){var t=this.resistance,e=this.gravity,i=this.shrink,a=this.fade;this.velocity.x*=t,this.velocity.y*=t,this.velocity.y+=e,this.pos.x+=this.velocity.x,this.pos.y+=this.velocity.y,this.size*=i,this.alpha-=a}},{key:"draw",value:function(t){if(this.isLive()){var e=this.pos,i=e.x,a=e.y,n=this.flick,r=this.size,o=this.color,s=this.alpha;t.save(),t.globalCompositeOperation="lighter";var h=t.createRadialGradient(i,a,.1,i,a,r/2);h.addColorStop(.1,"rgba(255,255,255,"+s+")"),h.addColorStop(.8,"hsla("+o+", 100%, 50%, "+s+")"),h.addColorStop(1,"hsla("+o+", 100%, 50%, 0.1)"),t.fillStyle=h,t.beginPath(),t.arc(i,a,n?Math.random()*r:r,0,2*Math.PI,!0),t.closePath(),t.fill(),t.restore()}}},{key:"isLive",value:function(){return this.alpha>=.1&&this.size>=1}}]),t}(),Ai=function(t){Object(p.a)(i,t);var e=Object(g.a)(i);function i(t){var a;Object(f.a)(this,i),(a=e.call(this,t)).particles=[],a.particleCount=t.particleCount||F.randomInt(100,200),a.particleSpeed=t.particleSpeed||F.randomInt(7,15),a.color=F.randomInt(0,256);for(var n=Object(v.a)(a),r=n.x,o=n.y,s=n.particleCount,h=n.particleSpeed,c=n.color,l=0;l<s;l++){var u=Math.random()*Math.PI*2,d=Math.cos(Math.random()*Math.PI/2)*h;a.particles.push(new Vi({x:r,y:o,size:10,gravity:.2,resistance:.92,shrink:.05*Math.random()+.93,velocity:{x:Math.cos(u)*d,y:Math.sin(u)*d},flicK:!0,color:c}))}return a}return Object(d.a)(i,[{key:"draw",value:function(t,e,i){t.globalCompositeOperation="source-over",t.fillStyle="rgba(0,0,0,0.03)",t.fillRect(0,0,e,i),this.particles.forEach((function(e){e.draw(t)}))}},{key:"update",value:function(){this.life--;var t=this.particles;t.forEach((function(e,i){e.update(),e.isLive()||t.splice(i,1)}))}},{key:"isLive",value:function(){return this.life>0&&this.particles.length>0}}]),i}(Z),Bi=function(t){Object(p.a)(i,t);var e=Object(g.a)(i);function i(t){var a;Object(f.a)(this,i);var n={x:(a=e.call(this,t)).x,y:a.y,width:a.width,height:a.height,color:a.color,life:a.life,accelerate:{x:0,y:.5}};a.curve=H("circle"),a.particleSpeed=t.particleSpeed||F.random(3,10),a.particleCount=t.particleCount||F.randomInt(50,100),a.radius=.01;for(var r=Object(v.a)(a),o=r.curve,s=r.particleSpeed,h=r.particleCount,c=h;c--;){var l=c*Math.PI*2/h;n.velocity={x:s*Math.sin(l),y:s*Math.cos(l)+1};var u=new et(n),d=o(360*c/h);u.curvePosition={x:d.x,y:d.y},a.particles.push(u)}return a}return Object(d.a)(i,[{key:"update",value:function(){this.life--;var t=this.x,e=this.y,i=this.radius,a=this.particleSpeed;this.isLive()&&this.particles.forEach((function(a){var n=a.curvePosition;a.update(t+n.x*i,e+n.y*i+.1)})),this.radius+=a}},{key:"draw",value:function(t){this.isLive()&&this.particles.forEach((function(e){return e.draw(t)}))}},{key:"isLive",value:function(){return this.life>0}}]),i}(Z),Yi=function(t){Object(p.a)(i,t);var e=Object(g.a)(i);function i(t){var a;Object(f.a)(this,i),(a=e.call(this,t)).particleCount=t.particleCount||F.randomInt(100,300),a.particleSpeed=t.particleSpeed||F.randomInt(.5,1);var n=Math.random()*a.particleSpeed;n<1&&(n+=.8);for(var r=Object(v.a)(a).particles,o={x:a.x,y:a.y,width:a.width,height:a.height,radius:a.radius,life:a.life,color:a.color,accelerate:{x:0,y:.01},trailDelta:.5},s=0;s<a.particleCount;s++){var h=Math.random()*n+.1,c=F.randomInt(0,360);o.velocity={x:Math.cos(c)*h,y:Math.sin(c)*h+.1},o.radius=1+Math.random(),r.push(new et(o))}return a}return Object(d.a)(i,[{key:"draw",value:function(t,e,i){t.globalCompositeOperation="source-over",t.fillStyle="rgba(0,0,0,0.03)",t.fillRect(0,0,e,i),this.particles.forEach((function(e){e.draw(t)}))}},{key:"update",value:function(){this.life--;var t=this.particles;t.forEach((function(e,i){e.update(),e.isLive()||t.splice(i,1)}))}},{key:"isLive",value:function(){return this.life>0&&this.particles.length>0}}]),i}(Z),Wi=function(t){Object(p.a)(i,t);var e=Object(g.a)(i);function i(t){var a;Object(f.a)(this,i),(a=e.call(this,t)).tick=0,a.sparks=[],a.curve=H(t.curve||"sqrt"),a.particleSpeed=t.particleSpeed||F.randomInt(7,15);var n=Object(v.a)(a),r=n.width,o=n.height;return a.radius=a.getRadius(r,o),a}return Object(d.a)(i,[{key:"update",value:function(){this.life--}},{key:"draw",value:function(t){this.tick+=this.particleSpeed/3;var e=this.width,i=this.height,a=this.radius,n=this.color,r=this.sparks,o=~~this.tick;if(!(o>360)){var s=this.curve(o),h=s.x,c=s.y,l=this.x+a*h,u=this.y+a*c;r.push(new te({x:l,y:u,width:e,height:i,radius:.01*o,color:n,life:100,velocity:{x:.1,y:.002},accelerate:{x:0,y:.05}}));var f=0;o>45&&(o<90?f=1:o<135?f=2:o<225?f=3:o<270&&(f=2));for(var d=F.randomInt(0,f),v=0;v<d;v++)r.push(new te({x:l,y:u,width:e,height:i,radius:1,color:this.color,life:25*f,velocity:{x:3*Math.random()-1,y:3*Math.random()-1+.1},accelerate:{x:0,y:.01}}));for(var p=r.length-1;p>=0;p--){var g=r[p];g.update(),g.isLive()?g.draw(t):r.splice(p,1)}}}},{key:"isLive",value:function(){return this.life>0}},{key:"getRadius",value:function(t,e){return Math.min(t,e)/8}}]),i}(Z),Xi=function(t){Object(p.a)(i,t);var e=Object(g.a)(i);function i(t){var a;Object(f.a)(this,i),(a=e.call(this,t)).particleSpeed=t.particleSpeed||F.randomInt(1,3);var n=Object(v.a)(a),r=n.x,o=n.y,s=n.width,h=n.height,c=n.color;return a.particleProps={x:r,y:o,width:s,height:h,life:50,color:c,accelerate:{x:.1,y:.1}},a}return Object(d.a)(i,[{key:"createParticles",value:function(t){var e=Math.random()*this.particleSpeed;e<1&&(e+=.8);for(var i=0;i<t;i++){var a=e+.1,n=F.randomInt(0,360);this.particleProps.velocity={x:Math.cos(n)*a,y:Math.sin(n)*a},this.particleProps.radius=1+Math.random(),this.particles.push(new te(Object(G.a)({},this.particleProps)))}}},{key:"draw",value:function(t,e,i){t.globalCompositeOperation="source-over",t.fillStyle="rgba(0,0,0,0.03)",t.fillRect(0,0,e,i),this.particles.forEach((function(e){e.draw(t)}))}},{key:"update",value:function(){this.life--,this.createParticles(F.randomInt(5,10));for(var t=this.particles,e=t.length-1;e>=0;e--){var i=t[e];i.update(),i.isLive()||t.splice(e,1)}}},{key:"isLive",value:function(){return this.life>0}}]),i}(Z),Ni=[{name:"lituus",clockwise:!0}],qi=function(t){Object(p.a)(i,t);var e=Object(g.a)(i);function i(t){var a;Object(f.a)(this,i),(a=e.call(this,t)).tick=0,a.particleCount=t.particleCount||F.randomInt(3,7),a.particles=[],a.particleDescriptors=[];for(var n=Object(v.a)(a),r=n.width,o=n.height,s=n.color,h=n.particleCount,c=n.particleDescriptors,l=0;l<h;l++){var u=360/h*l,d=Ni[F.randomInt(0,Ni.length)];c.push({speed:F.random(1,6),curve:H(d.name),clockwise:d.clockwise||!1,size:F.random((r+o)/50,(r+o)/25),radius:1,color:s,angle:u,sin:Math.sin(u),cos:Math.cos(u),trailDelta:5})}return a}return Object(d.a)(i,[{key:"draw",value:function(t,e,i){t.globalCompositeOperation="source-over",t.fillStyle="rgba(0,0,0,0.03)",t.fillRect(0,0,e,i),this.particles.forEach((function(e){e.draw(t)}))}},{key:"update",value:function(){var t=this;this.tick++,this.life--;var e=this.x,i=this.y,a=this.width,n=this.height,r=this.tick;this.particleDescriptors.forEach((function(o){var s=o.speed,h=o.clockwise,c=o.curve,l=o.size,u=o.color,f=o.radius,d=o.sin,v=o.cos,p=c((h?360-r:r)*s);t.particles.push(new et({x:e+l*(p.x*v-p.y*d),y:i+l*(p.x*d+p.y*v),width:a,height:n,radius:f,color:u,life:30,velocity:{x:.1,y:.1},accelerate:{x:0,y:0}}))})),this.particles.forEach((function(t){return t.update()}))}},{key:"isLive",value:function(){return this.life>0&&this.particles.length>0}}]),i}(Z),_i=function(t){Object(p.a)(i,t);var e=Object(g.a)(i);function i(t){var a;Object(f.a)(this,i),(a=e.call(this,t)).particleCount=t.particleCount||F.randomInt(50,150),a.particleSpeed=t.particleSpeed||F.randomInt(.5,1);var n=Math.random()*a.particleSpeed;n<1&&(n+=.8);for(var r=Object(v.a)(a),o=r.particles,s=r.width,h=r.height,c=r.x,l=r.y,u=r.radius,d=r.color,p=r.particleCount,g={x:c,y:l,width:s,height:h,radius:u,life:150,color:d,velocity:{x:0,y:.1},accelerate:{x:0,y:.01}},m=0;m<p;m++)g.radius=1+Math.random(),g.speed=1,g.angle=360*m/p,g.trailLength=20,g.trailDelta=0,o.push(new et(g));return a}return Object(d.a)(i,[{key:"draw",value:function(t,e,i){t.globalCompositeOperation="source-over",t.fillStyle="rgba(0,0,0,0.03)",t.fillRect(0,0,e,i),this.particles.forEach((function(e){e.draw(t)}))}},{key:"update",value:function(){this.life--;var t=this.particles;t.forEach((function(e,i){var a=e.props,n=(a.speed,a.angle);e.props.speed=F.random(1,1.5),e.props.angle=n+F.randomInt(-.5,1.5),e.velocity={x:Math.cos(e.props.angle)*e.props.speed,y:Math.sin(e.props.angle)*e.props.speed},e.update(),e.isLive()||t.splice(i,1)}))}},{key:"isLive",value:function(){return this.life>0&&this.particles.length>0}}]),i}(Z),Gi=[{name:"Pistil",explosion:function(t){Object(p.a)(i,t);var e=Object(g.a)(i);function i(t){var a;Object(f.a)(this,i),a=e.call(this,t);var n=Object(v.a)(a),r=n.x,o=n.y,s=n.width,h=n.height,c=n.color;n.life;a.curve=H("circle"),a.particleSpeed=t.particleSpeed||F.random(2,5),a.particleCount=t.particleCount||F.randomInt(25,50),a.radius=.01;var l=Object(v.a)(a),u=l.curve,d=l.particleSpeed,p=l.particleCount;a.outerParticles=[];for(var g=p;g--;){var m=g*Math.PI*2/p,y=u(360*g/p);a.outerParticles.push(new et({x:r,y:o,width:s,height:h,color:c,life:60,velocity:{x:d*Math.sin(m),y:d*Math.cos(m)+1},accelerate:{x:0,y:.5},curvePosition:{x:y.x,y:y.y},trailLength:30,trailDelta:3}))}a.innerParticles=[];for(var k=F.randomInt(200,300),w=0;w<k;w++){var x=Math.random()*d/2,b=F.randomInt(0,360);a.innerParticles.push(new te({x:r,y:o,width:s,height:h,radius:1+Math.random(),life:60,color:"#ffffff",velocity:{x:Math.cos(b)*x,y:Math.sin(b)*x},accelerate:{x:0,y:0}}))}return a}return Object(d.a)(i,[{key:"update",value:function(){this.life--;var t=this.x,e=this.y,i=this.radius,a=this.particleSpeed;this.isLive()&&(this.outerParticles.forEach((function(a){var n=a.props.curvePosition;a.update(t+n.x*i,e+n.y*i+.1)})),this.innerParticles.forEach((function(t){t.update()}))),this.radius+=a}},{key:"draw",value:function(t){this.isLive()&&(this.outerParticles.forEach((function(e){return e.draw(t)})),this.innerParticles.forEach((function(e){return e.draw(t)})))}},{key:"isLive",value:function(){return this.life>0}}]),i}(Z)},{name:"Bees",explosion:qi},{name:"Fish",explosion:_i},{name:"Star",explosion:Xi},{name:"Brocade",explosion:Ai},{name:"Peony",explosion:Bi},{name:"Chrysanthemum",explosion:Yi},{name:"Spinner",explosion:Wi}],Ui=function(t){Object(p.a)(i,t);var e=Object(g.a)(i);function i(t,a){var n;return Object(f.a)(this,i),(n=e.call(this,"48fcefc5",a.name,t)).tick=0,n.preset=a,n.rockets=[],n.explosions=[],n.rocketIndex=0,n.createRocket(0),n}return Object(d.a)(i,[{key:"createExplosion",value:function(t,e){var i=e.fireworks,a=e.rocketIndex,n=e.preset,r=i.effect,o=r.width,s=r.height;i.explosions.push(new n.explosion({x:t.x,y:t.y,width:o,height:s,charCode:"astonishing"[a]})),X.fireworkBurst("burst",1)}},{key:"createRocket",value:function(t){var e=this.effect,i=e.width,a=e.height;this.rockets.push(new Zt({x:(1+t)*i/12,y:a,width:i,height:a,color:"#ffffff",size:3,velocity:{x:0,y:10},maxY:t%2===0?a/8:a/4,options:{fireworks:this,rocketIndex:t,preset:this.preset},onEnd:this.createExplosion}))}},{key:"draw",value:function(){var t=this.effect,e=t.ctx,i=t.width,a=t.height;this.tick++,this.tick%30===0&&(this.rocketIndex++,this.rocketIndex>10&&(this.rocketIndex=0),this.createRocket(this.rocketIndex));for(var n=this.rockets,r=this.explosions,o=n.length-1;o>=0;o--){var s=n[o];s.update(),s.isLive()?s.draw(e,i,a):n.splice(o,1)}for(var h=r.length-1;h>=0;h--){var c=r[h];c.update(),c.isLive()?c.draw(e,i,a):r.splice(h,1)}}}]),i}(N);var Hi=function(){function t(){Object(f.a)(this,t),this.presets=[],this.currentPresetIndex=0,this.event=this.event.bind(this)}return Object(d.a)(t,[{key:"getName",value:function(){return"Firework"}},{key:"init",value:function(t,e,i,a){var n;this.width=~~e,this.height=~~i,(this.canvas!==t||a)&&(!function(t,e,i){var a=t.getContext("2d"),n=R(a);t.width=e*n,t.height=i*n,t.style.width=e+"px",t.style.height=i+"px",a.setTransform(n,0,0,n,0,0)}(t,e,i),this.canvas=t,this.ctx=t.getContext("2d"),this.center&&!a||(this.center={x:e/2,y:i/2}),this.ctx.font="15px Consolas",this.ctx.fillStyle="rgba(0, 255, 0, 0.7)"),this.fireworks?a&&this.postInit():(this.fireworks=[].concat(Object(m.a)((n=this,Gi.map((function(t){return new Ui(n,t)})))),Object(m.a)(function(t){return Ti.map((function(e){return new zi(t,e)}))}(this)),Object(m.a)(function(t){return[new Ei(t,"Crackle",Ue),new Ei(t,"Crossette",Ne),new Ei(t,"Crysanthemum",Ae),new Ei(t,"Falling Leaves",_e),new Ei(t,"Floral",qe),new Ei(t,"Horse Tail",He),new Ei(t,"Palm",We),new Ei(t,"Ring",Xe),new Ei(t,"Strobe",Ye),new Ei(t,"Willow",Ge),new Ei(t,"Ghost",Be)]}(this)),Object(m.a)(function(t){return[new _(t)]}(this)),Object(m.a)(function(t){return[new ae(t)]}(this)),Object(m.a)(function(t){return[new vt(t)]}(this)),Object(m.a)(function(t){return[new bt(t)]}(this)),Object(m.a)(function(t){return[new yt(t)]}(this)),Object(m.a)(function(t){return[new Ut(t)]}(this)),Object(m.a)(function(t){return[new $t(t)]}(this)),Object(m.a)(function(t){return[new ee(t)]}(this)),Object(m.a)(function(t){return[new he(t)]}(this)),Object(m.a)(function(t){return[new le(t)]}(this)),Object(m.a)(function(t){return[new nt(t)]}(this)),Object(m.a)(function(t){return[new ve(t,{preset:1}),new ve(t,{preset:3}),new ve(t,{preset:5})]}(this)),Object(m.a)(function(t){return[new Ri(t)]}(this)),Object(m.a)(function(t){return[new Di(t)]}(this)),Object(m.a)(function(t){return[new oe(t)]}(this))),this.postInit())}},{key:"postInit",value:function(){this.fireworks.forEach((function(t){t.postInit&&t.postInit()})),this.generatePresets(),this.tick=Date.now()}},{key:"generatePresets",value:function(){for(var t=this.fireworks.length,e=[],i=0;i<t;i++)e.push(i);for(var a=[];a.length<t;){var n=F.randomInt(0,e.length);a.push([e[n]]),e.splice(n,1)}if(t>2)for(var r=0;r<2;r++)a.push([F.randomInt(0,t),F.randomInt(0,t)]);this.presets=a}},{key:"draw",value:function(){var t=this.ctx,e=this.fireworks,i=this.presets;if(t){var a=Date.now()-this.tick;if(0===P.fireworkIndex){if(!i.length)return;this.currentFirework=void 0;var n=~~(a/7100);if(a<7100*n+100)return;var r=n%i.length,o=i[r].map((function(t){return e[t]}));r!==this.currentPresetIndex&&(this.currentPresetIndex=r,console.log('fireworks: use "'.concat(o.map((function(t){return t.getDescriptor().name})).join(","),'"'))),o.forEach((function(t){return t.draw()}))}else{var s=e[(P.fireworkIndex-1)%e.length];this.currentFirework=s,s&&s.draw()}}}},{key:"getCurrentFirework",value:function(){return this.currentFirework}},{key:"event",value:function(t,e){var i=this.getCurrentFirework();if(null===i||void 0===i?void 0:i.event)i.event.call(i,t,e);else switch(t){case"event@mouse-moved":case"event@mouse-clicked":this.center=e}}},{key:"renderFireworkTypeOption",value:function(){var t=this;if(!this.fireworks)return"";var e=this.fireworks.map((function(t){return t.getDescriptor().name}));return e.unshift("Random"),n.a.createElement("div",{key:"firework#fireworkIndex",className:"underline",style:{padding:"8px 0"}},n.a.createElement("span",null,"Firework Type"),n.a.createElement(L.a,{ref:function(e){return t.selectElement=e},style:{minWidth:"150px",margin:"0 0 0 8px"},defaultValue:P.fireworkIndex,placeholder:"Select a firework type",onChange:function(e){return t.changeConfig("fireworkIndex",e)}},e.map((function(t,e){return n.a.createElement(L.a.Option,{key:"firework#".concat(e),value:e},"".concat(t))}))))}},{key:"renderSliderOption",value:function(t){var e=this,i=t.name,a=t.title,n=t.minLabel,r=t.maxLabel,o=t.min,s=t.max,h=t.step,c=t.defaultValue;return A({title:a,minLabel:n,maxLabel:r,min:o,max:s,step:h,getCurrentValue:function(){return P[i]||c},onChangeValue:function(t){return e.changeConfig(i,t)}})}},{key:"renderSelectOption",value:function(t,e,i,a){var r=this,o=P[t]||a;return n.a.createElement("div",{key:"".concat(t),style:{margin:"8px 0"}},n.a.createElement("span",null,"".concat(e," ")),n.a.createElement(L.a,{style:{minWidth:"150px",padding:"0 0 0 8px"},value:o,onChange:function(e){return r.changeConfig(t,e)}},i.map((function(t,e){return n.a.createElement(L.a.Option,{key:"option#".concat(e),value:e},"".concat(t))}))))}},{key:"getConfigValue",value:function(t,e,i){return P.getConfigValue(t,e,i)}},{key:"getConfigName",value:function(t,e){return P.getConfigName(t,e)}},{key:"changeConfig",value:function(t,e){if(P.changeConfig(t,e),"fireworkIndex"===t){var i=this.fireworks;this.currentFirework=i[(e-1)%i.length]}}},{key:"option",value:function(){var t=[this.renderFireworkTypeOption()],e=this.getCurrentFirework();if(null===e||void 0===e?void 0:e.option){var i=e.option();i.length&&t.push(n.a.createElement("div",{style:{padding:"8px",background:"#efefef"}},i))}return{name:"Firework",options:t}}}]),t}(),Ji=function(){function t(){Object(f.a)(this,t)}return Object(d.a)(t,[{key:"fileExtension",value:function(){return".webm"}},{key:"start",value:function(t){var e=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=["video/webm;codecs=vp8","video/webm","video/webm,codecs=vp9","video/vp8","video/webm;codecs=daala","video/webm;codecs=h264","video/mpeg"];for(var n in a)if(MediaRecorder.isTypeSupported(a[n])){this.supportedType=a[n];break}if(this.supportedType){var r=t.captureStream();if(r){if(i.audioContext){var o=i.audioContext.createMediaStreamDestination(),s=o.stream;r.addTrack(s.getAudioTracks()[0])}this.recordedChunks=[];try{this.mediaRecorder=new MediaRecorder(r,{mimeType:this.supportedType,audioBitsPerSecond:i.audioBitsPerSecond||128e3,videoBitsPerSecond:i.videoBitsPerSecond||25e5})}catch(h){return alert("MediaRecorder is not supported by this browser."),void console.error("Exception while creating MediaRecorder:",h)}console.log("Created MediaRecorder"),this.mediaRecorder.ondataavailable=function(t){t.data&&t.data.size&&e.recordedChunks.push(t.data),"recording"===e.mediaRecorder.state&&e.mediaRecorder.stop()},this.mediaRecorder.start(),console.log("MediaRecorder started")}}else console.log("No supported type found for MediaRecorder")}},{key:"frame",value:function(t){}},{key:"stop",value:function(){var t=this;return new Promise((function(e,i){t.mediaRecorder.stop(),t.mediaRecorder.onstop=function(i){var a=new Blob(t.recordedChunks,{type:t.supportedType}),n=URL.createObjectURL(a);e(n)}}))}}]),t}();function Ki(t){for(var e=t.split(","),i=e[0].match(/:(.*?);/)[1],a=atob(e[1]),n=a.length,r=new Uint8Array(n);n--;)r[n]=a.charCodeAt(n);return new Blob([r],{type:i})}function $i(t,e,i,a){var n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,r=Math.min(t.width/i,t.height/a),o=i*r,s=a*r,h=(t.width-o)/2,c=(t.height-s)/2,l=e.globalAlpha;e.globalAlpha=n,e.drawImage(t,h,c,o,s,0,0,i,a),e.globalAlpha=l}function Qi(t,e,i,a,n,r,o,s,h){for(var c=r;c<r+s;c++)if(!(c<0)){if(c>i-1)break;for(var l=n;l<n+o;l++)if(!(l<0)){if(l>e-1)break;var u=4*(c*e+l);a[u]=t[u],a[u+1]=t[u+1],a[u+2]=t[u+2],a[u+3]=h?t[u+3]*h|0:t[u+3]}}}var Zi=function(){function t(e){Object(f.a)(this,t),this.props=e}return Object(d.a)(t,[{key:"init",value:function(t){}},{key:"draw",value:function(t){var e=t.ctx,i=t.width,a=t.height;e.globalCompositeOperation="destination-out",e.fillStyle=this.props.fillStyle,e.fillRect(0,0,i,a)}}]),t}();var ta,ea,ia,aa,na=[],ra=[];var oa=function(){function t(e){Object(f.a)(this,t),this.options=e,ia=void 0,aa=void 0}return Object(d.a)(t,[{key:"init",value:function(t){this.context=t}},{key:"add",value:function(t,e,i){this.options=Object(G.a)(Object(G.a)({},this.options),i);var a=this.context.width*this.context.dpr,n=this.context.height*this.context.dpr;void 0===t&&(t=F.randomInt(0,a)),void 0===e&&(e=F.randomInt(0,n)),function(t,e,i,a){t<<=0;for(var n=(e<<=0)-3;n<e+3;n++)for(var r=t-3;r<t+3;r++)na[ta+n*i+r]+=512}(t,e,a)}},{key:"draw",value:function(t,e){var i=this.context,a=i.ctx,n=i.dpr,r=~~(this.context.width*n),o=~~(this.context.height*n);if(ia!==e){aa=new ImageData(new Uint8ClampedArray(e.data),r,o),ia=e,ta=r,ea=r*(o+3);for(var s=r*(o+2)*2,h=0;h<s;h++)ra[h]=na[h]=0}!function(t,e){var i=ta;ta=ea,ea=i,i=0;for(var a=t,n=e,r=na,o=ta,s=ea,h=ra,c=ia.data,l=aa.data,u=0;u<n;u++)for(var f=0;f<a;f++){var d=r[o-a]+r[o+a]+r[o-1]+r[o+1]>>1;d-=r[s+i],d-=d>>5,r[s+i]=d,d=1024-d;var v=h[i];if(h[i]=d,v!==d){var p=f*d/1024<<0,g=u*d/1024<<0;p>=a&&(p=a-1),p<0&&(p=0),g>=n&&(g=n-1),g<0&&(g=0);var m=4*(p+g*a),y=4*i;c[y]=l[m],c[y+1]=l[m+1],c[y+2]=l[m+2]}++o,++i}o}(r,o),a.putImageData(ia,0,0)}}]),t}();for(var sa=[],ha=-11;ha<=11;ha++){var ca=[];sa.push(ca);for(var la=-11;la<=11;la++){var ua=Math.floor(2097152*Math.exp(-.2*(ha*ha+la*la)));ca.push(ua)}}var fa=0;var da=function(){function t(e){Object(f.a)(this,t),this.options=e,fa=0}return Object(d.a)(t,[{key:"init",value:function(t){this.context=t,this.add({direction:"vertical"})}},{key:"add",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.x=t,this.y=e,this.options=Object(G.a)(Object(G.a)({},this.options),i)}},{key:"draw",value:function(t,e){!function(t,e,i){var a=t.ctx,n=e.width,r=e.height,o=i.direction,s=void 0===o?"vertical":o,h=i.frequency,c=void 0===h?100:h,l=X.getFireworkBurstScale(),u=2+4*l,f=2+4*l;if("horizontal"===s){fa+=fa<=0?n:-20;for(var d=0;d<r;d++){var v=u*Math.sin((d+fa)/c)+f;a.putImageData(e,v,0,0,d,n,1)}}else{fa+=fa<=0?r:-20;for(var p=0;p<n;p++){var g=u*Math.sin((p+fa)/c)+f;a.putImageData(e,0,g,p,0,1,r)}}}(this.context,e,this.options)}}]),t}(),va=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(f.a)(this,t),this.options=e,this.add({direction:"vertical"}),this.disturbDelta=0}return Object(d.a)(t,[{key:"init",value:function(t){this.context=t}},{key:"add",value:function(t,e){}},{key:"draw",value:function(t,e){this.disturbImage(e)}},{key:"disturbImage",value:function(t,e){var i,a=this.context.ctx,n=t.width,r=t.height,o=this.options,s=o.direction,h=void 0===s?"vertical":s,c=o.frequency,l=void 0===c?100:c,u=o.distribution,f=void 0===u?.125:u,d=X.getFireworkBurstScale(),v=4+4*d|0,p=4+4*d|0,g=X.getFirePosition();if("horizontal"===h){var m=g.y;this.currentY!==m&&(this.disturbDelta=n),this.disturbDelta+=this.disturbDelt<=0?n:-20,this.currentY=m,i=this.disturbDelta>0?this.disturbDelta:0;for(var y=m,k=m;y>0||k<r;y--,k++){var w=m-y,x=v*Math.sin((w+i)/l)+p;if((x=~~(x*=1-w/(r*f)))<0&&(x=0),0===x){y>=0&&a.putImageData(t,0,0,0,0,n,y+1),k<r&&a.putImageData(t,0,0,0,k,n,r-k);break}y>=0&&a.putImageData(t,x,0,0,y,n,1),k!==y&&k<r&&a.putImageData(t,x,0,0,k,n,1)}}else{var b=g.x;this.currentX!==b&&(this.disturbDelta=r),this.disturbDelta+=this.distrubDelt<=0?r:-20,this.currentX=b,i=this.disturbDelta>0?this.disturbDelta:0;for(var M=b,C=b;M>0||C<n;M--,C++){var O=b-M,S=v*Math.sin((O+i)/l)+p;if((S=~~(S*=1-O/(n*f)))<0&&(S=0),0===S){M>=0&&a.putImageData(t,0,0,0,0,M+1,r),C<n&&a.putImageData(t,0,0,C,0,n-C,r);break}M>=0&&a.putImageData(t,0,S,M,0,1,r),C!==M&&C<n&&a.putImageData(t,0,S,C,0,1,r)}}}}]),t}();var pa=function(){function t(e){Object(f.a)(this,t),this.options=e}return Object(d.a)(t,[{key:"init",value:function(t){this.context=t,this.offset=0,this.tick=Date.now()}},{key:"add",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.options=Object(G.a)(Object(G.a)(Object(G.a)({},this.options),i),{},{x:t,y:e})}},{key:"draw",value:function(t,e){var i=Date.now();if(i-this.tick>50){var a=0|X.getFireworkBurstScale();this.offset=(this.offset+a)%16,this.tick=i}var n=this.context.ctx,r=e.width,o=e.height,s=this.offset-8;n.putImageData(e,-s,0,s,0,r-s,o),n.putImageData(e,r-s,0,0,0,s,o)}}]),t}(),ga=(Math.PI,function t(){Object(f.a)(this,t),this.originX=0,this.originY=0,this.currentX=0,this.currentY=0,this.rotation=0,this.force=0,this.z=0,this.moveX=0,this.moveY=0,this.moveRotation=0,this.videoX=0,this.videoY=0}),ma=function(){function t(e){Object(f.a)(this,t),this.options=e,this.tiles=[]}return Object(d.a)(t,[{key:"init",value:function(t){this.context=t,this.tick=Date.now()}},{key:"add",value:function(t,e){this.explode(t,e)}},{key:"draw",value:function(t,e){var i=e.width,a=e.height;this.processFrame(this.context.ctx,i,a,e)}},{key:"createTiles",value:function(t,e){for(var i=6+(t-t)/2,a=6+(e-e)/2,n=0;n<e;){for(var r=0;r<t;){var o=new ga;o.videoX=r,o.videoY=n,o.originX=i+r,o.originY=a+n,o.currentX=o.originX,o.currentY=o.originY,this.tiles.push(o),r+=12}n+=12}}},{key:"processFrame",value:function(t,e,i,a){var n=this.tiles;n.length||this.createTiles(e,i);for(var r=0;r<n.length;r++){var o=n[r];if(o.force>.01)o.moveX*=o.force,o.moveY*=o.force,o.moveRotation*=o.force,o.currentX+=o.moveX,o.currentY+=o.moveY,o.rotation+=o.moveRotation,o.rotation%=360,o.force*=.9,(o.currentX<=0||o.currentX>=e)&&(o.moveX*=-1),(o.currentY<=0||o.currentY>=i)&&(o.moveY*=-1);else if(0!==o.rotation||o.currentX!==o.originX||o.currentY!==o.originY){var s=.2*(o.originX-o.currentX),h=.2*(o.originY-o.currentY),c=.2*(0-o.rotation);Math.abs(s)<.5?o.currentX=o.originX:o.currentX+=s,Math.abs(h)<.5?o.currentY=o.originY:o.currentY+=h,Math.abs(c)<.5?o.rotation=0:o.rotation+=c}else o.force=0;t.putImageData(a,o.videoX-o.currentX,o.videoY-o.currentY,o.originX,o.originY,12,12)}}},{key:"explode",value:function(t,e){for(var i=this.tiles,a=X.getFireworkBurstScale(),n=0;n<i.length;n++){var r=i[n],o=r.currentX-t,s=r.currentY-e,h=Math.sqrt(o*o+s*s),c=150+20*Math.random()+50*a,l=(c-h)/c*3;if(l>r.force){r.force=l;var u=Math.atan2(s,o);r.moveX=Math.cos(u),r.moveY=Math.sin(u),r.moveRotation=.5-Math.random()}}i.sort((function(t,e){return t.force-e.force}))}}]),t}(),ya=i(150);new(i.n(ya).a)(0,25),new Map;new Map;var ka=function(){function t(){Object(f.a)(this,t)}return Object(d.a)(t,[{key:"init",value:function(t){this.context=t}},{key:"add",value:function(t,e,i){this.pos}},{key:"draw",value:function(t,e){var i=this.context,a=i.ctx,n=i.width,r=i.height,o=X.getPosition(),s=o.x,h=o.y;$i(t,a,n,r,1),a.globalCompositeOperation="destination-out",a.beginPath(),a.fillStyle="#fff",a.lineWidth=1,a.rect(0,0,n,r);var c=X.getFireworkBurstScale();a.arc(s,h,50+50*c,0,2*Math.PI,!1),a.fill("evenodd")}}]),t}(),wa=function(){function t(){Object(f.a)(this,t)}return Object(d.a)(t,[{key:"init",value:function(t){this.context=t,this.options={size:200,zoom:1,brighten:0,invert:!1,grayscale:!1,threshold:0}}},{key:"add",value:function(t,e,i){this.pos}},{key:"draw",value:function(t,e,i){var a=this.context.ctx,n=e.width,r=e.height,o=e.data,s=e.originalData,h=this.options,c=X.getPosition(),l=c.x,u=c.y;this.options.size=150+50*X.getFireworkBurstScale()|0,function(t,e,i,a,n,r,o){for(var s=o.size,h=o.zoom,c=o.brighten,l=void 0===c?0:c,u=o.invert,f=o.grayscale,d=o.threshold,v=o.darkness,p=Math.hypot(.5*s,.5*s)/h,g=0;g<s;g++)for(var m=0;m<s;m++){var y=m-.5*s,k=g-.5*s,w=Math.hypot(k,y);if(!(w>s/2)){var x=Math.atan2(k,y),b=w*w/p,M=4*(Math.round(.5*s+b*Math.cos(x))+n+(Math.round(.5*s+b*Math.sin(x))+r)*e),C=[t[M],t[M+1],t[M+2],t[M+3]*(v||1)|0];if(u&&(C[0]=255-C[0],C[1]=255-C[1],C[2]=255-C[2]),f){var O=.2126*C[0]+.7152*C[1]+.0722*C[2];C[0]=C[1]=C[2]=Math.round(O)}if(d){var S=.2126*C[0]+.7152*C[1]+.0722*C[2]>=d?255:0;C[0]=C[1]=C[2]=Math.round(S)}var I=4*(m+n+(g+r)*e);a[I]=C[0],a[I+1]=C[1]+l,a[I+2]=C[2]+l,a[I+3]=C[3]+l}}}(s,n,0,o,l,u,this.options),this.lastPosition={x:l,y:u},a.putImageData(e,0,0),this.lastPosition&&Qi(s,n,r,o,this.lastPosition.x,this.lastPosition.y,h.size,h.size,i)}}]),t}();Math.PI;var xa=new Zi({fillStyle:"rgba(0, 0, 0, 0.15)"}),ba=[],Ma=[{name:"Shake",effect:new pa},{name:"Disturb",effect:new va},{name:"Wave",effect:new da},{name:"Monocular",effect:new ka},{name:"Fisheye",effect:new wa},{name:"Blowup",effect:new ma},{name:"Ripple",effect:new oa}];var Ca=1;function Oa(t){for(var e=function(e){var i=t[e],a=i.name,n="rc-upload-12345-".concat(Ca++),r={name:a,src:a,img:new Image,data:{}},o=new FileReader;o.onload=function(){var t=o.result;r.uid=n,r.file=new File([Ki(t)],i.name,{type:i.type}),r.img.src=t,r.imgLoaded=!0,r.darkness=1,u("event@image-loaded",r)},o.readAsDataURL(i),ba.push(r)},i=0;i<t.length;i++)e(i)}function Sa(t){if(t.src&&!t.img){var e=new Image;t.img=e,e.src=t.src,t.imgLoaded||(e.onload=function(){t.imgLoaded=!0,t.darkness=1})}}var Ia=function(){function t(e,i){Object(f.a)(this,t),this.context=e,this.options=i||{},this.effectTick=Date.now(),this.initBackgroundImages(e),this.initBackgroundEffects(e),this.updateOptions(this.options)}return Object(d.a)(t,[{key:"initBackgroundImages",value:function(t){ba.forEach((function(e){e.sky&&e.sky.init(t),e.data||(e.data={},Sa(e))})),fetch("image/backgroundImages.json").then((function(t){return t.json()})).then((function(t){t.forEach((function(t){-1===ba.findIndex((function(e){return e.name===t.name}))&&(t.data={},Sa(t),ba.push(t))}))}))}},{key:"initBackgroundEffects",value:function(t){Ma.forEach((function(e){e.effect&&e.effect.init(t)}))}},{key:"updateOptions",value:function(t){var e=t.effectNames;this.availableBackgroundEffects=e.map((function(t){return Ma.find((function(e){return e.name===t}))})).filter((function(t){return void 0!==t})),this.currentBackgroundEffect=this.availableBackgroundEffects.length?this.availableBackgroundEffects[F.randomInt(0,this.availableBackgroundEffects.length)]:void 0}},{key:"getCurrentImage",value:function(){if(ba.length){var t,e=this.imageIndex,i=Date.now();if(void 0===e||e<0||e>=ba.length||i-this.imageTick>1e4)this.imageTick=i,(t=P.randomizeBackgroundImages?F.randomInt(0,ba.length):((e=void 0===e||e<0||e>=ba.length?-1:e)+1)%ba.length)!==this.imageIndex&&(this.imageIndex=t,console.log('background: use "'.concat(ba[t].name,'"')));return ba[this.imageIndex]}}},{key:"getCurrentEffect",value:function(){var t,e=this.availableBackgroundEffects;if(e.length>1){var i=Date.now();if(i-this.effectTick>1e4){this.effectTick=i;var a=F.randomInt(0,e.length);this.currentBackgroundEffect=e[a],this.currentBackgroundEffect.effect.init(this.context);var n=this.getCurrentImage();if(null===n||void 0===n?void 0:n.data){var r=n.data,o=r.data,s=r.originalData,h=r.w,c=r.h;Qi(s,h,c,o,0,0,h,c,P.backgroundImageDarkness)}console.log('effect: use "'.concat(this.currentBackgroundEffect.name,'"'))}}return X.useEffect(null===(t=this.currentBackgroundEffect)||void 0===t?void 0:t.effect),this.currentBackgroundEffect}},{key:"draw",value:function(t){var e=this.context,i=e.ctx,a=e.width,n=e.height,r=this.getCurrentImage();if(r){var o=r.img;if(o){i.fillStyle="rgba(0, 0, 0, 0.15)",i.clearRect(0,0,a,n),function(t,e,i){var a=t.img,n=t.imgLoaded,r=t.darkness,o=t.data;if(n&&(null===a||void 0===a?void 0:a.width)&&(null===a||void 0===a?void 0:a.height)){var s=e.ctx,h=e.dpr,c=e.width,l=e.height,u=~~(c*h),f=~~(l*h);if(o.w===u&&o.h===f&&r===i)return;s.clearRect(0,0,c,l),$i(a,s,c,l,1);var d=s.getImageData(0,0,u,f),v=d.data,p=function(t){for(var e=[],i=0;i<=t.length;i++)e[i]=t[i];return e}(v);d.w=u,d.h=f,d.originalData=p,t.data=d,function(t,e){for(var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=3;a<t.length;a+=4)e[a]=t[a]*i|0}(p,v,i),t.darkness=i,console.log("background: updated image data ".concat(t.name))}}(r,this.context,t);var s=r.data;if(null===s||void 0===s?void 0:s.data){var h=this.getCurrentEffect();h?h.effect.draw(o,s,t):$i(o,i,a,n,t)}}}else xa.draw(this.context);i.globalCompositeOperation="lighter"}},{key:"getInvisibleArea",value:function(){var t,e;return null===(t=this.getCurrentEffect())||void 0===t||null===(e=t.getInvisibleArea)||void 0===e?void 0:e.call(t)}}]),t}(),ja=i(313),Ea=i(115),Pa=i.n(Ea),La=i(151),Da=i(306),Fa=i(308),Ra=i(314);function Ta(t){return new Promise((function(e,i){var a=new FileReader;a.readAsDataURL(t),a.onload=function(){return e(a.result)},a.onerror=function(t){return i(t)}}))}var za=function(t){Object(p.a)(i,t);var e=Object(g.a)(i);function i(t){var a;return Object(f.a)(this,i),(a=e.call(this,t)).handleCancel=function(){return a.setState({previewVisible:!1})},a.handlePreview=function(){var t=Object(La.a)(Pa.a.mark((function t(e){return Pa.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.url||e.preview){t.next=4;break}return t.next=3,Ta(e.originFileObj);case 3:e.preview=t.sent;case 4:a.setState({previewImage:e.url||e.preview,previewVisible:!0,previewTitle:e.name||e.url.substring(e.url.lastIndexOf("/")+1)});case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),a.handleChange=function(t){var e=t.fileList;a.setState({fileList:e}),a.props.onFileListChanged&&a.props.onFileListChanged(e)},a.state={previewVisible:!1,previewImage:"",previewTitle:""},a}return Object(d.a)(i,[{key:"render",value:function(){var t=this.state,e=t.previewVisible,i=t.previewImage,a=t.previewTitle,r=this.props.fileList,o=n.a.createElement("div",null,n.a.createElement(Ra.a,null),n.a.createElement("div",{style:{marginTop:8}},"Add"));return n.a.createElement(n.a.Fragment,null,n.a.createElement(Da.a,{action:"",listType:"picture-card",fileList:r,onPreview:this.handlePreview,onChange:this.handleChange,beforeUpload:function(t){return!1}},o),n.a.createElement(Fa.a,{visible:e,title:a,footer:null,onCancel:this.handleCancel},n.a.createElement("img",{alt:"example",style:{width:"100%"},src:i})))}}]),i}(n.a.Component),Va=function(){function t(){Object(f.a)(this,t),this.fileList=[],this.tick=0}return Object(d.a)(t,[{key:"init",value:function(t,e,i,a){var n=t.getContext("2d");this.context={ctx:n,dpr:R(n),width:e,height:i},this.background&&!a||(this.backgroundImageData=void 0,this.background=new Ia(this.context,{effectNames:P.backgroundEffectNames})),X.resetPosition(e,i,200)}},{key:"clearInvisibleArea",value:function(t){var e,i=null===(e=this.background)||void 0===e?void 0:e.getInvisibleArea();if(i){var a=i.left,n=i.top,r=i.width,o=i.height;t.globalCompositeOperation="lighter",t.fillStyle="rgba(255, 255, 255, 0.15)",t.fillRect(a,n,r,o)}}},{key:"draw",value:function(t){t&&this.background&&(this.background.draw(P.backgroundImageDarkness),this.clearInvisibleArea(this.context.ctx),this.tick++,this.tick%10&&X.updatePosition())}},{key:"renderBackgroundImageOption",value:function(){var t=this,e=ba.filter((function(t){return t.file})).map((function(t){return{name:t.file.name,thumbUrl:t.img.src,status:"success",uid:t.uid,originFileObj:t.file}}));return n.a.createElement("div",{key:"firework#imgIndex",style:{padding:"8px 0"}},e.length>0&&n.a.createElement(n.a.Fragment,null,A({title:"background image darkness",minLabel:"dark",maxLabel:"bright",min:.1,max:1,step:.05,getCurrentValue:function(){return P.backgroundImageDarkness},onChangeValue:function(e){t.changeConfig("backgroundImageDarkness",e)}}),n.a.createElement(ja.a,{style:{margin:"4px 0"},checked:P.randomizeBackgroundImages,onChange:function(){t.changeConfig("randomizeBackgroundImages",!P.randomizeBackgroundImages)}},"Randomize background image")),n.a.createElement("div",{style:{margin:"8px 0"}},"Background images"),n.a.createElement(za,{fileList:e,onFileListChanged:function(t){ba.length=0,Oa(t.map((function(t){return t.originFileObj||t})))}}))}},{key:"renderBackgroundEffectOption",value:function(){var t=this,e=P.backgroundEffectNames,i={backgroundImages:ba,backgroundEffects:Ma}.backgroundEffects;return n.a.createElement("div",{key:"firework#effectIndex",style:{padding:"8px 0"}},n.a.createElement("span",null,"Background Effect"),i.map((function(i,a){return n.a.createElement("div",null,n.a.createElement(ja.a,{style:{margin:"4px 0"},checked:e.includes(i.name),onChange:function(){var a=e;if(a.includes(i.name)){var n=a.findIndex((function(t){return t===i.name}));a.splice(n,1)}else a.push(i.name);t.changeConfig("backgroundEffectNames",a)}},i.name))})))}},{key:"changeConfig",value:function(t,e){P.changeConfig(t,e),"backgroundEffectNames"===t&&(this.background=new Ia(this.context,{imageIndex:P.backkgroundImageIndex,effectNames:e}))}},{key:"option",value:function(){return[{name:"Image",options:[this.renderBackgroundImageOption()]},{name:"Effect",options:[this.renderBackgroundEffectOption()]}]}}]),t}(),Aa=function(t){Object(p.a)(a,t);var e=Object(g.a)(a);function a(t){var i;return Object(f.a)(this,a),(i=e.call(this,t)).effects=[],window.requestAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){window.setTimeout(t,1e3/60)}},window.cancelAnimFrame=function(t){return window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.oCancelAnimationFrame||window.msCancelAnimationFrame||function(t){window.clearTimeout(t)}},i.state={optionOpened:!1,sound:!1,capturer:void 0,captureTime:0},i.fps=-1,i.fpsCounter=0,i.prevMs=0,i.initEffect=i.initEffect.bind(Object(v.a)(i)),i.drawEffect=i.drawEffect.bind(Object(v.a)(i)),i.onChangeEffectOption=i.onChangeEffectOption.bind(Object(v.a)(i)),i.onToggleOptionBar=i.onToggleOptionBar.bind(Object(v.a)(i)),i.onToggleSound=i.onToggleSound.bind(Object(v.a)(i)),i.onEvent=i.onEvent.bind(Object(v.a)(i)),i.onResize=i.onResize.bind(Object(v.a)(i)),i.onRun=i.onRun.bind(Object(v.a)(i)),i.onStop=i.onStop.bind(Object(v.a)(i)),i.background=new Va,i.effects.push(new Hi),i}return Object(d.a)(a,[{key:"componentDidMount",value:function(t){c("effects",this.onEvent),window.addEventListener("resize",this.onResize),this.onRun()}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.onResize),this.onStop(),l("effects",this.onEvent)}},{key:"onResize",value:function(){this.initEffect(!0),this.forceUpdate()}},{key:"onEvent",value:function(t,e){switch(console.log("effects: ".concat(t)),t){case"event@mouse-down":case"event@mouse-clicked":case"event@mouse-moved":case"event@mouse-up":if(this.canvas){var i=this.getEffect();i&&i.event(t,{x:e.x-this.canvas.offsetLeft,y:e.y-this.canvas.offsetTop})}break;case"event@config-changed":this.onChangeEffectOption();break;case"req@refresh":case"event@image-loaded":this.forceUpdate()}}},{key:"onRun",value:function(){this.raf&&cancelAnimationFrame(this.raf),this.running=!0,this.raf=requestAnimationFrame(this.drawEffect)}},{key:"onStop",value:function(){this.running=!1,this.raf&&cancelAnimationFrame(this.raf),this.raf=void 0}},{key:"onChangeEffectOption",value:function(){this.initEffect(!0),this.forceUpdate()}},{key:"onToggleOptionBar",value:function(t){var e=this.state.optionOpened,i=this.getEffect();(null===i||void 0===i?void 0:i.configChanged)&&i.configChanged(),this.setState({optionOpened:!e})}},{key:"onToggleSound",value:function(){this.state.sound?(this.setState({sound:!1}),W.pauseAll()):(this.setState({sound:!0}),W.resumeAll())}},{key:"onCapture",value:function(t){this.setState({capturer:t,captureTime:Date.now()}),t.start(this.canvas,{audioContext:W.getContext()})}},{key:"getEffect",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this.effects[t%this.effects.length]}},{key:"initEffect",value:function(t){var e=this.canvas,i=this.container;if(e&&i){this.canvas=e;var a=this.getEffect();if(a){var n=i.width||i.clientWidth,r=i.height||i.clientHeight;this.background.init(e,n,r,t),a.init(e,n,r,t)}}}},{key:"findFps",value:function(){var t=Date.now(),e=t-this.prevMs;this.fps=Math.round(1e3*this.fpsCounter/e*10)/10,this.prevMs=t,this.fpsCounter=0}},{key:"drawStats",value:function(t){var e=t.getContext("2d");e.textBaseline="top",e.font="normal 200 10px arial",e.fillStyle="white",this.state.capturer?e.fillText(function(t){var e=t/1e3|0,i=e%60,a=e/3600|0,n=(e-3600*a)/60|0;return a?"".concat(S(a),":").concat(S(n),":").concat(S(i),".").concat(I(t%1e3)):"".concat(S(n),":").concat(S(i),".").concat(I(t%1e3))}(Date.now()-this.state.captureTime),10,10):(this.fpsCounter++,this.fps>0&&e.fillText("fps: ".concat(~~this.fps),10,10),this.findFps())}},{key:"drawEffect",value:function(){if(this.canvas){if(this.running){this.background.draw(this.canvas);var t=this.getEffect();t&&t.draw();var e=this.state.capturer;e&&e.frame(this.canvas),this.drawStats(this.canvas)}requestAnimationFrame(this.drawEffect)}}},{key:"renderOptions",value:function(){var t,e=[];return e.push(null===(t=this.getEffect())||void 0===t?void 0:t.option()),e.push.apply(e,Object(m.a)(this.background.option())),n.a.createElement(y.a,{defaultActiveKey:"option#1"},e.map((function(t,e){return n.a.createElement(y.a.TabPane,{tab:t.name,key:"option#".concat(e+1)},t.options)})))}},{key:"renderEffect",value:function(){var t=this;return n.a.createElement("canvas",{ref:function(e){e&&(t.canvas=e,t.initEffect(!1))},style:{width:"100vw",height:"100vh",background:"black"},onMouseDown:function(e){return t.onEvent("event@mouse-down",{x:e.clientX,y:e.clientY})},onMouseMove:function(e){return t.onEvent("event@mouse-moved",{x:e.clientX,y:e.clientY})},onMouseUp:function(e){return t.onEvent("event@mouse-up",{x:e.clientX,y:e.clientY})},onClick:function(e){return t.onEvent("event@mouse-clicked",{x:e.clientX,y:e.clientY})},onTouchStart:function(e){return t.onEvent("event@mouse-down",{x:e.clientX,y:e.clientY})},onTouchMove:function(e){return t.onEvent("event@mouse-moved",{x:e.clientX,y:e.clientY})},onMouseEnd:function(e){return t.onEvent("event@mouse-up",{x:e.clientX,y:e.clientY})}})}},{key:"renderActions",value:function(){var t,e=this,a=this.state,r=a.capturer,o=a.optionOpened;return r?n.a.createElement("div",{className:"app-setting"},n.a.createElement("span",{onClick:function(){e.setState({capturer:void 0}),r.stop().then((function(t){i(304).saveAs(t,"fireworks".concat(r.fileExtension()))}))}},n.a.createElement(w.a,{spin:!0,style:{color:"red"}}))):n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"app-setting"},n.a.createElement("span",{style:{margin:"0 24px 0 0"},onClick:function(){return e.onToggleSound()}},this.state.sound?n.a.createElement(x.a,{style:{color:"red"}}):n.a.createElement(b.a,null)),n.a.createElement("span",{onClick:function(){return e.onCapture(new Ji(e.canvas))}},n.a.createElement(M.a,null)),n.a.createElement("span",{style:{margin:"0 0 0 24px"},onClick:function(){return e.onToggleOptionBar()}},n.a.createElement(C.a,null))),n.a.createElement(k.a,{title:"",placement:"right",closable:!0,width:Math.min(400,(null===(t=this.container)||void 0===t?void 0:t.width)||400),onClose:function(){return e.onToggleOptionBar()},visible:o},this.renderOptions()))}},{key:"render",value:function(){var t=this;return n.a.createElement(O.FileDrop,{style:{width:"100vw",height:"100vh"},onFrameDragEnter:function(t){},onFrameDragLeave:function(t){},onFrameDrop:function(t){},onDragOver:function(t){},onDragLeave:function(t){},onDrop:function(e,i){Oa(e),t.initEffect(!0)}},n.a.createElement("div",{ref:function(e){e&&(t.container=e,t.initEffect(!0))},style:{width:"100vw",height:"100vh"}},this.renderEffect(),this.renderActions()))}}]),a}(n.a.Component),Ba=function(t){Object(p.a)(i,t);var e=Object(g.a)(i);function i(t){var a;return Object(f.a)(this,i),(a=e.call(this,t)).onEvent=a.onEvent.bind(Object(v.a)(a)),a}return Object(d.a)(i,[{key:"componentDidMount",value:function(t){this.restoreState(),c("home",this.onEvent)}},{key:"componentWillUnmount",value:function(){this.saveState(),l("home",this.onEvent)}},{key:"saveState",value:function(){}},{key:"restoreState",value:function(){}},{key:"onEvent",value:function(t,e){}},{key:"render",value:function(){return n.a.createElement("div",{className:"app-container"},n.a.createElement(a.Suspense,{fallback:n.a.createElement("div",{style:{margin:"16px"}},"Loading...")},n.a.createElement(Aa,null)))}}]),i}(n.a.Component);window.onpopstate=function(t){u("event@state-poped",t.state)};var Ya=function(){return n.a.createElement("div",{className:"App"},n.a.createElement("header",{className:"App-header"},n.a.createElement(Ba,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(n.a.createElement(n.a.StrictMode,null,n.a.createElement(Ya,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()})).catch((function(t){console.error(t.message)}))},95:function(t,e,i){}},[[174,1,2]]]);
//# sourceMappingURL=main.b85ca89d.chunk.js.map