(this.webpackJsonpawesomefireworks=this.webpackJsonpawesomefireworks||[]).push([[0],{142:function(t,e,i){t.exports=i(236)},147:function(t,e,i){},236:function(t,e,i){"use strict";i.r(e);var a=i(0),n=i.n(a),r=i(7),s=i.n(r),o=(i(82),i(147),i(148),i(43)),h=[];function c(t,e){console.log('event: "'.concat(t,'" subscribed')),h.push({name:t,handler:e})}function l(t,e){var i=h.filter((function(i){return!(i.name===t&&i.handler===e)}));i.length!==h.length?(console.log('event: "'.concat(t,'" unsubscribed')),h=i):console.log('event: failed to unsubscribe "'.concat(t,'"'))}function u(t,e){var i,a=Object(o.a)(h);try{for(a.s();!(i=a.n()).done;){i.value.handler(t,e)}}catch(n){a.e(n)}finally{a.f()}}var f=i(1),d=i(2),p=i(17),v=i(52),g=i(51),y=i(242),m=i(241),k=i(101),w=i.n(k),x=i(122);var b={effectIndex:0,options:{},optionOpended:!1,pieces:[]},M=!1;function S(){return(S=Object(x.a)(w.a.mark((function t(){return w.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!M){t.next=2;break}return t.abrupt("return");case 2:M=!0;case 3:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function O(){var t={optionOpended:b.optionOpended,effectIndex:b.effectIndex,options:b.options};""!==JSON.stringify(t)&&function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"localStorage";if(void 0!==e&&null!==e&&i in window){var a=JSON.stringify(e);console.log("storage<- ".concat(t,": ").concat(a.substr(0,64),"...")),window[i].setItem(t,a)}}("firework#pref",t)}function I(){var t=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"localStorage";if(e in window){var i=window[e].getItem(t);if(i)return console.log("storage->".concat(t,": ").concat(i.substr(0,64),"...")),JSON.parse(i)}}("firework#pref");b.optionOpended=!1,b.effectIndex=(null===t||void 0===t?void 0:t.effectIndex)||0,b.options=(null===t||void 0===t?void 0:t.options)||{}}var C=b,E=i(22),D=i(240),j=i(239);function P(t){return(window.devicePixelRatio||1)/(t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1)}var T=1e-6,F="undefined"!==typeof Float32Array?Float32Array:Array;Math.random;Math.PI;Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)});function R(){var t=new F(3);return F!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function L(t,e,i){var a=new F(3);return a[0]=t,a[1]=e,a[2]=i,a}function W(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function A(t,e,i){var a=e[0],n=e[1],r=e[2],s=i[0],o=i[1],h=i[2];return t[0]=n*h-r*o,t[1]=r*s-a*h,t[2]=a*o-n*s,t}var Y=function(t){var e=t[0],i=t[1],a=t[2];return Math.hypot(e,i,a)};!function(){var t=R()}();!function(){var t=function(){var t=new F(4);return F!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0),t}()}();function X(){var t=new F(4);return F!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t[3]=1,t}function V(t,e,i,a){var n,r,s,o,h,c=e[0],l=e[1],u=e[2],f=e[3],d=i[0],p=i[1],v=i[2],g=i[3];return(r=c*d+l*p+u*v+f*g)<0&&(r=-r,d=-d,p=-p,v=-v,g=-g),1-r>T?(n=Math.acos(r),s=Math.sin(n),o=Math.sin((1-a)*n)/s,h=Math.sin(a*n)/s):(o=1-a,h=a),t[0]=o*c+h*d,t[1]=o*l+h*p,t[2]=o*u+h*v,t[3]=o*f+h*g,t}var z=function(t,e){var i=e[0],a=e[1],n=e[2],r=e[3],s=i*i+a*a+n*n+r*r;return s>0&&(s=1/Math.sqrt(s)),t[0]=i*s,t[1]=a*s,t[2]=n*s,t[3]=r*s,t};(function(){var t=R(),e=L(1,0,0),i=L(0,1,0)})(),function(){var t=X(),e=X()}(),function(){var t=function(){var t=new F(9);return F!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1,t}()}();function N(t,e){var i=new F(2);return i[0]=t,i[1]=e,i}!function(){var t=function(){var t=new F(2);return F!=Float32Array&&(t[0]=0,t[1]=0),t}()}();function _(t,e){var i=Math.random()*(e-t)+t;return Number.isInteger(t)&&Number.isInteger(e)?Math.floor(i):i}var B=function(){function t(e){Object(f.a)(this,t),this.props=e}return Object(d.a)(t,[{key:"init",value:function(t){}},{key:"draw",value:function(t){var e=t.ctx,i=t.width,a=t.height;e.globalCompositeOperation="destination-out",e.fillStyle=this.props.fillStyle,e.fillRect(0,0,i,a)}}]),t}();var G,q,H,K,U=i(4),J=[],Q=[];var Z=function(){function t(e){Object(f.a)(this,t),this.options=e,H=void 0,K=void 0}return Object(d.a)(t,[{key:"init",value:function(t){this.context=t}},{key:"add",value:function(t,e,i){this.options=Object(U.a)(Object(U.a)({},this.options),i);var a=this.context.width*this.context.dpr,n=this.context.height*this.context.dpr;void 0===t&&(t=_(0,a)),void 0===e&&(e=_(0,n)),function(t,e,i,a){t<<=0;for(var n=(e<<=0)-3;n<e+3;n++)for(var r=t-3;r<t+3;r++)J[G+n*i+r]+=512}(t,e,a)}},{key:"draw",value:function(t,e){var i=this.context,a=i.ctx,n=i.dpr,r=~~(this.context.width*n),s=~~(this.context.height*n);if(H!==e){K=new ImageData(new Uint8ClampedArray(e.data),r,s),H=e,G=r,q=r*(s+3);for(var o=r*(s+2)*2,h=0;h<o;h++)Q[h]=J[h]=0}!function(t,e){var i=G;G=q,q=i,i=0;for(var a=t,n=e,r=J,s=G,o=q,h=Q,c=H.data,l=K.data,u=0;u<n;u++)for(var f=0;f<a;f++){var d=r[s-a]+r[s+a]+r[s-1]+r[s+1]>>1;d-=r[o+i],d-=d>>5,r[o+i]=d,d=1024-d;var p=h[i];if(h[i]=d,p!==d){var v=f*d/1024<<0,g=u*d/1024<<0;v>=a&&(v=a-1),v<0&&(v=0),g>=n&&(g=n-1),g<0&&(g=0);var y=4*(v+g*a),m=4*i;c[m]=l[y],c[m+1]=l[y+1],c[m+2]=l[y+2]}++s,++i}s}(r,s),a.putImageData(H,0,0)}}]),t}();for(var $=[],tt=-11;tt<=11;tt++){var et=[];$.push(et);for(var it=-11;it<=11;it++){var at=Math.floor(2097152*Math.exp(-.2*(tt*tt+it*it)));et.push(at)}}var nt=function(){function t(e){Object(f.a)(this,t),this.options=e,this.add({direction:"vertical"})}return Object(d.a)(t,[{key:"init",value:function(t){this.context=t,this.offset=0}},{key:"add",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.options=Object(U.a)(Object(U.a)(Object(U.a)({},this.options),i),{},{x:t,y:e})}},{key:"draw",value:function(t,e){var i=this.context.ctx,a=e.width,n=e.height;this.offset=(this.offset+1)%a;var r=this.offset;i.putImageData(e,-r,0,r,0,a-r,n),i.putImageData(e,a-r,0,0,0,r,n)}}]),t}(),rt=0;var st=function(){function t(e){Object(f.a)(this,t),this.options=e,rt=0}return Object(d.a)(t,[{key:"init",value:function(t){this.context=t,this.add({direction:"vertical"})}},{key:"add",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.x=t,this.y=e,this.options=Object(U.a)(Object(U.a)({},this.options),i)}},{key:"draw",value:function(t,e){!function(t,e,i){var a=t.ctx,n=e.width,r=e.height,s=i.direction,o=void 0===s?"vertical":s,h=i.waveHeight,c=void 0===h?4:h,l=i.frequency,u=void 0===l?100:l,f=i.waveOffset,d=void 0===f?4:f;if("horizontal"===o){rt+=rt<=0?n:-20;for(var p=0;p<r;p++){var v=c*Math.sin((p+rt)/u)+d;a.putImageData(e,v,0,0,p,n,1)}}else{rt+=rt<=0?r:-20;for(var g=0;g<n;g++){var y=c*Math.sin((g+rt)/u)+d;a.putImageData(e,0,y,g,0,1,r)}}}(this.context,e,this.options)}}]),t}(),ot=0;var ht=function(){function t(e){Object(f.a)(this,t),this.options=e,this.add({direction:"vertical"}),ot=0}return Object(d.a)(t,[{key:"init",value:function(t){this.context=t}},{key:"add",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.options=Object(U.a)(Object(U.a)(Object(U.a)({},this.options),i),{},{x:t,y:e})}},{key:"draw",value:function(t,e){!function(t,e,i){var a=t.ctx,n=e.width,r=e.height,s=i.direction,o=void 0===s?"vertical":s,h=i.waveHeight,c=void 0===h?8:h,l=i.frequency,u=void 0===l?100:l,f=i.waveOffset,d=void 0===f?8:f,p=i.distribution,v=void 0===p?.125:p;if("horizontal"===o){ot+=ot<=0?n:-20;for(var g=i.y,y=g,m=g;y>0||m<r;y--,m++){var k=g-y,w=c*Math.sin((k+ot)/u)+d;if((w=~~(w*=1-k/(r*v)))<0&&(w=0),0===w){y>=0&&a.putImageData(e,0,0,0,0,n,y+1),m<r&&a.putImageData(e,0,0,0,m,n,r-m);break}y>=0&&a.putImageData(e,w,0,0,y,n,1),m!==y&&m<r&&a.putImageData(e,w,0,0,m,n,1)}}else{var x=i.x;ot+=ot<=0?r:-20;for(var b=x,M=x;b>0||M<n;b--,M++){var S=x-b,O=c*Math.sin((S+ot)/u)+d;if((O=~~(O*=1-S/(n*v)))<0&&(O=0),0===O){b>=0&&a.putImageData(e,0,0,0,0,b+1,r),M<n&&a.putImageData(e,0,0,M,0,n-M,r);break}b>=0&&a.putImageData(e,0,O,b,0,1,r),M!==b&&M<n&&a.putImageData(e,0,O,M,0,1,r)}}}(this.context,e,this.options)}}]),t}();var ct=function(){function t(e){Object(f.a)(this,t),this.options=e}return Object(d.a)(t,[{key:"init",value:function(t){this.context=t,this.tick=Date.now()}},{key:"add",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.options=Object(U.a)(Object(U.a)(Object(U.a)({},this.options),i),{},{x:t,y:e})}},{key:"draw",value:function(t,e){var i=Date.now();i-this.tick<500||(i-this.tick<3e3?this.context.ctx.putImageData(e,0,0):this.tick=i)}}]),t}(),lt=function(){function t(e){Object(f.a)(this,t),this.options=e}return Object(d.a)(t,[{key:"init",value:function(t){this.context=t,this.offset=0,this.tick=Date.now()}},{key:"add",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.options=Object(U.a)(Object(U.a)(Object(U.a)({},this.options),i),{},{x:t,y:e})}},{key:"draw",value:function(t,e){var i=Date.now();i-this.tick>150&&(this.offset=(this.offset+1)%32,this.tick=i);var a=this.context.ctx,n=e.width,r=e.height,s=this.offset-16;a.putImageData(e,-s,0,s,0,n-s,r),a.putImageData(e,n-s,0,0,0,s,r)}}]),t}(),ut={x:0,y:0,width:0,height:0},ft=(Math.PI,[]),dt=function t(){Object(f.a)(this,t),this.originX=0,this.originY=0,this.currentX=0,this.currentY=0,this.rotation=0,this.force=0,this.z=0,this.moveX=0,this.moveY=0,this.moveRotation=0,this.videoX=0,this.videoY=0};function pt(t,e,i,a){ft.length||function(t,e){for(var i=8+(t-(ut={x:0,y:0,width:t,height:e}).width)/2,a=6+(e-ut.height)/2,n=0;n<ut.height;){for(var r=0;r<ut.width;){var s=new dt;s.videoX=r,s.videoY=n,s.originX=i+r,s.originY=a+n,s.currentX=s.originX,s.currentY=s.originY,ft.push(s),r+=16}n+=12}}(e,i);for(var n=0;n<ft.length;n++){var r=ft[n];if(r.force>.01)r.moveX*=r.force,r.moveY*=r.force,r.moveRotation*=r.force,r.currentX+=r.moveX,r.currentY+=r.moveY,r.rotation+=r.moveRotation,r.rotation%=360,r.force*=.9,(r.currentX<=0||r.currentX>=e)&&(r.moveX*=-1),(r.currentY<=0||r.currentY>=i)&&(r.moveY*=-1);else if(0!==r.rotation||r.currentX!==r.originX||r.currentY!==r.originY){var s=.2*(r.originX-r.currentX),o=.2*(r.originY-r.currentY),h=.2*(0-r.rotation);Math.abs(s)<.5?r.currentX=r.originX:r.currentX+=s,Math.abs(o)<.5?r.currentY=r.originY:r.currentY+=o,Math.abs(h)<.5?r.rotation=0:r.rotation+=h}else r.force=0;t.putImageData(a,r.videoX-r.currentX,r.videoY-r.currentY,r.originX,r.originY,16,12)}}function vt(t,e){for(var i=0;i<ft.length;i++){var a=ft[i],n=a.currentX-t,r=a.currentY-e,s=Math.sqrt(n*n+r*r),o=200+20*Math.random(),h=(o-s)/o*3;if(h>a.force){a.force=h;var c=Math.atan2(r,n);a.moveX=Math.cos(c),a.moveY=Math.sin(c),a.moveRotation=.5-Math.random()}}ft.sort((function(t,e){return t.force-e.force}))}var gt=function(){function t(e){Object(f.a)(this,t),this.options=e}return Object(d.a)(t,[{key:"init",value:function(t){this.context=t,this.tick=Date.now()}},{key:"add",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.options=Object(U.a)(Object(U.a)(Object(U.a)({},this.options),i),{},{x:t,y:e});var a=Date.now();a-this.tick>2e3&&(vt(t,e),this.tick=a)}},{key:"draw",value:function(t,e){var i=e.width,a=e.height;pt(this.context.ctx,i,a,e)}}]),t}(),yt=i(69),mt=i.n(yt),kt=new mt.a(0,50),wt=new Map;function xt(t){return wt.has(t)||wt.set(t,kt.pdf(t)),wt.get(t)}new mt.a(0,50),new Map;var bt=0;var Mt=function(){function t(e){Object(f.a)(this,t),this.options=e||{},bt=0}return Object(d.a)(t,[{key:"init",value:function(t){this.context=t}},{key:"add",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.options=Object(U.a)(Object(U.a)({},this.options),i),void 0===this.options.x?(this.options.x=t,this.options.y=e):(this.options.x+=_(20,50),this.options.y+=_(20,50))}},{key:"draw",value:function(t,e){var i=this.context.ctx,a=this.options,n=a.x%e.width;a.y,e.height;!function(t,e,i,a,n){var r=e.width,s=e.height,o=n.frequency,h=void 0===o?1e3:o,c=n.radius;bt+=bt<=0?s:-20;for(var l=s*(void 0===c?1:c)*Math.sin(bt/h)/xt(0),u=i,f=i;u>0||f<r;u--,f++){var d=xt(i-u)*l;if(0===(d=~~d)){u>=0&&t.putImageData(e,0,0,0,0,u+1,s),f<r&&t.putImageData(e,0,0,f,0,r-f,s);break}u>=0&&t.putImageData(e,0,d,u,0,1,s),f!==u&&f<r&&t.putImageData(e,0,d,f,0,1,s)}}(i,e,n,0,a)}}]),t}(),St=function(){function t(e){Object(f.a)(this,t),this.options=e,this.add({direction:"vertical"})}return Object(d.a)(t,[{key:"init",value:function(t){this.context=t,this.offset=0,this.leftVisible=!1}},{key:"add",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.options=Object(U.a)(Object(U.a)(Object(U.a)({},this.options),i),{},{x:t,y:e})}},{key:"draw",value:function(t,e){var i=this.context.ctx,a=e.width,n=e.height;this.offset=(this.offset+1)%a;var r=this.offset;0===r&&(this.leftVisible=!this.leftVisible),i.putImageData(e,0,0),i.save(),i.globalCompositeOperation="xor",i.lineWidth=2,i.strokeStyle="white",i.beginPath(),i.moveTo(r,0),i.lineTo(r,n),i.stroke(),i.restore()}}]),t}();var Ot=function(){function t(e){Object(f.a)(this,t),this.options=e||{},this.xDirection=1,this.yDirection=1}return Object(d.a)(t,[{key:"init",value:function(t){this.context=t;var e,i,a,n=t.width,r=t.height;this.update(_(0,n),_(0,r),n,r),e=N(this.options.x,this.options.y),i=this.options.x,a=this.options.y,e[0]=i,e[1]=a,this.things=function(t,e){for(var i=[],a=Math.ceil(t/30),n=Math.ceil(e/30),r=0;r<n;r+=1)for(var s=0;s<a;s+=1){var o={pos:N(30*s+15,30*r+15),radius:2};i.push(o)}return i}(n,r)}},{key:"add",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.options=Object(U.a)(Object(U.a)({},this.options),i)}},{key:"update",value:function(t,e,i,a){t<30&&(t=30),t>i-30&&(t=i-30),e<30&&(e=30),e>a-30&&(e=a-30),this.options.x=t,this.options.y=e}},{key:"draw",value:function(t,e){var i=this.context,a=i.ctx,n=i.width,r=i.height,s=this.options,o=s.x,h=s.y;a.drawImage(t,0,0),a.globalCompositeOperation="destination-out",a.beginPath(),a.fillStyle="#fff",a.lineWidth=1,a.rect(0,0,n,r),a.arc(o,h,100,0,2*Math.PI,!1),a.fill("evenodd"),Math.random()>.1?(o>=n-30?this.xDirection=-1:o<=30&&(this.xDirection=1),this.update((o+4*this.xDirection)%n,h,n,r)):(h>=r-30?this.yDirection=-1:h<=30&&(this.yDirection=1),this.update(o,(h+4*this.yDirection)%r,n,r))}}]),t}(),It=[{name:"Random",src:""},{name:"Black Sky",src:"",sky:new B({fillStyle:"rgba(0, 0, 0, 0.15)"})},{name:"Night Sky",src:"./image/night.jpg"},{name:"Toronto View",src:"./image/toronto1.jpg"},{name:"Toronto",src:"./image/toronto.jpg"},{name:"New York",src:"./image/newyork.jpg"},{name:"Paris",src:"./image/paris.jpg"},{name:"Tokyo",src:"./image/tokyo.jpg"},{name:"Shanghai",src:"./image/shanghai.jpg"},{name:"Hong Kong",src:"./image/hongkong.jpg"}],Ct=[{name:"Random",effect:void 0},{name:"No Effect",effect:void 0},{name:"Scan",effect:new St},{name:"Move",effect:new nt},{name:"Shake",effect:new lt},{name:"Disturb",effect:new ht},{name:"Wave",effect:new st},{name:"Flick",effect:new ct},{name:"Monocular",effect:new Ot},{name:"Blowup",effect:new gt},{name:"Sink",effect:new Mt},{name:"Ripple",effect:new Z}];function Et(){return{backgroundImages:It,backgroundEffects:Ct}}var Dt=function(){function t(e,i){var a=this;Object(f.a)(this,t),this.context=e,this.options=i||{};var n=Date.now();this.skyTick=n,this.effectTick=n,this.disturbTick=n,It.forEach((function(t){t.src&&(t.img||a.loadImage(t)),t.sky&&t.sky.init(e)})),Ct.forEach((function(t){t.effect&&t.effect.init(e)})),this.updateOptions(e,this.options),this.fps=-1,this.fpsCounter=0,this.prevMs=0}return Object(d.a)(t,[{key:"getValue",value:function(t,e){return void 0!==t?t:e}},{key:"updateOptions",value:function(t,e){var i=Et(),a=e.imageIndex;(void 0===a||a<0||a>i.backgroundImages.length-1)&&(a=1),void 0!==this.imageIndex&&a===this.imageIndex||(this.backgroundImageData=void 0,this.imageIndex=a,this.currentImageIndex=0!==a?a:void 0);var n=e.effectIndex;(void 0===n||n<0||n>i.backgroundEffects.length-1)&&(n=1),void 0!==this.effectIndex&&n===this.effectIndex||(this.effectIndex=n,this.currentEffectIndex=0!==n?n:void 0)}},{key:"getImage",value:function(){if(0===this.imageIndex){var t=Date.now();return(!this.currentImageIndex||t-this.imageTick>5e3)&&(this.imageTick=t,this.currentImageIndex=_(1,It.length-1)),It[this.currentImageIndex]}return It[this.imageIndex]}},{key:"getEffect",value:function(){if(0===this.effectIndex){var t=Date.now();if(!this.currentEffectIndex||t-this.effectTick>5e3){this.effectTick=t,this.disturbTick=t,this.currentEffectIndex=_(1,Ct.length-1);var e=Ct[this.currentEffectIndex].effect;e&&e.init(this.context)}return Ct[this.currentEffectIndex].effect}return Ct[this.effectIndex].effect}},{key:"getImageData",value:function(){return this.getImage().imgData}},{key:"loadImage",value:function(t){var e=this;if(t.src&&!t.img){var i=new Image;t.img=i,i.src=t.src,i.onload=function(){if(i.width&&i.height){var a=e.context,n=(a.canvas,a.ctx),r=a.dpr,s=a.width,o=a.height,h=Math.min(i.width/s,i.height/o),c=s*h,l=o*h,u=(i.width-c)/2,f=(i.height-l)/2;n.clearRect(0,0,s,o),n.drawImage(i,u,f,c,l,0,0,s,o),t.imgData=n.getImageData(0,0,~~(s*r),~~(o*r))}}}}},{key:"findFps",value:function(){var t=(new Date).getTime(),e=t-this.prevMs;this.fps=Math.round(1e3*this.fpsCounter/e*10)/10,this.prevMs=t,this.fpsCounter=0}},{key:"showStats",value:function(t){this.fpsCounter++,t.textBaseline="top",t.font="normal 200 10px arial",t.fillStyle="white",t.fillText("FPS: "+~~this.fps,10,10),t.shadowColor="black",t.shadowOffsetX=0,t.shadowOffsetY=0,t.shadowBlur=2,this.findFps()}},{key:"draw",value:function(){var t=this.context,e=t.ctx,i=t.width,a=t.height,n=this.getImage();if(n.sky)n.sky.draw(this.context);else if(n.img&&(e.fillStyle="rgba(0, 0, 0, 0.15)",e.clearRect(0,0,i,a),n.imgData)){var r=this.getEffect();if(r){r.draw(n.img,n.imgData);var s=Date.now();s-this.disturbTick>1500&&(r.add(_(0,i),_(0,a),i,a),this.disturbTick=s)}else e.putImageData(n.imgData,0,0)}this.showStats(e),e.globalCompositeOperation="lighter"}}]),t}(),jt=function t(e,i){var a=i.x,n=i.y,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:_(0,360),s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:_(50,60);Object(f.a)(this,t);var o=_(0,2*Math.PI),h=15*Math.cos(_(0,2*Math.PI));this.rocket=e,this.p={x:a,y:n},this.velocity={x:e?_(-3,3):Math.cos(o)*h,y:e?_(-10,-4):Math.sin(o)*h},this.shrink=e?.999:_(0,.05)+.93,this.gravity=e?.01:.2,this.resistance=e?1:.92,this.size=3,this.hue=r,this.brightness=s,this.positions=[];for(var c=0;c<this.size;c++)this.positions.push({x:a,y:n})},Pt=function(){function t(e){Object(f.a)(this,t),this.id="f6df9bb2",this.effect=e,this.count=5,this.particles=[]}return Object(d.a)(t,[{key:"getDescriptor",value:function(){return{id:"f6df9bb2",name:"Splendid"}}},{key:"postInit",value:function(){var t=this.id,e=this.effect;this.count=e.getConfigValue(t,"count",5)}},{key:"draw",value:function(){var t=this,e=this.count,i=this.particles,a=this.effect,n=a.width,r=a.height;i.forEach((function(e,i){return t.drawParticle(i)})),i.filter((function(t){return t.rocket})).length<e&&i.push(new jt(!0,{x:_(0,n),y:r}))}},{key:"drawParticle",value:function(t){var e=this.particles,i=this.effect,a=i.ctx,n=i.width,r=i.height,s=e[t],o=s.rocket,h=s.velocity,c=s.p,l=s.positions,u=s.size,f=s.shrink,d=s.gravity,p=s.resistance,v=s.hue,g=s.brightness,y=s.positions.pop();if(a.beginPath(),a.moveTo(y.x,y.y),a.lineTo(c.x,c.y),a.lineWidth=u,a.strokeStyle="hsla(".concat(v,",100%,").concat(g,"%,1)"),a.stroke(),l.unshift({x:c.x,y:c.y}),s.velocity.x*=p,s.velocity.y*=p,s.velocity.y+=d,c.x+=h.x,c.y+=h.y,s.size*=f,s.size<=1||c.x>n||c.x<0||c.y>r||c.y<0)e.splice(t,1);else if(o&&c.y<=.5*r&&_(0,1)<=.08){for(var m=_(0,10)+100,k=0;k<m;k+=1)e.push(new jt(!1,c,v,g));e.splice(t,1)}}},{key:"option",value:function(){var t=this.effect;return[t.renderOption(t.getConfigName(this.id,"count"),"Number of Particles",5,100,1,5)]}}]),t}();function Tt(t,e,i,a){t.beginPath(),t.arc(e,i,a,0,2*Math.PI),t.closePath()}var Ft=function(){function t(e,i,a,n){Object(f.a)(this,t),this.x=e,this.y=i,this.acceleration=.05,this.radius=3,this.angle=a,this.h=n[0],this.s=n[1],this.l=n[2],this.color="hsla("+this.h+","+this.s+","+this.l+", 1)",this.speed=2,this.dead=!1}return Object(d.a)(t,[{key:"move",value:function(){this.y>_(100,200)?(this.speed+=this.acceleration,this.x+=this.speed*Math.sin(Math.PI/180*this.angle),this.y+=this.speed*Math.cos(Math.PI/180*this.angle)):this.dead||(this.dead=!0)}},{key:"isDead",value:function(){return this.dead}},{key:"draw",value:function(t){t.fillStyle=this.color,Tt(t,this.x,this.y,this.radius),t.fill()}},{key:"expload",value:function(){for(var t=[],e=0;e<359;e+=4){var i=new Rt(this.x,this.y,e+_(-200,200)/100,[this.h,this.s,this.l]);t.push(i)}return t}}]),t}(),Rt=function(){function t(e,i,a,n){Object(f.a)(this,t),this.x=e,this.y=i,this.angle=a,this.angleOffset=_(-20,20)/100,this.color=n,this.opacity=1,this.finalColor="hsla("+this.color[0]+","+this.color[1]+","+this.color[2]+","+this.opacity+")",this.gravity=.01,this.verticalSpeed=0,this.speed=_(195,205)/100,this.radius=1,this.acceleration=-.01}return Object(d.a)(t,[{key:"move",value:function(){this.opacity>0?(this.speed>0&&(this.speed+=this.acceleration),this.angle+=this.angleOffset,this.opacity-=.005,this.finalColor="hsla("+this.color[0]+","+this.color[1]+","+this.color[2]+","+this.opacity+")",this.verticalSpeed+=this.gravity,this.x+=this.speed*Math.sin(Math.PI/180*this.angle),this.y+=this.speed*Math.cos(Math.PI/180*this.angle)+this.verticalSpeed):this.dead||(this.dead=!0)}},{key:"draw",value:function(t){t.fillStyle=this.finalColor,Tt(t,this.x,this.y,this.radius),t.fill()}}]),t}(),Lt=function(){function t(e){Object(f.a)(this,t),this.effect=e;var i=e.width,a=e.height;this.auto=!0,this.t=0,this.particles=[],this.seeds=[];var n=new Ft(i/2,a-40,180,[_(0,359),"100%","50%"]);this.seeds.push(n)}return Object(d.a)(t,[{key:"getDescriptor",value:function(){return{id:"9fc7d5d4",name:"Explod Circles"}}},{key:"draw",value:function(){for(var t=this.effect,e=t.ctx,i=t.width,a=t.height,n=this.seeds,r=this.particles,s=0;s<n.length;s++){var o=n[s];o.dead?n.splice(s,1):(o.move(),o.draw(e),o.isDead()&&r.push.apply(r,Object(E.a)(o.expload())))}for(var h=0;h<r.length;h++){var c=r[h];c.dead?r.splice(h,1):(c.move(),c.draw(e))}if(this.auto&&this.t%50===0){var l=new Ft(_(20,i-20),a-20,_(175,185),[_(0,359),"100%","50%"]);n.push(l)}this.t++}}]),t}(),Wt=function(){function t(e,i,a,n,r,s,o){Object(f.a)(this,t),this.x=e,this.y=i,this.vx=a,this.vy=n,this.ax=r,this.ay=s,this.life=150,this.path=[],this.colour=o,this.r=2}return Object(d.a)(t,[{key:"update",value:function(){this.life--,this.path.length>=15&&this.path.shift(),this.path.push([this.x,this.y]),this.vy+=this.ay,this.vx+=this.ax,this.x+=this.vx,this.y+=this.vy}},{key:"draw",value:function(t){var e=~~(100*this.life/150)/100;t.fillStyle="rgba("+this.colour+.4*e+")",this.life>142.5&&(t.fillStyle="#fff"),t.lineWidth=1,t.beginPath(),t.moveTo(this.x-this.r,this.y),t.lineTo(this.path[0][0],this.path[0][1]),t.lineTo(this.x+this.r,this.y),t.closePath(),t.fill(),t.fillStyle="rgba("+this.colour+e+")",this.life>142.5&&(t.fillStyle="#fff"),t.beginPath(),t.arc(~~this.x,~~this.y,this.r,0,2*Math.PI),t.fill(),t.closePath()}}]),t}(),At=function(){function t(e,i){Object(f.a)(this,t),this.x=e*(.8*Math.random()+.1),this.y=i*(.8*Math.random()+.1),this.strength=5.5*Math.random()+1.5,this.colour=~~(255*Math.random())+","+~~(255*Math.random())+","+~~(255*Math.random())+",",this.life=0,this.particles=[];for(var a=7+~~(23*Math.random()),n=a;n--;){var r=.001,s=n*Math.PI*2/a;s<Math.PI&&(r*=-1);var o=this.strength*Math.sin(s),h=this.strength*Math.cos(s);this.particles.push(new Wt(this.x,this.y,o,h,r,.05,this.colour))}}return Object(d.a)(t,[{key:"update",value:function(t){if(this.life++,!(this.life<0))for(var e=this.particles.length;e--;)this.particles[e].update(),this.particles[e].draw(t)}}]),t}(),Yt=function(){function t(e){Object(f.a)(this,t),this.effect=e;var i=e.width,a=e.height;this.fw1=new At(i,a),this.fw2=new At(i,a),this.fw2.life=-75}return Object(d.a)(t,[{key:"getDescriptor",value:function(){return{id:"a0886f1a",name:"Radiancy"}}},{key:"draw",value:function(){var t=this.effect,e=t.ctx,i=t.width,a=t.height;this.fw1.update(e),this.fw2.update(e),75===this.fw1.life&&(this.fw2=new At(i,a)),75===this.fw2.life&&(this.fw1=new At(i,a))}}]),t}(),Xt=-10,Vt=20,zt=25,Nt=15,_t=1;function Bt(t){t=t||0,this.r=Gt(t),this.g=Gt(t),this.b=Gt(t),this.style=function(t,e,i){return"rgba("+t+","+e+","+i+", 0.8)"}(this.r,this.g,this.b)}function Gt(t){return Math.floor(255*Math.random()+t)}var qt=function(){function t(e,i){Object(f.a)(this,t),this.radius=10,this.previousRadius=10,this.explodingDuration=100,this.hasExploded=!1,this.alive=!0,this.color=new Bt,this.px=e/4+Math.random()*i/2,this.py=i,this.vx=Xt+Math.random()*Vt,this.vy=-1*(zt+Math.random()*Nt),this.duration=40}return Object(d.a)(t,[{key:"update",value:function(t){if(this.hasExploded){var e=200-this.radius;this.previousRadius=this.radius,this.radius+=e/10,this.explodingDuration--,0===this.explodingDuration&&(this.alive=!1)}else this.vx+=0,this.vy+=_t,this.vy>=0&&this.explode(t),this.px+=this.vx,this.py+=this.vy}},{key:"draw",value:function(t){t.beginPath(),t.arc(this.px,this.py,this.previousRadius,0,2*Math.PI,!1),this.hasExploded||(t.fillStyle=this.color.style,t.lineWidth=1,t.fill())}},{key:"explode",value:function(t){this.hasExploded=!0;for(var e=3+Math.floor(3*Math.random()),i=0;i<e;i++)for(var a=10+Math.floor(21*Math.random()),n=5+5*Math.random(),r=2*Math.PI/a,s=Math.random()*r,o=0;o<a;o++)t.push(new Ht(this,o*r+s,n))}}]),t}(),Ht=function(){function t(e,i,a){Object(f.a)(this,t),this.px=e.px,this.py=e.py,this.vx=Math.cos(i)*a,this.vy=Math.sin(i)*a,this.color=e.color,this.duration=40+Math.floor(20*Math.random()),this.alive=!0}return Object(d.a)(t,[{key:"update",value:function(){this.vx+=0,this.vy+=_t/10,this.px+=this.vx,this.py+=this.vy,this.radius=3,this.duration--,this.duration<=0&&(this.alive=!1)}},{key:"draw",value:function(t){t.beginPath(),t.arc(this.px,this.py,this.radius,0,2*Math.PI,!1),t.fillStyle=this.color.style,t.lineWidth=1,t.fill()}}]),t}(),Kt=function(){function t(e){Object(f.a)(this,t),this.id="b93d0d69",this.effect=e,this.readyBombs=[],this.explodedBombs=[],this.particles=[];for(var i=0;i<1;i++)this.readyBombs.push(new qt(this.width,this.height))}return Object(d.a)(t,[{key:"getDescriptor",value:function(){return{id:"b93d0d69",name:"Bounce"}}},{key:"postInit",value:function(){_t=this.effect.getConfigValue(this.id,"gravity",1)}},{key:"update",value:function(){for(var t=[];this.explodedBombs.length>0;){var e=this.explodedBombs.shift();e.update(),e.alive&&t.push(e)}this.explodedBombs=t;for(var i=[];this.readyBombs.length>0;){var a=this.readyBombs.shift();a.update(this.particles),a.hasExploded?this.explodedBombs.push(a):i.push(a)}this.readyBombs=i;for(var n=[];this.particles.length>0;){var r=this.particles.shift();r.update(),r.alive&&n.push(r)}this.particles=n}},{key:"draw",value:function(t){var e=this.effect,i=e.ctx,a=e.width,n=e.height;this.update(),i.beginPath();for(var r=this.readyBombs,s=this.explodedBombs,o=this.particles,h=0;h<r.length;h++)r[h].draw(i);for(var c=0;c<s.length;c++)s[c].draw(i);for(var l=0;l<o.length;l++)o[l].draw(i);100*Math.random()<5&&r.push(new qt(a,n))}},{key:"setSpeedParams",value:function(){for(var t=0,e=0;t<this.height&&e>=0;)t+=e+=_t;Nt=e-(zt=e/2);var i=1/4*this.width/(e/2);Xt=-i,Vt=2*i}}]),t}();function Ut(t,e,i,a){var n=t-i,r=e-a;return Math.sqrt(Math.pow(n,2)+Math.pow(r,2))}var Jt,Qt,Zt=function(){function t(e,i,a,n){for(Object(f.a)(this,t),this.x=e,this.y=i,this.startX=e,this.startY=i,this.endX=a,this.endY=n,this.distanceToEnd=Ut(e,i,a,n),this.distanceTraveled=0,this.trail=[],this.trailLength=3;this.trailLength--;)this.trail.push([this.x,this.y]);this.angle=Math.atan2(n-i,a-e),this.speed=5,this.acceleration=1.05,this.brightness=_(50,70),this.targetRadius=2.5}return Object(d.a)(t,[{key:"update",value:function(){this.trail.pop(),this.trail.unshift([this.x,this.y]),this.targetRadius<8?this.targetRadius+=.3:this.targetRadius=1,this.speed*=this.acceleration;var t=Math.cos(this.angle)*this.speed,e=Math.sin(this.angle)*this.speed;return this.distanceTraveled=Ut(this.startX,this.startY,this.x+t,this.y+e),this.distanceTraveled>=this.distanceToEnd||(this.x+=t,this.y+=e,!1)}},{key:"draw",value:function(t,e){t.beginPath();var i=this.trail[this.trail.length-1][0],a=this.trail[this.trail.length-1][1];t.moveTo(i,a),t.lineTo(this.x,this.y),t.strokeStyle="hsl(".concat(e,", 100%, ").concat(this.brightness,"%)"),t.stroke(),t.beginPath(),t.arc(this.endX,this.endY,this.targetRadius,0,2*Math.PI),t.stroke()}}]),t}(),$t=function(){function t(e,i,a){for(Object(f.a)(this,t),this.x=e,this.y=i,this.angle=_(0,2*Math.PI),this.friction=.95,this.gravity=.7,this.hue=_(a-20,a+20),this.brightness=_(50,80),this.decay=_(.015,.03),this.speed=_(1,10),this.trail=[],this.trailLength=5;this.trailLength--;)this.trail.push([this.x,this.y]);this.transparency=1}return Object(d.a)(t,[{key:"update",value:function(){return this.trail.pop(),this.trail.unshift([this.x,this.y]),this.speed*=this.friction,this.x+=Math.cos(this.angle)*this.speed,this.y+=Math.sin(this.angle)*this.speed+this.gravity,this.transparency-=this.decay,this.transparency<=this.decay}},{key:"draw",value:function(t){t.beginPath();var e=this.trail[this.trail.length-1][0],i=this.trail[this.trail.length-1][1];t.moveTo(e,i),t.lineTo(this.x,this.y),t.strokeStyle="hsla(".concat(this.hue,", 100%, ").concat(this.brightness,"%, ").concat(this.transparency,")"),t.stroke()}}]),t}(),te=function(){function t(e){Object(f.a)(this,t),this.effect=e,this.fireworks=[],this.particles=[],this.isMouseDown=!1,this.hue=120,this.ticksSinceFireworkAutomated=0,this.ticksSinceFirework=0}return Object(d.a)(t,[{key:"getDescriptor",value:function(){return{id:"6acdb162",name:"Shooting"}}},{key:"draw",value:function(){this.hue+=.5,this.updateFireworks(),this.updateParticles(),this.launchAutomatedFirework(),this.launchManualFirework()}},{key:"createParticles",value:function(t,e){for(var i=this.particles,a=this.hue,n=100;n--;)i.push(new $t(t,e,a))}},{key:"launchAutomatedFirework",value:function(){var t=this.effect,e=t.width,i=t.height,a=this.fireworks,n=this.isMouseDown;if(this.ticksSinceFireworkAutomated>=_(20,80)){if(!n){var r=e/2,s=i,o=_(0,e),h=_(0,i/2);a.push(new Zt(r,s,o,h)),this.ticksSinceFireworkAutomated=0}}else this.ticksSinceFireworkAutomated++}},{key:"launchManualFirework",value:function(){var t=this.effect,e=t.width,i=t.height,a=this.fireworks,n=this.isMouseDown,r=this.center;if(this.ticksSinceFirework>=5){if(n){var s=e/2,o=i,h=r.x,c=r.y;a.push(new Zt(s,o,h,c)),this.ticksSinceFirework=0}}else this.ticksSinceFirework++}},{key:"updateFireworks",value:function(){for(var t=this.effect.ctx,e=this.fireworks,i=this.hue,a=e.length-1;a>=0;--a){var n=e[a];n.draw(t,i),n.update()&&(e.splice(a,1),this.createParticles(n.endX,n.endY))}}},{key:"updateParticles",value:function(){for(var t=this.effect.ctx,e=this.particles,i=e.length-1;i>=0;--i){var a=e[i];a.draw(t),a.update()&&e.splice(i,1)}}}]),t}(),ee=function(){function t(e,i,a,n,r){Object(f.a)(this,t),this.x=e,this.y=i,this.dir=a,this.power=n,this.vx=Math.cos(this.dir*Math.PI/180)*this.power,this.vy=Math.sin(this.dir*Math.PI/180)*this.power,this.health=100,this.hsl=r.replace(/[^\d,]/g,"").split(",")}return Object(d.a)(t,[{key:"update",value:function(){if(this.x+=this.vx,this.y+=this.vy,this.vx*=.98,this.vy*=.98,this.vy+=.15,this.health--,this.health<=0)return!0}},{key:"draw",value:function(t){t.fillStyle="hsla("+this.hsl[0]+","+this.hsl[1]+"%,"+this.hsl[2]+"%,"+this.health/100+")",t.fillRect(this.x-2,this.y-2,4,4)}}]),t}(),ie=function(){function t(e,i){Object(f.a)(this,t),this.x=Math.random()*e,this.y=i,this.vy=-(5*Math.random()+10),this.color="hsl("+360*Math.random()+", 100%, 50%)"}return Object(d.a)(t,[{key:"update",value:function(){if(this.y+=this.vy,this.vy+=.15,Math.abs(this.vy)<=.1)return!0}},{key:"draw",value:function(t){t.fillStyle=this.color,t.fillRect(this.x,this.y,3,3)}}]),t}(),ae=function(){function t(e){Object(f.a)(this,t),this.effect=e;var i=this.effect,a=i.width,n=i.height;this.fireworks=[new ie(a,n)],this.particles=[],this.lastTick=Date.now()}return Object(d.a)(t,[{key:"getDescriptor",value:function(){return{id:"b8d18c5b",name:"Rainy"}}},{key:"draw",value:function(t){var e=this.fireworks,i=this.particles,a=this.effect,n=a.ctx,r=a.width,s=a.height,o=360;t||(o/=2);for(var h=e.length-1;h>=0;h--){var c=e[h];if(c.update()){for(var l=0;l<o;l++)i.push(new ee(c.x,c.y,l,5*Math.random(),c.color));e.splice(h,1)}c.draw(n)}for(var u=i.length-1;u>=0;u--){var f=i[u];f.update()&&i.splice(u,1),f.draw(n)}var d=Date.now();d-this.lastTick>500&&(this.lastTick=d,e.push(new ie(r,s)))}}]),t}(),ne=function(){function t(e){Object(f.a)(this,t),this.pos={x:e?e.x:0,y:e?e.y:0},this.vel={x:0,y:0},this.shrink=.97,this.size=2,this.resistance=1,this.gravity=0,this.flick=!1,this.alpha=1,this.fade=0,this.color=0}return Object(d.a)(t,[{key:"update",value:function(){this.vel.x*=this.resistance,this.vel.y*=this.resistance,this.vel.y+=this.gravity,this.pos.x+=this.vel.x,this.pos.y+=this.vel.y,this.size*=this.shrink,this.alpha-=this.fade}},{key:"render",value:function(t){if(this.exists()){var e=this.pos,i=e.x,a=e.y,n=this.size/2;t.save();var r=t.createRadialGradient(i,a,.1,i,a,n);r.addColorStop(.1,"rgba(255,255,255,"+this.alpha+")"),r.addColorStop(.8,"hsla("+this.color+", 100%, 50%, "+this.alpha+")"),r.addColorStop(1,"hsla("+this.color+", 100%, 50%, 0.1)"),t.fillStyle=r,t.beginPath(),t.arc(this.pos.x,this.pos.y,this.flick?_(0,this.size):this.size,0,2*Math.PI,!0),t.closePath(),t.fill(),t.restore()}}},{key:"exists",value:function(){return this.alpha>=.1&&this.size>=1}}]),t}(),re=function(t){Object(v.a)(i,t);var e=Object(g.a)(i);function i(t,a){var n;return Object(f.a)(this,i),(n=e.call(this,{x:t,y:a})).explosionColor=0,n}return Object(d.a)(i,[{key:"explode",value:function(t){for(var e=10*Math.random()+80,i=0;i<e;i++){var a=new ne(this.pos),n=Math.random()*Math.PI*2,r=15*Math.cos(Math.random()*Math.PI/2);a.vel.x=Math.cos(n)*r,a.vel.y=Math.sin(n)*r,a.size=10,a.gravity=.2,a.resistance=.92,a.shrink=_(.93,.98),a.flick=!0,a.color=this.explosionColor,t.push(a)}}},{key:"render",value:function(t){if(this.exists()){var e=this.pos,i=e.x,a=e.y,n=this.size/2;t.save();var r=t.createRadialGradient(i,a,.1,i,a,n);r.addColorStop(.1,"rgba(255, 255, 255 ,"+this.alpha+")"),r.addColorStop(1,"rgba(0, 0, 0, "+this.alpha+")"),t.fillStyle=r,t.beginPath(),t.arc(this.pos.x,this.pos.y,this.flick?_(this.size/2,this.size):this.size,0,2*Math.PI,!0),t.closePath(),t.fill(),t.restore()}}}]),i}(ne),se=function(){function t(e){Object(f.a)(this,t),this.effect=e,this.particles=[],this.rockets=[],this.colorCode=0;var i=Date.now();this.tick=i,this.updateTick=i,this.launchTick=i}return Object(d.a)(t,[{key:"getDescriptor",value:function(){return{id:"604bc106",name:"Slow Explod"}}},{key:"draw",value:function(){var t=this.effect.height,e=Date.now();e-this.launchTick>800&&(this.launch(this.effect.center.x,t),this.launchTick=e),e-this.updateTick>20&&(this.update(),this.updateTick=e)}},{key:"launch",value:function(t,e){var i=this.rockets;if(i.length<10){var a=new re(t,this.effect.height);a.explosionColor=10*Math.floor(360*Math.random()/10),a.vel.y=-3*Math.random()-4,a.vel.x=6*Math.random()-3,a.size=8,a.shrink=.999,a.gravity=.01,i.push(a)}}},{key:"update",value:function(){for(var t=this.effect,e=t.ctx,i=t.height,a=t.center,n=this.rockets,r=this.particles,s=[],o=0;o<n.length;o++){var h=n[o];h.update(),h.render(e);var c=Math.sqrt(Math.pow(a.x-h.pos.x,2)+Math.pow(a.y-h.pos.y,2)),l=h.pos.y<2*i/3&&100*Math.random()<=1;h.pos.y<i/5||h.vel.y>=0||c<50||l?h.explode(r):s.push(h)}this.rockets=s;for(var u=[],f=0;f<r.length;f++){var d=r[f];d.update(),d.exists()&&(d.render(e),u.push(d))}for(this.particles=u;r.length>400;)r.shift()}}]),t}(),oe=3,he=.02,ce=20,le=100,ue=3,fe=.01,de=10,pe=50,ve=2,ge=2.5,ye=.1,me=[0,0,0],ke="round",we=4,xe=20,be=30,Me=10,Se=20,Oe=6,Ie=.05,Ce=8,Ee=.5,De=[[255,30,40],[255,150,20],[255,220,0],[0,255,100],[100,255,20],[50,200,200],[120,220,255],[80,180,255],[220,120,255],[255,100,150],[240,20,200],[140,140,140],[170,170,170],[200,200,200],[255,0,0]],je=function(t,e,i,a,n,r){t.strokeStyle=r,t.beginPath(),function(t,e,i,a,n){t.moveTo(e,i),t.lineTo(a,n)}(t,e,i,a,n),t.stroke()},Pe=function(){function t(e){Object(f.a)(this,t),this.effect=e,this.fireworks=[],this.rockets=[]}return Object(d.a)(t,[{key:"getDescriptor",value:function(){return{id:"70510490",name:"Still Explod"}}},{key:"draw",value:function(){var t=this.effect,e=t.ctx,i=t.width,a=t.height;e.lineCap=ke,e.lineWidth=oe;var n,r=Object(o.a)(this.fireworks);try{for(r.s();!(n=r.n()).done;){var s,h=n.value,c="rgba(".concat(h.color[0],", ").concat(h.color[1],", ").concat(h.color[2],", "),l=Object(o.a)(h.moving);try{for(l.s();!(s=l.n()).done;){var u=s.value;je(e,u.x,u.y,u.x+u.speedX/ge*u.length,u.y+u.speedY/ge*u.length,"".concat(c).concat(u.alpha,")"))}}catch(m){l.e(m)}finally{l.f()}var f,d=Object(o.a)(h.fading);try{for(d.s();!(f=d.n()).done;){var p=f.value;je(e,p.x,p.y,p.x+p.speedX/ge*p.length,p.y+p.speedY/ge*p.length,"".concat(c).concat(p.alpha,")"))}}catch(m){d.e(m)}finally{d.f()}}}catch(m){r.e(m)}finally{r.f()}e.lineWidth=we,e.save(),e.shadowBlur=xe;var v,g=Object(o.a)(this.rockets);try{for(g.s();!(v=g.n()).done;){var y=v.value;e.shadowColor=y.color,je(e,y.x,y.y,y.x+y.speedX/Ce*y.length,y.y+y.speedY/Ce*y.length,y.color)}}catch(m){g.e(m)}finally{g.f()}e.restore(),Math.random()<Ie&&this.createRocket(Math.random()*i,Math.random()*a);this.removeFireworks(1),this.removeRockets(1)}},{key:"removeFireworks",value:function(t){for(var e=this.fireworks,i=e.length-1;i>=0;i--){for(var a=e[i].moving.length-1;a>=0;a--){var n=e[i].moving[a];Math.abs(n.speedX)<ye&&Math.abs(n.speedY)<ye?(e[i].moving.splice(a,1),e[i].fading.push(n)):(n.x+=n.speedX*t,n.y+=n.speedY*t,Math.sign(n.speedX)===Math.sign(n.speedX-n.speedDecreaseX*t)?n.speedX-=n.speedDecreaseX*t:n.speedX=0,Math.sign(n.speedY)===Math.sign(n.speedY-n.speedDecreaseY*t)?n.speedY-=n.speedDecreaseY*t:n.speedY=0)}if(0===e[i].moving.length){for(var r=e[i].fading.length-1;r>=0;r--){var s=e[i].fading[r];s.alpha>s.alphaDecrease*t?s.alpha-=s.alphaDecrease*t:e[i].fading.splice(r,1)}0===e[i].fading.length&&e.splice(i,1)}}}},{key:"removeRockets",value:function(t){for(var e=this.rockets,i=e.length-1;i>=0;i--){var a=e[i];Math.abs(a.speedX)<Ee&&Math.abs(a.speedY)<Ee?(e.splice(i,1),this.createFirework(a.x,a.y,a.colorFirework)):(a.x+=a.speedX*t,a.y+=a.speedY*t,a.speedX-=a.speedDecreaseX*t,a.speedY-=a.speedDecreaseY*t)}}},{key:"createFirework",value:function(t,e,i){for(var a=this.fireworks,n=[],r=_(pe,le),s=0;s<2*r;s++){var o=r*Math.sqrt(Math.random()),h=2*Math.PI*Math.random(),c=o*Math.cos(h),l=o*Math.sin(h),u=Math.sqrt(Math.pow(c,2)+Math.pow(l,2)),f=_(ve,ue),d=c/u*f,p=l/u*f;n.push({x:t,y:e,distX:c,distY:l,speedX:d,speedY:p,speedDecreaseX:Math.pow(d,2)/(2*c),speedDecreaseY:Math.pow(p,2)/(2*l),alpha:1,alphaDecrease:_(fe,he),length:_(de,ce)})}a.push({color:i,moving:n,fading:[]})}},{key:"createRocket",value:function(t,e){var i,a=this.effect,n=a.width,r=a.height,s=this.rockets,o=t-n/2,h=e-r,c=Math.sqrt(Math.pow(o,2)+Math.pow(h,2)),l=_(Oe,Me),u=o/c*l,f=h/c*l;i=16===De.length+1?De[_(0,De.length-1)]:16===De.length?me:De[16],s.push({x:n/2,y:r,color:"rgb(".concat(i[0],", ").concat(i[1],", ").concat(i[2],")"),colorFirework:i,length:_(Se,be),speedX:u,speedY:f,speedDecreaseX:Math.pow(u,2)/(2*o),speedDecreaseY:Math.pow(f,2)/(2*h)})}}]),t}(),Te=i(238),Fe={"!":[[5,-40],[5,-30],[5,-20],[5,0]],'"':[[20,-40],[20,-30],[5,-40],[5,-30]],"#":[[35,-40],[45,-30],[35,-30],[15,-40],[25,-30],[35,-20],[45,-10],[15,-30],[35,-10],[5,-30],[15,-20],[25,-10],[35,0],[15,-10],[5,-10],[15,0]],"%":[[45,-40],[35,-30],[15,-40],[45,-10],[5,-40],[15,-30],[25,-20],[35,-10],[45,0],[5,-30],[35,0],[15,-10],[5,0]],"&":[[35,-40],[25,-40],[35,-30],[15,-40],[35,-20],[15,-30],[25,-20],[15,-20],[25,-10],[35,0],[5,-20],[25,0],[5,-10],[15,0],[25,10],[5,0]],"'":[[5,-40],[5,-30]],"(":[[15,-40],[5,-30],[5,-20],[5,-10],[15,0]],")":[[5,-40],[15,-30],[15,-20],[15,-10],[5,0]],"*":[[25,-40],[5,-40],[15,-30],[25,-20],[5,-20]],"+":[[20,-40],[35,-20],[20,-30],[25,-20],[15,-20],[20,-10],[5,-20],[20,0]],",":[[5,0],[5,10]],"-":[[35,-20],[25,-20],[15,-20],[5,-20]],".":[[5,0]],"/":[[45,-40],[35,-30],[25,-20],[15,-10],[5,0]],":":[[5,-30],[5,-10]],";":[[5,-30],[5,-10],[5,0]],"<":[[15,-25],[5,-15],[15,-5]],"=":[[35,-30],[25,-30],[15,-30],[35,-10],[5,-30],[25,-10],[15,-10],[5,-10]],">":[[5,-25],[15,-15],[5,-5]],"?":[[35,-40],[25,-40],[35,-30],[15,-40],[35,-20],[5,-40],[25,-20],[15,-20],[15,0]],"@":[[35,-30],[25,-40],[15,-40],[35,-20],[25,-20],[35,-10],[5,-30],[35,0],[15,-15],[5,-20],[25,0],[15,-5],[5,-10],[15,5],[5,0]],A:[[35,-30],[25,-40],[15,-40],[35,-20],[25,-20],[35,-10],[5,-30],[15,-20],[35,0],[5,-20],[5,-10],[5,0]],B:[[25,-40],[15,-40],[25,-30],[35,-20],[5,-40],[25,-20],[35,-10],[5,-30],[15,-20],[35,0],[5,-20],[25,0],[5,-10],[15,0],[5,0]],C:[[35,-40],[25,-40],[15,-40],[5,-30],[35,0],[5,-20],[25,0],[5,-10],[15,0]],D:[[35,-30],[25,-40],[15,-40],[35,-20],[5,-40],[35,-10],[5,-30],[5,-20],[25,0],[5,-10],[15,0],[5,0]],E:[[35,-40],[25,-40],[15,-40],[5,-40],[25,-20],[5,-30],[15,-20],[35,0],[5,-20],[25,0],[5,-10],[15,0],[5,0]],F:[[35,-40],[25,-40],[15,-40],[5,-40],[25,-20],[5,-30],[15,-20],[5,-20],[5,-10],[5,0]],G:[[35,-40],[25,-40],[15,-40],[35,-20],[25,-20],[35,-10],[5,-30],[35,0],[5,-20],[25,0],[5,-10],[15,0]],H:[[35,-40],[35,-30],[35,-20],[5,-40],[25,-20],[35,-10],[5,-30],[15,-20],[35,0],[5,-20],[5,-10],[5,0]],I:[[25,-40],[15,-40],[5,-40],[15,-30],[15,-20],[15,-10],[25,0],[15,0],[5,0]],J:[[35,-40],[25,-40],[35,-30],[35,-20],[35,-10],[25,0],[5,-10],[15,0]],K:[[35,-40],[25,-30],[5,-40],[25,-20],[35,-10],[5,-30],[15,-20],[35,0],[5,-20],[5,-10],[5,0]],L:[[5,-40],[5,-30],[35,0],[5,-20],[25,0],[5,-10],[15,0],[5,0]],M:[[35,-40],[35,-30],[25,-30],[35,-20],[5,-40],[15,-30],[35,-10],[20,-20],[5,-30],[35,0],[5,-20],[5,-10],[5,0]],N:[[35,-40],[35,-30],[35,-20],[5,-40],[15,-30],[25,-20],[35,-10],[5,-30],[35,0],[5,-20],[5,-10],[5,0]],O:[[35,-30],[25,-40],[15,-40],[35,-20],[35,-10],[5,-30],[5,-20],[25,0],[5,-10],[15,0]],P:[[35,-30],[25,-40],[15,-40],[5,-40],[25,-20],[5,-30],[15,-20],[5,-20],[5,-10],[5,0]],Q:[[35,-30],[25,-40],[15,-40],[35,-20],[35,-10],[5,-30],[25,-10],[35,0],[5,-20],[25,0],[5,-10],[15,0]],R:[[35,-30],[25,-40],[15,-40],[5,-40],[25,-20],[35,-10],[5,-30],[15,-20],[35,0],[5,-20],[5,-10],[5,0]],S:[[35,-35],[25,-40],[15,-40],[35,-15],[25,-20],[5,-35],[35,-5],[15,-20],[5,-25],[25,0],[15,0],[5,-5]],T:[[35,-40],[25,-40],[15,-40],[20,-30],[5,-40],[20,-20],[20,-10],[20,0]],U:[[35,-40],[35,-30],[35,-20],[5,-40],[35,-10],[5,-30],[5,-20],[25,0],[5,-10],[15,0]],V:[[35,-40],[35,-30],[35,-20],[5,-40],[5,-30],[25,-10],[5,-20],[15,-10],[20,0]],W:[[35,-40],[35,-30],[20,-40],[35,-20],[20,-30],[5,-40],[35,-10],[20,-20],[5,-30],[35,0],[20,-10],[5,-20],[25,0],[5,-10],[15,0]],X:[[35,-40],[25,-30],[5,-40],[15,-30],[20,-20],[25,-10],[35,0],[15,-10],[5,0]],Y:[[35,-40],[35,-30],[5,-40],[25,-20],[5,-30],[15,-20],[20,-10],[20,0]],Z:[[35,-40],[25,-40],[15,-40],[25,-30],[5,-40],[20,-20],[35,0],[15,-10],[25,0],[15,0],[5,0]],_:[[45,0],[35,0],[25,0],[15,0],[5,0]],a:[[25,-30],[35,-20],[15,-30],[35,-10],[25,-15],[5,-30],[35,0],[15,-15],[25,0],[5,-10],[15,0]],b:[[25,-30],[35,-20],[5,-40],[15,-30],[35,-10],[5,-30],[5,-20],[25,0],[5,-10],[15,0],[5,0]],c:[[35,-30],[25,-30],[15,-30],[35,0],[5,-20],[25,0],[5,-10],[15,0]],d:[[35,-40],[35,-30],[25,-30],[35,-20],[15,-30],[35,-10],[35,0],[5,-20],[25,0],[5,-10],[15,0]],e:[[25,-30],[35,-20],[15,-30],[25,-15],[35,0],[15,-15],[5,-20],[25,0],[5,-10],[15,0]],f:[[25,-40],[15,-40],[25,-20],[5,-30],[15,-20],[5,-20],[5,-10],[5,0]],g:[[35,-30],[25,-30],[35,-20],[15,-30],[35,-10],[25,-10],[35,0],[5,-20],[15,-10],[25,10],[15,10],[5,10]],h:[[5,-40],[25,-20],[35,-10],[5,-30],[15,-20],[35,0],[5,-20],[5,-10],[5,0]],i:[[5,-40],[5,-20],[5,-10],[5,0]],j:[[15,-40],[15,-20],[15,-10],[15,0],[5,10]],k:[[35,-30],[5,-40],[25,-20],[35,-10],[5,-30],[15,-20],[35,0],[5,-20],[5,-10],[5,0]],l:[[5,-40],[5,-30],[5,-20],[5,-10],[15,0]],m:[[35,-30],[45,-20],[25,-30],[45,-10],[15,-30],[25,-20],[45,0],[5,-30],[25,-10],[5,-20],[25,0],[5,-10],[5,0]],n:[[25,-30],[35,-20],[15,-30],[35,-10],[5,-30],[35,0],[5,-20],[5,-10],[5,0]],o:[[25,-30],[35,-20],[15,-30],[35,-10],[5,-20],[25,0],[5,-10],[15,0]],p:[[25,-30],[35,-20],[15,-30],[35,-10],[5,-30],[5,-20],[25,0],[5,-10],[15,0],[5,0],[5,10]],q:[[35,-30],[25,-30],[35,-20],[15,-30],[35,-10],[35,0],[5,-20],[25,0],[35,10],[5,-10],[15,0]],r:[[35,-30],[25,-30],[5,-30],[15,-20],[5,-20],[5,-10],[5,0]],s:[[35,-30],[25,-30],[15,-30],[35,-10],[25,-15],[15,-15],[5,-20],[25,0],[15,0],[5,0]],t:[[25,-30],[5,-40],[15,-30],[5,-30],[5,-20],[25,0],[5,-10],[15,0]],u:[[35,-30],[35,-20],[35,-10],[5,-30],[35,0],[5,-20],[25,0],[5,-10],[15,0]],v:[[35,-30],[35,-20],[5,-30],[25,-10],[5,-20],[15,-10],[20,0]],w:[[35,-30],[35,-20],[20,-30],[35,-10],[20,-20],[5,-30],[35,0],[20,-10],[5,-20],[25,0],[5,-10],[15,0]],x:[[35,-30],[25,-20],[5,-30],[15,-20],[25,-10],[35,0],[15,-10],[5,0]],y:[[35,-30],[35,-20],[35,-10],[5,-30],[25,-10],[35,0],[5,-20],[15,-10],[25,10],[15,10]],z:[[35,-30],[25,-30],[15,-30],[25,-20],[5,-30],[35,0],[15,-10],[25,0],[15,0],[5,0]],0:[[35,-30],[25,-40],[15,-40],[35,-20],[35,-10],[15,-25],[25,-15],[5,-30],[5,-20],[25,0],[5,-10],[15,0]],1:[[15,-40],[15,-30],[5,-30],[15,-20],[15,-10],[15,0]],2:[[35,-35],[25,-40],[35,-25],[15,-40],[25,-20],[5,-35],[15,-20],[35,0],[25,0],[5,-10],[15,0],[5,0]],3:[[25,-40],[35,-30],[15,-40],[5,-40],[25,-20],[35,-10],[15,-20],[25,0],[15,0],[5,0]],4:[[35,-40],[35,-30],[35,-20],[5,-40],[25,-20],[35,-10],[5,-30],[15,-20],[35,0],[5,-20]],5:[[35,-40],[25,-40],[15,-40],[35,-15],[5,-40],[25,-20],[35,-5],[5,-30],[15,-20],[5,-20],[25,0],[15,0],[5,0]],6:[[35,-40],[25,-40],[15,-40],[35,-20],[25,-20],[35,-10],[5,-30],[15,-20],[5,-20],[25,0],[5,-10],[15,0]],7:[[35,-40],[35,-30],[25,-40],[15,-40],[5,-40],[25,-20],[5,-30],[25,-10],[25,0]],8:[[35,-35],[25,-40],[35,-25],[15,-40],[35,-15],[25,-20],[5,-35],[35,-5],[15,-20],[5,-25],[25,0],[5,-15],[15,0],[5,-5]],9:[[35,-30],[25,-40],[15,-40],[35,-20],[25,-20],[35,-10],[5,-30],[15,-20],[5,-20],[25,0],[15,0],[5,0]]},Re=1,Le=function(t,e){this.id=Re++,this.dx=0,this.dy=0,this.x=t,this.y=e,this.status=We.FIREWORK_READY,this.brightness=240,this.r=1,this.g=1,this.b=1,this.start={x:0,y:0},this.previous=0,this.tick=0},We={GRAVITY:7,FRAME_RATE:30,DEPLOYMENT_RATE:25,FIREWORK_SPEED:2,DISPERSION_WIDTH:1,DISPERSION_HEIGHT:2,FIREWORK_PAYLOAD:100,FRAGMENT_SPREAD:15,TEXT_LINE_HEIGHT:60,FIREWORK_READY:0,FIREWORK_LAUNCHED:1,FIREWORK_EXPLODED:2,FIREWORK_FRAGMENT:3,blockPointer:0,fireworks:[],allBlocks:[],updateDisplay:function(t,e,i){if(!this.fireworks.length)return!1;for(var a=this.fireworks.length-1;a>=0;a--){var n=this.fireworks[a];this.displayFirework(t,e,i,n)}return!0},addFireworks:function(t,e){if(!(this.blockPointer>=this.allBlocks.length)){var i=this.fireworks[this.fireworks.length]=new Le(t/2,0),a=this.allBlocks[this.blockPointer][0];a=a/300*this.DISPERSION_HEIGHT;var n=this.allBlocks[this.blockPointer][1];n=(10-n)/100*this.DISPERSION_WIDTH+3.5,this.launchFirework(i,a,n),this.blockPointer++}},launchText:function(t,e,i,a){this.fireworks=[],this.blockPointer=0,t.lineWidth="1.5",t.strokeStyle="rgb(255, 255, 255)";var n=0,r=[],s=0;r[s]=0;for(var o=0;o<a.length;o++){var h=a.charAt(o);if(Fe[h]){for(var c=0,l=0;l<Fe[h].length;l++){var u=Fe[h][l];c=Math.max(c,u[0])}r[s]+=c+40}else n+=this.TEXT_LINE_HEIGHT,r[++s]=0}this.allBlocks=[];var f=n;f+=(i-n)/4;for(var d=0,p=0,v=0;v<a.length;v++){var g=a.charAt(v);if(Fe[g]){for(var y=0,m=0;m<Fe[g].length;m++){var k=Fe[g][m];this.allBlocks[this.allBlocks.length]=[k[0]+d-r[p]/2,k[1]-f],y=Math.max(y,k[0])}d+=y+40}else p++,f-=this.TEXT_LINE_HEIGHT,d=0}this.addFireworks(e,0)},launchFirework:function(t,e,i){t.dx=e,t.dy=i,t.status=this.FIREWORK_LAUNCHED},disperseFirework:function(t,e){t.dx=e*(.5-Math.random()),t.dy=e*(.5-Math.random())+1},explodeFirework:function(t,e,i){e.status=this.FIREWORK_EXPLODED,e.r=Math.random()/2+.5,e.g=Math.random()/2+.5,e.b=Math.random()/2+.5,e.brightness=2,t.strokeStyle="rgb(200, 200, 200)";for(var a=Math.random()*this.FIREWORK_PAYLOAD,n=0;n<a;n++){var r=this.fireworks[this.fireworks.length]=new Le;r.x=e.x,r.y=e.y,r.r=e.r,r.g=e.g,r.b=e.b,r.status=this.FIREWORK_FRAGMENT,this.disperseFirework(r,Math.random()*this.FRAGMENT_SPREAD)}},destroyFirework:function(t){var e=this.fireworks.findIndex((function(e){return e.id===t.id}));-1!==e&&this.fireworks.splice(e,1)},displayFirework:function(t,e,i,a,n){if(a.y<0&&this.destroyFirework(a),a.status===this.FIREWORK_EXPLODED){t.beginPath();var r=a.tick,s="rgba(".concat(200-r,", ").concat(200-r,", ").concat(200-r,", ").concat(1-r/200,")");t.fillStyle=s;var o=2*Math.PI;return t.arc(a.x,i-a.y,5,0,o,!0),t.fill(),a.tick++,void(a.tick>=120&&this.destroyFirework(a))}a.colour="rgb(120, 120, 120)",t.strokeStyle=a.colour;var h={x:0,y:-.05};a.status===this.FIREWORK_FRAGMENT&&(h.y=this.GRAVITY/-100,a.colour="rgb("+Math.round(a.r*a.brightness)+", "+Math.round(a.g*a.brightness)+", "+Math.round(a.b*a.brightness)+")",t.strokeStyle=a.colour,a.brightness-=5,a.brightness<100&&this.destroyFirework(a)),a.dy<-1&&a.status===this.FIREWORK_LAUNCHED&&this.explodeFirework(t,a),a.start={x:a.x,y:a.y},a.dx+=h.x*this.FIREWORK_SPEED,a.dy+=h.y*this.FIREWORK_SPEED,a.x+=a.dx*this.FIREWORK_SPEED,a.y+=a.dy*this.FIREWORK_SPEED,a.previous&&(t.beginPath(),t.moveTo(a.previous.x,i-a.previous.y),t.lineTo(a.x,i-a.y),t.stroke(),t.closePath()),a.previous={x:a.start.x,y:a.start.y}}},Ae=function(){function t(e){Object(f.a)(this,t);this.id="7e157ba1",this.effect=e,this.display=void 0,this.lastTime=Date.now()}return Object(d.a)(t,[{key:"postInit",value:function(){var t=this.effect,e=this.id;this.words=t.getConfigValue(e,"text","awesome").split(" ").map((function(t){return t.trim()})).filter((function(t){return t.length})),this.currentWord=0}},{key:"getDescriptor",value:function(){return{name:"Laser Text",id:"7e157ba1"}}},{key:"draw",value:function(){var t=this.effect,e=t.ctx,i=t.width,a=t.height;if(!this.display)return this.display=We,this.display.launchText(e,i,a,this.words[0]),void(this.msgIndex=0);var n=Date.now();if(!this.display.updateDisplay(e,i,a))return this.currentWord=(this.currentWord+1)%this.words.length,void this.display.launchText(e,i,a,this.words[this.currentWord]);n-this.lastTime>40&&(this.lastTime=0,this.display.addFireworks(i,a))}},{key:"renderTextOption",value:function(){var t=this,e=this.id,i=this.effect,a=i.getConfigValue(e,"text")||"";return n.a.createElement(Te.a,{placeholder:"Text to firework",ref:function(e){return t.input=e},defaultValue:a,onPressEnter:function(a){t.input.blur(),i.changeConfig(i.getConfigName(e,"text"),a.target.value)}})}},{key:"option",value:function(){return[this.renderTextOption()]}}]),t}(),Ye=function(){function t(e){Object(f.a)(this,t);this.effect=e,this.id="28775d10"}return Object(d.a)(t,[{key:"postInit",value:function(){var t=this.effect,e=this.id;this.words=t.getConfigValue(e,"text","awesome").split(" ").map((function(t){return t.trim()})).filter((function(t){return t.length})),this.makeWord(0)}},{key:"getDescriptor",value:function(){return{id:"28775d10",name:"Spew Text"}}},{key:"draw",value:function(){var t=this,e=this.effect,i=e.ctx,a=e.width,n=e.height,r=this.words;this.tick=Date.now();var s=parseInt(this.tick/6e3)%r.length;this.currentWord===s&&this.chars||this.makeWord(s),i.fillStyle="#00000010",i.fillRect(0,0,a,n),this.chars.forEach((function(e,r){return t.firework(i,a,n,r,e)}))}},{key:"makeWord",value:function(t){var e=this,i=this.effect.width,a=this.words,n=i<400?200:300,r=i<400?55:99;t%=a.length,this.currentWord=t,this.chars=Object(E.a)(a[t]).map((function(t){return e.makeChar(n,r,t)}))}},{key:"makeChar",value:function(t,e,i){var a=document.createElement("canvas");a.width=t,a.height=t;var n=a.getContext("2d");n.font="bold ".concat(t,"px Arial"),n.fillStyle="white",n.textBaseline="middle",n.textAlign="center",n.fillText(i,t/2,t/2);for(var r=n.getImageData(0,0,t,t),s=[],o=0;s.length<e;o++){var h=t*Math.random(),c=t*Math.random(),l=parseInt(c)*t*4+4*parseInt(h);r.data[l]&&s.push([h-t/2,c-t/2])}return s}},{key:"firework",value:function(t,e,i,a,n){var r=this.tick;r-=200*a;var s=a+this.chars.length*parseInt(r-r%6e3);r=r%6e3/6e3;var o=(a+1)*e/(1+this.chars.length);o+=100*Math.min(.33,r)*Math.sin(s);var h=.5*i;h+=Math.sin(4547.411*s)*i*.1,r<.33?this.rocket(t,o,h,s,3*r,i):this.explosion(t,n,o,h,s,Math.min(1,2*Math.max(0,r-.33)),i)}},{key:"rocket",value:function(t,e,i,a,n,r){t.fillStyle="white";var s=2-2*n+16*Math.pow(n,15*n);i=r-i*n,this.circle(t,e,i,s)}},{key:"explosion",value:function(t,e,i,a,n,r,s){var o=this,h=r*r*r*20,c=1*Math.sin(n)+3;c=r<.5?(r+.5)*r*c:c-r*c,t.fillStyle="hsl(".concat(55*n,", 55%, 55%)"),e.forEach((function(e,l){l%20===0&&(t.fillStyle="hsl(".concat(55*n,", 55%, ").concat(55+r*Math.sin(55*r+l)*45,"%)")),o.circle(t,r*e[0]+i,s-a+r*e[1]+h,c)}))}},{key:"circle",value:function(t,e,i,a){t.beginPath(),t.ellipse(e,i,a,a,0,0,6.283),t.fill()}},{key:"renderTextOption",value:function(){var t=this,e=this.id,i=this.effect,a=i.getConfigValue(e,"text")||"";return n.a.createElement(Te.a,{placeholder:"Text to firework",ref:function(e){return t.input=e},defaultValue:a,onPressEnter:function(a){t.input.blur(),i.changeConfig(i.getConfigName(e,"text"),a.target.value)}})}},{key:"option",value:function(){return[this.renderTextOption()]}}]),t}(),Xe=function(){function t(e,i,a){Object(f.a)(this,t),this.x=this.oldX=e,this.y=this.oldY=i,this.color="hsl("+360*Math.random()+", 100%, 50%)",this.lineWidth=_(2,4)}return Object(d.a)(t,[{key:"getVelocity",value:function(){return{x:this.x-this.oldX,y:this.y-this.oldY}}},{key:"integrate",value:function(){var t=this.getVelocity();this.oldX=this.x,this.oldY=this.y,this.x+=.999*t.x,this.y+=.999*t.y}},{key:"move",value:function(t,e){this.x+=t,this.y+=e}},{key:"bounce",value:function(t){if(this.y>t){var e=this.getVelocity();this.oldY=t,this.y=this.oldY-.3*e.y}}},{key:"draw",value:function(t){t.strokeStyle=this.color,t.lineWidth=4,t.beginPath(),t.moveTo(this.oldX,this.oldY),t.lineTo(this.x,this.y),t.stroke()}}]),t}(),Ve=function(){function t(e){Object(f.a)(this,t),this.effect=e,this.config={count:1e3,spread:4,gravity:.3},this.drops=[]}return Object(d.a)(t,[{key:"getDescriptor",value:function(){return{id:"ba7eef98",name:"Spray"}}},{key:"draw",value:function(t){var e=this.effect,i=e.ctx,a=e.width,n=e.height,r=this.drops,s=this.config,o=s.spread,h=s.gravity,c=this.config.count;t||(c/=2),r.length<c?this.tick=0:(this.tick++,this.tick>120&&(r.length=0));for(var l=0;l<5;l++)if(r.length<c){var u=new Xe(a*Math.random(.3,.7),n);u.move(o/2-Math.random()*o,-2*Math.random()-15),r.push(u)}for(var f=0;f<r.length;f++)r[f].move(0,h),r[f].integrate(),r[f].bounce(),r[f].draw(i)}}]),t}(),ze=[],Ne=function(){function t(e){Object(f.a)(this,t),this.effect=e;for(var i=0;i<5;i++){for(var a={sparks:[]},n=0;n<50;n++){var r={vx:5*Math.random()+.5,vy:5*Math.random()+.5,weight:.3*Math.random()+.03,red:Math.floor(2*Math.random()),green:Math.floor(2*Math.random()),blue:Math.floor(2*Math.random())};Math.random()>.5&&(r.vx=-r.vx),Math.random()>.5&&(r.vy=-r.vy),a.sparks.push(r)}ze.push(a),this.resetFirework(a)}}return Object(d.a)(t,[{key:"getDescriptor",value:function(){return{id:"b19b6683",name:"Star"}}},{key:"resetFirework",value:function(t){var e=this.effect,i=e.width,a=e.height;t.x=Math.floor(Math.random()*i),t.y=a,t.age=0,t.phase="fly"}},{key:"draw",value:function(){var t=this,e=this.effect.ctx;ze.forEach((function(i,a){if("explode"===i.phase)i.sparks.forEach((function(t){for(var a=0;a<10;a++){var n=i.age+a,r=i.x+t.vx*n,s=i.y+t.vy*n+t.weight*n*t.weight*n,o=20*a-2*i.age,h=Math.floor(t.red*o),c=Math.floor(t.green*o),l=Math.floor(t.blue*o);e.beginPath(),e.fillStyle="rgba("+h+","+c+","+l+",1)",e.rect(r,s,4,4),e.fill()}})),i.age++,i.age>100&&Math.random()<.05&&t.resetFirework(i);else{i.y=i.y-10;for(var n=0;n<15;n++)e.beginPath(),e.fillStyle="rgba("+50*a+","+17*n+",0,1)",e.rect(i.x+Math.random()*n-n/2,i.y+4*n,4,4),e.fill();(Math.random()<.001||i.y<200)&&(i.phase="explode")}}))}}]),t}(),_e=function t(e,i,a,n,r){Object(f.a)(this,t),this.x=e,this.y=i,this.vx=a,this.vy=n,this.age=r},Be=function(){function t(e){Object(f.a)(this,t),this.effect=e,this.t0=Date.now(),this.positions=[],this.particles=[],this.particles_i=0}return Object(d.a)(t,[{key:"getDescriptor",value:function(){return{name:"Emit"}}},{key:"postInit",value:function(){var t=this.effect,e=t.width,i=t.height;this.positions=[],this.positions.push({x:_(2*e/5,4*e/5),y:_(2*i/5,4*i/5)})}},{key:"draw",value:function(){var t=this,e=this.positions,i=this.particles,a=this.effect,n=a.ctx,r=a.canvas,s=(a.center,Date.now()),o=(s-this.t0)/1e3;this.t0=s;var h=r.width,c=r.height;e.forEach((function(e){return t.emitParticles(e.x,e.y)})),n.fillStyle="rgba(0, 0, 0, 0.4)",n.fillRect(0,0,h,c);for(var l=n.getImageData(0,0,h,c),u=l.data,f=i.length-1;f>=0;f--){var d=i[f];if(d.age+=o,d.age>5)i.splice(f,1);else{d.vx*=.999,d.x+=d.vx*o,d.vy=.999*(d.vy+10*o),d.y+=d.vy*o;var p=~~d.x,v=~~d.y;if(p<0||p>=h||v<0||v>=c)i.splice(f,1);else{var g=4*(p+v*h);u[g]+=120,u[g+1]+=55,u[g+2]+=10,u[g+3]=255}}}n.putImageData(l,0,0)}},{key:"fuzzy",value:function(t,e){return(e||0)+(Math.random()-.5)*t*2}},{key:"emitParticles",value:function(t,e){var i=this.particles;if(!(i.length>=1e5))for(var a=0;a<250;a++){var n=this.fuzzy(Math.PI),r=_(0,100),s=new _e(t,e,Math.cos(n)*r,Math.sin(n)*r,Math.random());this.particles_i=(this.particles_i+1)%1e5,i.length<1e5?i.push(s):i[this.particles_i]=s}}},{key:"createParticle",value:function(t,e){var i=this.fuzzy(Math.PI),a=_(0,100);return new _e(t,e,Math.cos(i)*a,Math.sin(i)*a,Math.random())}}]),t}(),Ge=function(){function t(e,i,a,n){Object(f.a)(this,t),this.x=i,this.y=a,this.coordLast=[{x:i,y:a},{x:i,y:a},{x:i,y:a}],this.angle=_(0,360),this.speed=_(e.partSpeed-e.partSpeedVariance<=0?1:e.partSpeed-e.partSpeedVariance,e.partSpeed+e.partSpeedVariance),this.friction=1-e.partFriction/100,this.gravity=e.partGravity/2,this.hue=_(n-e.hueVariance,n+e.hueVariance),this.brightness=_(50,80),this.alpha=_(40,100)/100,this.decay=_(10,50)/1e3,this.wind=(_(0,e.partWind)-e.partWind/2)/25,this.lineWidth=e.lineWidth}return Object(d.a)(t,[{key:"update",value:function(t){var e=this.angle*Math.PI/180,i=Math.cos(e)*this.speed,a=Math.sin(e)*this.speed+this.gravity;return this.speed*=this.friction,this.coordLast[2].x=this.coordLast[1].x,this.coordLast[2].y=this.coordLast[1].y,this.coordLast[1].x=this.coordLast[0].x,this.coordLast[1].y=this.coordLast[0].y,this.coordLast[0].x=this.x,this.coordLast[0].y=this.y,this.x+=i*t,this.y+=a*t,this.angle+=this.wind,this.alpha-=this.decay,!(this.alpha<.05)}},{key:"draw",value:function(t){var e=_(1,3)-1;if(t.beginPath(),t.moveTo(Math.round(this.coordLast[e].x),Math.round(this.coordLast[e].y)),t.lineTo(Math.round(this.x),Math.round(this.y)),t.closePath(),t.strokeStyle="hsla("+this.hue+", 100%, "+this.brightness+"%, "+this.alpha+")",t.stroke(),this.flickerDensity>0){var i=50-this.flickerDensity;if(_(0,i)===i){t.beginPath(),t.arc(Math.round(this.x),Math.round(this.y),_(this.lineWidth,this.lineWidth+3)/2,0,2*Math.PI,!1),t.closePath();var a=_(50,100)/100;t.fillStyle="hsla("+this.hue+", 100%, "+this.brightness+"%, "+a+")",t.fill()}}}}]),t}(),qe=function(){function t(e,i,a,n,r){Object(f.a)(this,t),this.x=i,this.y=a,this.startX=i,this.startY=a,this.hitX=!1,this.hitY=!1,this.coordLast=[{x:i,y:a},{x:i,y:a},{x:i,y:a}],this.targetX=n,this.targetY=r,this.speed=e.fworkSpeed,this.angle=Math.atan2(r-a,n-i),this.shockwaveAngle=Math.atan2(r-a,n-i)+Math.PI/180*90,this.acceleration=e.fworkAccel/100,this.hue=_(e.hueMin,e.hueMax),this.brightness=_(50,80),this.alpha=_(50,100)/100,this.lineWidth=e.lineWidth,this.targetRadius=1}return Object(d.a)(t,[{key:"update",value:function(t){var e=Math.cos(this.angle)*this.speed,i=Math.sin(this.angle)*this.speed;return this.speed*=1+this.acceleration,this.coordLast[2].x=this.coordLast[1].x,this.coordLast[2].y=this.coordLast[1].y,this.coordLast[1].x=this.coordLast[0].x,this.coordLast[1].y=this.coordLast[0].y,this.coordLast[0].x=this.x,this.coordLast[0].y=this.y,this.showTarget&&(this.targetRadius<8?this.targetRadius+=.25*t:this.targetRadius=1*t),this.startX>=this.targetX?this.x+e<=this.targetX?(this.x=this.targetX,this.hitX=!0):this.x+=e*t:this.x+e>=this.targetX?(this.x=this.targetX,this.hitX=!0):this.x+=e*t,this.startY>=this.targetY?this.y+i<=this.targetY?(this.y=this.targetY,this.hitY=!0):this.y+=i*t:this.y+i>=this.targetY?(this.y=this.targetY,this.hitY=!0):this.y+=i*t,!this.hitX||!this.hitY}},{key:"draw",value:function(t){t.lineWidth=this.lineWidth;var e=_(1,3)-1;t.beginPath(),t.moveTo(Math.round(this.coordLast[e].x),Math.round(this.coordLast[e].y)),t.lineTo(Math.round(this.x),Math.round(this.y)),t.closePath(),t.strokeStyle="hsla("+this.hue+", 100%, "+this.brightness+"%, "+this.alpha+")",t.stroke(),this.showTarget&&(t.save(),t.beginPath(),t.arc(Math.round(this.targetX),Math.round(this.targetY),this.targetRadius,0,2*Math.PI,!1),t.closePath(),t.lineWidth=1,t.stroke(),t.restore()),this.showShockwave&&(t.save(),t.translate(Math.round(this.x),Math.round(this.y)),t.rotate(this.shockwaveAngle),t.beginPath(),t.arc(0,0,this.speed/5*1,0,Math.PI,!0),t.strokeStyle="hsla("+this.hue+", 100%, "+this.brightness+"%, "+_(25,60)/100+")",t.lineWidth=this.lineWidth,t.stroke(),t.restore())}}]),t}(),He=[{name:"Default",preset:{fworkSpeed:2,fworkAccel:4,showShockwave:!1,showTarget:!0,partCount:30,partSpeed:5,partSpeedVariance:10,partWind:50,partFriction:5,partGravity:1,flickerDensity:20,hueMin:150,hueMax:200,hueVariance:30,lineWidth:1,clearAlpha:25}},{name:"Anti Gravity",preset:{fworkSpeed:4,fworkAccel:10,showShockwave:!0,showTarget:!1,partCount:150,partSpeed:5,partSpeedVariance:10,partWind:10,partFriction:10,partGravity:-10,flickerDensity:30,hueMin:0,hueMax:360,hueVariance:30,lineWidth:1,clearAlpha:50}},{name:"Battle Field",preset:{fworkSpeed:10,fworkAccel:20,showShockwave:!0,showTarget:!0,partCount:200,partSpeed:30,partSpeedVariance:5,partWind:0,partFriction:5,partGravity:0,flickerDensity:0,hueMin:20,hueMax:30,hueVariance:10,lineWidth:1,clearAlpha:40}},{name:"Mega Blast",preset:{fworkSpeed:3,fworkAccel:3,showShockwave:!0,showTarget:!0,partCount:500,partSpeed:50,partSpeedVariance:5,partWind:0,partFriction:0,partGravity:0,flickerDensity:0,hueMin:0,hueMax:360,hueVariance:30,lineWidth:20,clearAlpha:20}},{name:"Nimble",preset:{fworkSpeed:10,fworkAccel:50,showShockwave:!1,showTarget:!1,partCount:120,partSpeed:10,partSpeedVariance:10,partWind:100,partFriction:50,partGravity:0,flickerDensity:20,hueMin:0,hueMax:360,hueVariance:30,lineWidth:1,clearAlpha:80}},{name:"Slow Launch",preset:{fworkSpeed:2,fworkAccel:2,showShockwave:!1,showTarget:!1,partCount:200,partSpeed:10,partSpeedVariance:0,partWind:100,partFriction:0,partGravity:2,flickerDensity:50,hueMin:0,hueMax:360,hueVariance:20,lineWidth:4,clearAlpha:10}},{name:"Perma Trail",preset:{fworkSpeed:4,fworkAccel:10,showShockwave:!1,showTarget:!1,partCount:150,partSpeed:10,partSpeedVariance:10,partWind:100,partFriction:3,partGravity:0,flickerDensity:0,hueMin:0,hueMax:360,hueVariance:20,lineWidth:1,clearAlpha:0}},{name:"Lighning",preset:{fworkSpeed:1,fworkAccel:50,showShockwave:!1,showTarget:!1,partCount:5,partSpeed:100,partSpeedVariance:0,partWind:0,partFriction:0,partGravity:0,flickerDensity:0,hueMin:0,hueMax:360,hueVariance:30,lineWidth:1,clearAlpha:100}}],Ke=function(){function t(e,i){Object(f.a)(this,t),this.id="289ba10e",this.effect=e,this.dt=0,this.oldTime=Date.now(),this.particles=[],this.fireworks=[],this.presetIndex=i.preset,this.createFireworks()}return Object(d.a)(t,[{key:"getDescriptor",value:function(){var t=this.presetIndex;return{id:"289ba10e",name:t?He[t%He.length].name:"Brilliant",fireworks:He.map((function(t){return t.name}))}}},{key:"postInit",value:function(){var t=He[0],e=this.id,i=this.effect;t.fworkSpeed=i.getConfigValue(e,"fworkSpeed",2),t.fworkAccel=i.getConfigValue(e,"fworkAccel",4),t.partCount=i.getConfigValue(e,"partCount",30),t.partSpeed=i.getConfigValue(e,"partSpeed",5),t.partSpeedVariance=i.getConfigValue(e,"partSpeedVariance",10),t.partWind=i.getConfigValue(e,"partWind",50),t.partFriction=i.getConfigValue(e,"partFriction",5),t.partGravity=i.getConfigValue(e,"partGravity",1),t.flickerDensity=i.getConfigValue(e,"flickerDensity",20),t.hueMin=i.getConfigValue(e,"hueMin",150),t.hueMax=i.getConfigValue(e,"hueMax",200),t.hueVariance=i.getConfigValue(e,"hueVariance",30),t.lineWidth=i.getConfigValue(e,"lineWidth",1),t.clearAlpha=i.getConfigValue(e,"clearAlpha",25)}},{key:"draw",value:function(){var t=this.fireworks,e=this.effect.ctx;e.lineCap="round",e.lineJoin="round",this.updateDelta(),this.updateFireworks(),this.updateParticles(),this.drawFireworks(e),this.drawParticles(e),t.length||this.createFireworks()}},{key:"event",value:function(t,e){var i=this.effect,a=i.width,n=i.height;switch(t){case"event@mouse-down":this.trackMouse=!0;break;case"event@mouse-up":this.trackMouse=!1;break;case"event@mouse-moved":this.center=e,this.trackMouse&&this.fireworks.push(new qe(this.getPreset(),a/2,n,this.center.x,this.center.y))}}},{key:"updateDelta",value:function(){var t=Date.now();this.dt=(t-this.oldTime)/16,this.dt=this.dt>5?5:this.dt,this.oldTime=t}},{key:"getPreset",value:function(){return He[this.presetIndex%He.length].preset}},{key:"createParticles",value:function(t,e,i,a){for(var n=t.partCount;n--;)this.particles.push(new Ge(t,e,i,a))}},{key:"updateParticles",value:function(){for(var t=this.particles.length;t--;){this.particles[t].update(this.dt)||this.particles.splice(t,1)}}},{key:"drawParticles",value:function(t){for(var e=this.particles.length;e--;){this.particles[e].draw(t)}}},{key:"createFireworks",value:function(){for(var t=this.effect,e=t.width,i=t.height,a=this.getPreset(),n=0;n<3;n++)this.fireworks.push(new qe(a,e/2,i,_(50,e-50),_(50,i)-50))}},{key:"updateFireworks",value:function(){for(var t=this.fireworks.length;t--;){var e=this.fireworks[t];e.update(this.dt)||(this.fireworks.splice(t,1),this.createParticles(this.getPreset(),e.targetX,e.targetY,e.hue))}}},{key:"drawFireworks",value:function(t){for(var e=this.fireworks.length;e--;){this.fireworks[e].draw(t)}}},{key:"option",value:function(){if(0!==this.presetIndex)return[];var t=this.id,e=this.effect;return[e.renderOption(e.getConfigName(t,"fworkSpeed"),"Firework Speed",1,10,1,2),e.renderOption(e.getConfigName(t,"fworkAccel"),"Firework Accellerator",0,50,1,4),e.renderOption(e.getConfigName(t,"partCount"),"Particle Count",0,500,1,30),e.renderOption(e.getConfigName(t,"partSpeed"),"Particle Speed",1,100,1,5),e.renderOption(e.getConfigName(t,"partSpeedVariance"),"Particle Speed Variance",0,50,1,10),e.renderOption(e.getConfigName(t,"partWind"),"Particle Wind",0,100,1,50),e.renderOption(e.getConfigName(t,"partFriction"),"Particle Friction",0,50,1,5),e.renderOption(e.getConfigName(t,"partGravity"),"Particle Gravity",-20,20,1,1),e.renderOption(e.getConfigName(t,"flickerDensity"),"Particle Flicker Density",0,50,1,20),e.renderOption(e.getConfigName(t,"hueMin"),"Hue Minimum",0,360,1,150),e.renderOption(e.getConfigName(t,"hueMax"),"Hue Maximum",0,360,1,200),e.renderOption(e.getConfigName(t,"hueVariance"),"Hue Variance",0,180,1,30),e.renderOption(e.getConfigName(t,"lineWidth"),"Line Width",1,20,1,1),e.renderOption(e.getConfigName(t,"clearAlpha"),"Clear Alpha",0,100,1,25)]}}]),t}(),Ue={toDeg:180/Math.PI,toRad:Math.PI/180,halfPI:Math.PI/2,twoPI:2*Math.PI,dist:function(t,e){return Math.sqrt(t*t+e*e)},pointDist:function(t,e,i,a){var n=i-t,r=a-e;return Math.sqrt(n*n+r*r)},angle:function(t,e){return Ue.halfPI+Math.atan2(e,t)},pointAngle:function(t,e,i,a){return Ue.halfPI+Math.atan2(a-e,i-t)},splitVector:function(t,e){return{x:Math.sin(e)*t,y:-Math.cos(e)*t}},random:function(t,e){return Math.random()*(e-t)+t},randomInt:function(t,e){return(Math.random()*(e-t+1)|0)+t},randomChoice:function(t){if(Array.isArray(t))return t[Math.random()*t.length|0]},clamp:function(t,e,i){return Math.min(Math.max(t,e),i)}},Je=window.innerWidth<=640,Qe=window.innerWidth>800,Ze=function(){var t=navigator.hardwareConcurrency;return!!t&&t>=(window.innerWidth<=1024?4:8)}(),$e=1;var ti={Red:"#ff0043",Green:"#14fc56",Blue:"#1e7fff",Purple:"#e60aff",Gold:"#ffbf36",White:"#ffffff"},ei="_INVISIBLE_",ii=2*Math.PI,ai=.5*Math.PI,ni={_listeners:new Set,_dispatch:function(t){var e=this;this._listeners.forEach((function(i){return i(e.state,t)}))},state:{paused:!0,soundEnabled:!1,menuOpen:!1,openHelpTopic:null,config:{quality:String(Ze?3:2),shell:"Random",size:Qe?"3":"2",autoLaunch:!0,finale:!1,skyLighting:"2",hideControls:!1,longExposure:!1,scaleFactor:Je?.9:1}},setState:function(t){var e=this.state;this.state=Object.assign({},this.state,t),this._dispatch(e),this.persist()},subscribe:function(t){var e=this;return this._listeners.add(t),function(){return e._listeners.remove(t)}},load:function(){var t=localStorage.getItem("cm_fireworks_data");if(t){var e=JSON.parse(t),i=e.schemaVersion,a=e.data,n=this.state.config;switch(i){case"1.1":n.quality=a.quality,n.size=a.size,n.skyLighting=a.skyLighting;break;case"1.2":n.quality=a.quality,n.size=a.size,n.skyLighting=a.skyLighting,n.scaleFactor=a.scaleFactor;break;default:throw new Error("version switch should be exhaustive")}console.log("Loaded config (schema version ".concat(i,")"))}else if("1"===localStorage.getItem("schemaVersion")){var r;try{var s=localStorage.getItem("configSize");r="string"===typeof s&&JSON.parse(s)}catch(h){return console.log("Recovered from error parsing saved config:"),void console.error(h)}var o=parseInt(r,10);o>=0&&o<=4&&(this.state.config.size=String(o))}},persist:function(){var t=this.state.config;localStorage.setItem("cm_fireworks_data",JSON.stringify({schemaVersion:"1.2",data:{quality:t.quality,size:t.size,skyLighting:t.skyLighting,scaleFactor:t.scaleFactor}}))}};ni.load();var ri=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ni.state;return!t.paused&&!t.menuOpen},si=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ni.state;return t.soundEnabled},oi=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ni.state;return ri(t)&&si(t)},hi=function(){return ni.state.config.shell},ci=function(){return+ni.state.config.size},li=function(){return+ni.state.config.skyLighting};ni.subscribe((function(t,e){var i=oi(t);i!==oi(e)&&(i?ea.resumeAll():ea.pauseAll())}));var ui,fi=Object.keys(ti).map((function(t){return ti[t]})),di=[].concat(Object(E.a)(fi),[ei]),pi=(di.reduce((function(t,e,i){return t[e]=i,t}),{}),{});function vi(){return fi[Math.random()*fi.length|0]}function gi(t){var e=t&&t.notSame,i=t&&t.notColor,a=t&&t.limitWhite,n=vi();if(a&&n===ti.White&&Math.random()<.6&&(n=vi()),e)for(;n===ui;)n=vi();else if(i)for(;n===i;)n=vi();return ui=n,n}function yi(){return Math.random()<.5?ti.Gold:ti.White}function mi(t){return t===ti.White||t===ti.Gold?gi({notColor:t}):yi()}fi.forEach((function(t){pi[t]={r:parseInt(t.substr(1,2),16),g:parseInt(t.substr(3,2),16),b:parseInt(t.substr(5,2),16)}}));var ki=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=Math.random()<.25,i=Math.random()<.72,a=i?gi({limitWhite:!0}):[gi(),gi({notSame:!0})],n=i&&Math.random()<.42,r=n&&mi(a),s=i&&(Math.random()<.2||a===ti.White)?r||gi({notColor:a,limitWhite:!0}):null,o=!n&&a!==ti.White&&Math.random()<.42,h=e?1.1:1.25;return{shellSize:t,spreadSize:300+100*t,starLife:900+200*t,starDensity:h,color:a,secondColor:s,glitter:e?"light":"",glitterColor:yi(),pistil:n,pistilColor:r,streamers:o}},wi=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=gi(),i=Math.random()<.75;return{shellSize:t,ring:!0,color:e,spreadSize:300+100*t,starLife:900+200*t,starCount:2.2*ii*(t+1),pistil:i,pistilColor:mi(e),glitter:i?"":"light",glitterColor:e===ti.Gold?ti.Gold:ti.White,streamers:Math.random()<.3}};function xi(){return Math.random()<.5?"Crysanthemum":Ci[Math.random()*(Ci.length-1)+1|0]}function bi(t){return Ii[xi()](t)}function Mi(t){return Ii[hi()](t)}var Si=["Falling Leaves","Floral","Willow"];function Oi(){var t="Random"===hi(),e=t?xi():hi();if(t)for(;Si.includes(e);)e=xi();return Ii[e]}var Ii={Random:bi,Crackle:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=Math.random()<.75?ti.Gold:gi();return{shellSize:t,spreadSize:380+75*t,starDensity:1,starLife:600+100*t,starLifeVariation:.32,glitter:"light",glitterColor:ti.Gold,color:e,crackle:!0,pistil:Math.random()<.65,pistilColor:mi(e)}},Crossette:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=gi({limitWhite:!0});return{shellSize:t,spreadSize:300+100*t,starLife:750+160*t,starLifeVariation:.4,starDensity:.85,color:e,crossette:!0,pistil:Math.random()<.5,pistilColor:mi(e)}},Crysanthemum:ki,"Falling Leaves":function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return{shellSize:t,color:ei,spreadSize:300+120*t,starDensity:.12,starLife:500+50*t,starLifeVariation:.5,glitter:"medium",glitterColor:ti.Gold,fallingLeaves:!0}},Floral:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return{shellSize:t,spreadSize:300+120*t,starDensity:.12,starLife:500+50*t,starLifeVariation:.5,color:Math.random()<.65?"random":Math.random()<.15?gi():[gi(),gi({notSame:!0})],floral:!0}},Ghost:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=ki(t);e.starLife*=1.5;var i=gi({notColor:ti.White});e.streamers=!0;var a=Math.random()<.42;a&&mi(i);return e.color=ei,e.secondColor=i,e.glitter="",e},"Horse Tail":function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=gi();return{shellSize:t,horsetail:!0,color:e,spreadSize:250+38*t,starDensity:.9,starLife:2500+300*t,glitter:"medium",glitterColor:Math.random()<.5?yi():e,strobe:e===ti.White}},Palm:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=gi(),i=Math.random()<.5;return{shellSize:t,color:e,spreadSize:250+75*t,starDensity:i?.15:.4,starLife:1800+200*t,glitter:i?"thick":"heavy"}},Ring:wi,Strobe:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=gi({limitWhite:!0});return{shellSize:t,spreadSize:280+92*t,starLife:1100+200*t,starLifeVariation:.4,starDensity:1.1,color:e,glitter:"light",glitterColor:ti.White,strobe:!0,strobeColor:Math.random()<.5?ti.White:null,pistil:Math.random()<.5,pistilColor:mi(e)}},Willow:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return{shellSize:t,spreadSize:300+100*t,starDensity:.6,starLife:3e3+300*t,glitter:"willow",glitterColor:ti.Gold,color:ei}}},Ci=Object.keys(Ii);function Ei(){!function(t){var e,i=ni.state.paused;i!==(e="boolean"===typeof t?t:!i)&&ni.setState({paused:e})}(!1)}function Di(t){return.64*t+.18}function ji(t){return.75*t}function Pi(){var t=ci(),e=Math.min(2.5,t),i=Math.random()*e,a=t-i,n=0===e?Math.random():1-i/e,r=Math.random()*(1-.65*n)*.5;return{size:a,x:Di(Math.random()<.5?.5-r:.5+r),height:ji(n)}}function Ti(){var t=Pi(),e=new Ji(Mi(t.size));e.launch(t.x,t.height);var i=e.starLife;return e.fallingLeaves&&(i=4600),900+600*Math.random()+i}function Fi(){var t=Pi(),e=Pi(),i=new Ji(Mi(t.size)),a=new Ji(Mi(e.size)),n=.2*Math.random()-.1,r=.2*Math.random()-.1;i.launch(.3+n,t.height),setTimeout((function(){a.launch(.7+r,e.height)}),100);var s=Math.max(i.starLife,a.starLife);return(i.fallingLeaves||a.fallingLeaves)&&(s=4600),900+600*Math.random()+s}function Ri(){var t=Oi(),e=ci(),i=Math.max(0,e-1.25),a=.08*Math.random()-.04;new Ji(t(e)).launch(.5+a,.7);var n=1e3+400*Math.random(),r=1e3+400*Math.random();return setTimeout((function(){var e=.08*Math.random()-.04;new Ji(t(i)).launch(.2+e,.1)}),n),setTimeout((function(){var e=.08*Math.random()-.04;new Ji(t(i)).launch(.8+e,.1)}),r),4e3}function Li(){var t=Qe?7:4,e=ci(),i=Math.max(0,e-3),a=Math.random()<.78?ki:wi,n=bi;function r(t,r){var s="Random"===hi()?r?n:a:Ii[hi()],o=t<=.5?t/.5:(1-t)/.5;new Ji(s(r?e:i)).launch(t,r?.75:.42*o)}for(var s=0,o=0;s<=t;)s===t?setTimeout((function(){r(.5,!0)}),o):function(){var e=s/t*.5,i=30*Math.random()+30;setTimeout((function(){r(e,!1)}),o),setTimeout((function(){r(1-e,!1)}),o+i)}(),s++,o+=200;return 3400+250*t}function Wi(){Wi.lastCalled=Date.now();var t=Qe?11:5,e=Qe?3:1,i=Math.max(0,ci()-2),a=Math.random()<.78?ki:wi,n=Oi();function r(t,e){var r="Random"===hi()?e?n:a:Ii[hi()],s=new Ji(r(i)),o=(Math.cos(5*t*Math.PI+ai)+1)/2;s.launch(t,.75*o)}for(var s=0,o=0;s<t;)0===s?(r(.5,!1),s+=1):function(){var i=(s+1)/t/2,a=30*Math.random()+30,n=s===e;setTimeout((function(){r(.5+i,n)}),o),setTimeout((function(){r(.5-i,n)}),o+a),s+=2}(),o+=200;return 3400+120*t}Wi.cooldown=15e3,Wi.lastCalled=Date.now();var Ai=!0,Yi=0;function Xi(t){if(Ai)return Ai=!1,new Ji(t.shellType(ci())||ki(ci())).launch(.5,.5),2400;if(ni.state.config.finale)return function(t){var e=Oi(),i=Pi(),a=new Ji(t.shellType(i.size)||e(i.size));a.launch(i.x,i.height);var n=a.starLife;Math.random()}(t),Yi<32?(Yi++,170):(Yi=0,6e3);var e=Math.random();return e<.08&&Date.now()-Wi.lastCalled>Wi.cooldown?Wi():e<.1?Li():e<.6?Ti():e<.8?Fi():e<1?Ri():void 0}var Vi=0,zi=0,Ni=0;function _i(t,e,i){if(ri()){var a=e*$e,n=$e*i;!function(t,e,i){Vi++,(zi-=i/30)<0&&(zi=0),ni.state.config.autoLaunch&&(Ni-=e)<=0&&(Ni=1.25*Xi(t))}(t,a,i);var r=1-(1-$i.airDrag)*n,s=1-(1-$i.airDragHeavy)*n,o=1-(1-ta.airDrag)*n,h=a/1e3*.9;di.forEach((function(t){for(var e=$i.active[t],i=e.length-1;i>=0;i-=1){var c=e[i];if(c.updateFrame!==Vi)if(c.updateFrame=Vi,c.life-=a,c.life<=0)e.splice(i,1),$i.returnInstance(c);else{var l=Math.pow(c.life/c.fullLife,.5),u=1-l;if(c.prevX=c.x,c.prevY=c.y,c.x+=c.speedX*n,c.y+=c.speedY*n,c.heavy?(c.speedX*=s,c.speedY*=s):(c.speedX*=r,c.speedY*=r),c.speedY+=h,c.spinRadius&&(c.spinAngle+=c.spinSpeed*n,c.x+=Math.sin(c.spinAngle)*c.spinRadius*n,c.y+=Math.cos(c.spinAngle)*c.spinRadius*n),c.sparkFreq)for(c.sparkTimer-=a;c.sparkTimer<0;)c.sparkTimer+=.75*c.sparkFreq+c.sparkFreq*u*4,ta.add(c.x,c.y,c.sparkColor,Math.random()*ii,Math.random()*c.sparkSpeed*l,.8*c.sparkLife+Math.random()*c.sparkLifeVariation*c.sparkLife);c.life<c.transitionTime&&(c.secondColor&&!c.colorChanged&&(c.colorChanged=!0,c.color=c.secondColor,e.splice(i,1),$i.active[c.secondColor].push(c),c.secondColor===ei&&(c.sparkFreq=0)),c.strobe&&(c.visible=Math.floor(c.life/c.strobeFreq)%3===0))}}for(var f=ta.active[t],d=f.length-1;d>=0;d-=1){var p=f[d];p.life-=a,p.life<=0?(f.splice(d,1),ta.returnInstance(p)):(p.prevX=p.x,p.prevY=p.y,p.x+=p.speedX*n,p.y+=p.speedY*n,p.speedX*=o,p.speedY*=o,p.speedY+=h)}})),function(t,e){var i=t.width,a=t.height,n=t.mainCtx,r=t.trailsCtx;0!==li()&&function(t){var e=15*li(),i=0;Gi.r=0,Gi.g=0,Gi.b=0,fi.forEach((function(t){var e=pi[t],a=$i.active[t].length;i+=a,Gi.r+=e.r*a,Gi.g+=e.g*a,Gi.b+=e.b*a}));var a=Math.pow(Math.min(1,i/500),.3),n=Math.max(1,Gi.r,Gi.g,Gi.b);Gi.r=Gi.r/n*e*a,Gi.g=Gi.g/n*e*a,Gi.b=Gi.b/n*e*a;Bi.r+=(Gi.r-Bi.r)/10*t,Bi.g+=(Gi.g-Bi.g)/10*t,Bi.b+=(Gi.b-Bi.b)/10*t}(e);for(;Qi.active.length;){var s=Qi.active.pop(),o=r.createRadialGradient(s.x,s.y,0,s.x,s.y,s.radius);o.addColorStop(.024,"rgba(255, 255, 255, 1)"),o.addColorStop(.125,"rgba(255, 160, 20, 0.2)"),o.addColorStop(.32,"rgba(255, 140, 20, 0.11)"),o.addColorStop(1,"rgba(255, 120, 20, 0)"),r.fillStyle=o,r.fillRect(s.x-s.radius,s.y-s.radius,2*s.radius,2*s.radius),Qi.returnInstance(s)}if(n.strokeStyle="#fff",r.lineCap="round",n.beginPath(),fi.forEach((function(t){var e=$i.active[t];r.strokeStyle=t,r.beginPath(),e.forEach((function(t){t.visible&&(r.lineWidth=$i.drawWidth,r.moveTo(t.x,t.y),r.lineTo(t.prevX,t.prevY),n.lineWidth=1,n.moveTo(t.x,t.y),n.lineTo(t.x-1.6*t.speedX,t.y-1.6*t.speedY))})),r.stroke()})),n.stroke(),r.lineWidth=ta.drawWidth,r.lineCap="butt",fi.forEach((function(t){var e=ta.active[t];r.strokeStyle=t,r.beginPath(),e.forEach((function(t){r.moveTo(t.x,t.y),r.lineTo(t.prevX,t.prevY)})),r.stroke()})),zi){n.globalAlpha=zi,n.fillStyle=ti.Blue,n.fillRect(0,a-6,i*$e,6),n.globalAlpha=1}}(t,n)}}var Bi={r:0,g:0,b:0},Gi={r:0,g:0,b:0};function qi(t,e,i,a,n){var r=e/i,s=t+e-.5*r;if(s>t)for(var o=t;o<s;o+=r)n(o+Math.random()*r*a);else for(var h=t;h>s;h+=r)n(h+Math.random()*r*a)}function Hi(t,e){for(var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:ii,n=.5*Math.sqrt(t/Math.PI),r=2*n*Math.PI,s=r/2,o=0;o<=s;o++)for(var h=o/s*ai,c=Math.cos(h),l=r*c,u=l*(a/ii),f=ii/l,d=Math.random()*f+i,p=.33*f,v=0;v<u;v++){var g=Math.random()*p,y=f*v+d+g;e(y,c)}}function Ki(t){Hi(18,(function(e,i){$i.add(t.x,t.y,t.color,e,2.4*i,1e3+300*Math.random(),t.speedX,t.speedY)})),Qi.add(t.x,t.y,46),ea.playSound("burstSmall")}function Ui(t){Hi(7,(function(e,i){var a=$i.add(t.x,t.y,ei,e,2.4*i,2400+600*Math.random(),t.speedX,t.speedY);a.sparkColor=ti.Gold,a.sparkFreq=144,a.sparkSpeed=.28,a.sparkLife=750,a.sparkLifeVariation=3.2})),Qi.add(t.x,t.y,46),ea.playSound("burstSmall")}var Ji=function(){function t(e){if(Object(f.a)(this,t),Object.assign(this,e),this.starLifeVariation=e.starLifeVariation||.125,this.color=e.color||gi(),this.glitterColor=e.glitterColor||this.color,!this.starCount){var i=e.starDensity||1,a=this.spreadSize/54;this.starCount=Math.max(6,a*a*i)}}return Object(d.a)(t,[{key:"launch",value:function(t,e){var i=this,a=Qt-.45*Qt,n=t*(Jt-120)+60,r=Qt,s=r-(a-e*(a-50)),o=Math.pow(.04*s,.64),h=this.comet=$i.add(n,r,"string"===typeof this.color&&"random"!==this.color?this.color:ti.White,Math.PI,o*(this.horsetail?1.2:1),o*(this.horsetail?100:400));h.heavy=!0,h.spinRadius=Ue.random(.32,.85),h.sparkFreq=32,h.sparkLife=320,h.sparkLifeVariation=3,("willow"===this.glitter||this.fallingLeaves)&&(h.sparkFreq=20,h.sparkSpeed=.5,h.sparkLife=500),this.color===ei&&(h.sparkColor=ti.Gold),Math.random()>.4&&!this.horsetail&&(h.secondColor=ei,h.transitionTime=700*Math.pow(Math.random(),1.5)+500),h.onDeath=function(t){return i.burst(t.x,t.y)},ea.playSound("lift")}},{key:"burst",value:function(e,i){var a,n,r,s,o,h=this,c=this.spreadSize/96,l=.25,u=!1;this.crossette&&(n=function(t){u||(ea.playSound("crackleSmall"),u=!0),function(t){qi(Math.random()*ai,ii,4,.5,(function(e){$i.add(t.x,t.y,t.color,e,.6*Math.random()+.75,600)}))}(t)}),this.crackle&&(n=function(t){u||(ea.playSound("crackle"),u=!0),function(t){qi(0,ii,16,1.8,(function(e){ta.add(t.x,t.y,ti.Gold,e,2.4*Math.pow(Math.random(),.45),300+200*Math.random())}))}(t)}),this.floral&&(n=Ki),this.fallingLeaves&&(n=Ui),"light"===this.glitter?(r=400,s=.3,o=300,l=2):"medium"===this.glitter?(r=200,s=.44,o=700,l=2):"heavy"===this.glitter?(r=80,s=.8,o=1400,l=2):"thick"===this.glitter?(r=16,s=1.5,o=1400,l=3):"streamer"===this.glitter?(r=32,s=1.05,o=620,l=2):"willow"===this.glitter&&(r=120,s=.34,o=1400,l=3.8),r/=1;var f=function(t,u){var f=h.spreadSize/1800,d=$i.add(e,i,a||gi(),t,u*c,h.starLife+Math.random()*h.starLife*h.starLifeVariation,h.horsetail?h.comet&&h.comet.speedX:0,h.horsetail?h.comet&&h.comet.speedY:-f);h.secondColor&&(d.transitionTime=h.starLife*(.05*Math.random()+.32),d.secondColor=h.secondColor),h.strobe&&(d.transitionTime=h.starLife*(.08*Math.random()+.46),d.strobe=!0,d.strobeFreq=20*Math.random()+40,h.strobeColor&&(d.secondColor=h.strobeColor)),d.onDeath=n,h.glitter&&(d.sparkFreq=r,d.sparkSpeed=s,d.sparkLife=o,d.sparkLifeVariation=l,d.sparkColor=h.glitterColor,d.sparkTimer=Math.random()*d.sparkFreq)};if("string"===typeof this.color)if(a="random"===this.color?null:this.color,this.ring){var d=Math.random()*Math.PI,p=.85*Math.pow(Math.random(),2)+.15;qi(0,ii,this.starCount,0,(function(t){var n=Math.sin(t)*c*p,u=Math.cos(t)*c,f=Ue.pointDist(0,0,n,u),v=Ue.pointAngle(0,0,n,u)+d,g=$i.add(e,i,a,v,f,h.starLife+Math.random()*h.starLife*h.starLifeVariation);h.glitter&&(g.sparkFreq=r,g.sparkSpeed=s,g.sparkLife=o,g.sparkLifeVariation=l,g.sparkColor=h.glitterColor,g.sparkTimer=Math.random()*g.sparkFreq)}))}else Hi(this.starCount,f);else{if(!Array.isArray(this.color))throw new Error("Invalid shell color. Expected string or array of strings, but got: "+this.color);if(Math.random()<.5){var v=Math.random()*Math.PI,g=v+Math.PI,y=Math.PI;a=this.color[0],Hi(this.starCount,f,v,y),a=this.color[1],Hi(this.starCount,f,g,y)}else a=this.color[0],Hi(this.starCount/2,f),a=this.color[1],Hi(this.starCount/2,f)}this.pistil&&new t({spreadSize:.5*this.spreadSize,starLife:.6*this.starLife,starLifeVariation:this.starLifeVariation,starDensity:1.4,color:this.pistilColor,glitter:"light",glitterColor:this.pistilColor===ti.Gold?ti.Gold:ti.White}).burst(e,i);this.streamers&&new t({spreadSize:.9*this.spreadSize,starLife:.8*this.starLife,starLifeVariation:this.starLifeVariation,starCount:Math.floor(Math.max(6,this.spreadSize/45)),color:ti.White,glitter:"streamer"}).burst(e,i);if(Qi.add(e,i,this.spreadSize/4),this.comet){var m=.3*(1-Math.min(2,ci()-this.shellSize)/2)+.7;ea.playSound("burst",m)}}}]),t}(),Qi={active:[],_pool:[],_new:function(){return{}},add:function(t,e,i){var a=this._pool.pop()||this._new();return a.x=t,a.y=e,a.radius=i,this.active.push(a),a},returnInstance:function(t){this._pool.push(t)}};function Zi(){var t={};return di.forEach((function(e){t[e]=[]})),t}var $i={drawWidth:3,airDrag:.98,airDragHeavy:.992,active:Zi(),_pool:[],_new:function(){return{}},add:function(t,e,i,a,n,r,s,o){var h=this._pool.pop()||this._new();return h.visible=!0,h.heavy=!1,h.x=t,h.y=e,h.prevX=t,h.prevY=e,h.color=i,h.speedX=Math.sin(a)*n+(s||0),h.speedY=Math.cos(a)*n+(o||0),h.life=r,h.fullLife=r,h.spinAngle=Math.random()*ii,h.spinSpeed=.8,h.spinRadius=0,h.sparkFreq=0,h.sparkSpeed=1,h.sparkTimer=0,h.sparkColor=i,h.sparkLife=750,h.sparkLifeVariation=.25,h.strobe=!1,this.active[i].push(h),h},returnInstance:function(t){t.onDeath&&t.onDeath(t),t.onDeath=null,t.secondColor=null,t.transitionTime=0,t.colorChanged=!1,this._pool.push(t)}},ta={drawWidth:0,airDrag:.9,active:Zi(),_pool:[],_new:function(){return{}},add:function(t,e,i,a,n,r){var s=this._pool.pop()||this._new();return s.x=t,s.y=e,s.prevX=t,s.prevY=e,s.color=i,s.speedX=Math.sin(a)*n,s.speedY=Math.cos(a)*n,s.life=r,this.active[i].push(s),s},returnInstance:function(t){this._pool.push(t)}},ea={baseURL:"https://s3-us-west-2.amazonaws.com/s.cdpn.io/329180/",ctx:new(window.AudioContext||window.webkitAudioContext),sources:{lift:{volume:1,playbackRateMin:.85,playbackRateMax:.95,fileNames:["lift1.mp3","lift2.mp3","lift3.mp3"]},burst:{volume:1,playbackRateMin:.8,playbackRateMax:.9,fileNames:["burst1.mp3","burst2.mp3"]},burstSmall:{volume:.25,playbackRateMin:.8,playbackRateMax:1,fileNames:["burst-sm-1.mp3","burst-sm-2.mp3"]},crackle:{volume:.2,playbackRateMin:1,playbackRateMax:1,fileNames:["crackle1.mp3"]},crackleSmall:{volume:.3,playbackRateMin:1,playbackRateMax:1,fileNames:["crackle-sm-1.mp3"]}},preload:function(){var t=this,e=[];function i(t){if(t.status>=200&&t.status<300)return t;var e=new Error(t.statusText);throw e.response=t,e}return Object.keys(this.sources).forEach((function(a){var n=t.sources[a],r=n.fileNames,s=[];r.forEach((function(a){var n=t.baseURL+a,r=fetch(n).then(i).then((function(t){return t.arrayBuffer()})).then((function(e){return new Promise((function(i){t.ctx.decodeAudioData(e,i)}))}));s.push(r),e.push(r)})),Promise.all(s).then((function(t){n.buffers=t}))})),Promise.all(e)},pauseAll:function(){this.ctx.suspend()},resumeAll:function(){var t=this;this.playSound("lift",0),setTimeout((function(){t.ctx.resume()}),250)},_lastSmallBurstTime:0,playSound:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(e=Ue.clamp(e,0,1),oi()&&!($e<.95)){if("burstSmall"===t){var i=Date.now();if(i-this._lastSmallBurstTime<20)return;this._lastSmallBurstTime=i}var a=this.sources[t];if(!a)throw new Error('Sound of type "'.concat(t,"\" doesn't exist."));var n=a.volume,r=Ue.random(a.playbackRateMin,a.playbackRateMax),s=n*e,o=r*(2-e),h=this.ctx.createGain();h.gain.value=s;var c=Ue.randomChoice(a.buffers),l=this.ctx.createBufferSource();l.playbackRate.value=o,l.buffer=c,l.connect(h),h.connect(this.ctx.destination),l.start(0)}}},ia=function(){function t(e,i){Object(f.a)(this,t);this.id="547846ad",this.effect=e;var a=e.width,n=e.height,r=e.ctx;Jt=a,Qt=n,this.fireworks=Object.keys(Ii),this.context={dpr:window.devicePixelRatio||1,width:a,height:n,mainCtx:r,trailsCtx:r},ea.preload(),Ei()}return Object(d.a)(t,[{key:"postInit",value:function(){var t=this.id,e=this.effect,i=e.getConfigValue(this.id,"shellType",1);ni.state.config.shell=this.fireworks[i],ni.state.config.hideControls=!0,ni.state.config.size=e.getConfigValue(t,"shellSize",5),this.lag=e.getConfigValue(t,"lag",10),$e=e.getConfigValue(t,"speed",.2),this.timeStep=1,this.context.shellType=Ii[this.fireworks[i]]}},{key:"getDescriptor",value:function(){return{name:"Sparkling",id:"547846ad",config:{lag:1,speed:.2,shellSize:3,shellType:0},fireworks:this.fireworks}}},{key:"draw",value:function(){this.timeStep=(this.timeStep+1)%900,_i(this.context,this.timeStep,this.lag)}},{key:"getShellTypeName",value:function(t){return this.fireworks[t]}},{key:"renderShellTypeOption",value:function(){var t=this,e=this.effect,i=this.id,a=e.getConfigValue(i,"shellType")||0;return n.a.createElement("div",{key:"".concat(i,"#shellType"),style:{margin:"8px 0"}},n.a.createElement("span",null,"Shell Type: ".concat(this.getShellTypeName(a))),n.a.createElement(j.a,{min:0,max:11,step:1,value:a,tipFormatter:function(e){return"".concat(t.getShellTypeName(e))},onChange:function(t){return e.changeConfig(e.getConfigName(i,"shellType"),t)}}))}},{key:"option",value:function(){var t=this.effect;return[this.renderShellTypeOption(),t.renderOption(t.getConfigName(this.id,"shellSize"),"Shell Size",1,10,1,5),t.renderOption(t.getConfigName(this.id,"lag"),"View Distance",1,20,1,10),t.renderOption(t.getConfigName(this.id,"speed"),"Speed",.1,1,.1,.2)]}}]),t}(),aa=!1;function na(t){return Math.random()*t+1}function ra(t,e,i,a){t.beginPath(),t.arc(e,i,a,0,2*Math.PI),t.fill(),t.closePath()}var sa=function(){function t(e,i){Object(f.a)(this,t),this.x=e,this.y=i}return Object(d.a)(t,[{key:"add",value:function(t){this.x=this.x+t.x,this.y=this.y+t.y}}]),t}(),oa=function(){function t(e,i){Object(f.a)(this,t),this.pos=new sa(e.x,e.y),this.vel=i,this.dead=!1,this.start=0}return Object(d.a)(t,[{key:"update",value:function(t){t-this.start>500&&(this.dead=!0),this.dead||(this.pos.add(this.vel),this.vel.y=this.vel.y+.2)}},{key:"draw",value:function(t){this.dead||ra(t,this.pos.x,this.pos.y,1)}}]),t}(),ha=function(){function t(e,i){Object(f.a)(this,t),this.pos=new sa(e,i),this.vel=new sa(0,-na(10)-3),this.color="hsl("+na(360)+", 100%, 50%)",this.size=4,this.dead=!1,this.start=0,this.exParticles=[],this.exPLen=100,this.rootShow=!0}return Object(d.a)(t,[{key:"update",value:function(t){if(!this.dead){var e=this.exPLen,i=this.exParticles;if(this.rootShow=this.vel.y<0,this.rootShow)this.pos.add(this.vel),this.vel.y=this.vel.y+.2;else{if(0===i.length){aa=!0;for(var a=0;a<e;a++)i.push(new oa(this.pos,new sa(5-na(10),5-na(10)))),i[i.length-1].start=t}for(var n=0,r=0;r<e;r++){var s=this.exParticles[r];s.update(t),s.dead&&n++}n===e&&(this.dead=!0)}}}},{key:"draw",value:function(t){if(!this.dead){var e=this.rootShow,i=this.exPLen,a=this.exParticles;if(t.fillStyle=this.color,e)ra(t,this.pos.x,this.pos.y,this.size);else for(var n=0;n<i;n++){a[n].draw(t)}}}}]),t}(),ca=function(){function t(e){Object(f.a)(this,t),this.effect=e,this.fireworks=[],this.snapTime=0;for(var i=0;i<20;i++)this.fireworks.push(new ha(na(e.width),e.height))}return Object(d.a)(t,[{key:"getDescriptor",value:function(){return{id:"0e2df0c9",name:"Explod"}}},{key:"draw",value:function(){var t=this.effect,e=t.ctx,i=t.width,a=t.height,n=this.fireworks,r=Date.now();this.update(r),e.fillStyle="rgba(0,0,0,0.3)",aa&&(aa=!1),e.fillRect(0,0,i,a),e.fillStyle="white",e.font="30px Arial",this.snapTime=r,e.fillStyle="blue";for(var s=0,o=n.length;s<o;s++){var h=n[s];h.dead&&(n[s]=new ha(na(i),a),(h=n[s]).start=r),h.draw(e)}}},{key:"update",value:function(t){for(var e=this.fireworks,i=0,a=e.length;i<a;i++){e[i].update(t)}}}]),t}(),la=-10,ua=20,fa=25,da=15;function pa(t){t=t||0,this.r=va(t),this.g=va(t),this.b=va(t),this.style=function(t,e,i){return"rgba("+t+","+e+","+i+", 0.8)"}(this.r,this.g,this.b)}function va(t){return Math.floor(255*Math.random()+t)}var ga=function(){function t(e,i){Object(f.a)(this,t),this.radius=5+10*Math.random(),this.previousRadius=5,this.explosionRadius=50+150*Math.random(),this.explodingDuration=100,this.hasExploded=!1,this.alive=!0,this.color=new pa,this.px=e/4+Math.random()*e/2,this.py=i,this.vx=la+Math.random()*ua,this.vy=-1*(fa+Math.random()*da)}return Object(d.a)(t,[{key:"update",value:function(){if(this.hasExploded){var t=this.explosionRadius-this.radius;this.previousRadius=this.radius,this.radius+=t/10,this.explodingDuration--,0===this.explodingDuration&&(this.alive=!1)}else this.vx+=0,this.vy+=1,this.vy>=0&&this.explode(),this.px+=this.vx,this.py+=this.vy}},{key:"draw",value:function(t){if(t.beginPath(),t.arc(this.px,this.py,this.previousRadius,0,2*Math.PI,!1),this.hasExploded){t.strokeStyle=this.color.style;var e=this.radius-this.previousRadius;e<1&&(e=1),t.lineWidth=e,t.stroke()}else t.fillStyle=this.color.style,t.lineWidth=1,t.fill()}},{key:"explode",value:function(){this.hasExploded=!0}}]),t}(),ya=function(){function t(e){Object(f.a)(this,t),this.effect=e;var i=e.width,a=e.height;!function(t,e){for(var i,a=0,n=0;a<e&&n>=0;)a+=n+=1;da=n-(fa=n/2),la=-(i=1/4*t/(n/2)),ua=2*i}(i,a),this.bombs=[];for(var n=0;n<1;n++)this.bombs.push(new ga(i,a))}return Object(d.a)(t,[{key:"getDescriptor",value:function(){return{name:"Circles"}}},{key:"draw",value:function(){for(var t=this.effect,e=t.ctx,i=t.width,a=t.height,n=this.bombs,r=n.length-1;r>=0;r--){var s=n[r];s.update(),s.hasExploded&&(s.alive||n.splice(r,1)),s.draw(e)}100*Math.random()<5&&n.push(new ga(i,a))}}]),t}();var ma=function(){function t(e){Object(f.a)(this,t),this.store=e,this.event=this.event.bind(this),this.done=!1,this.selectedFireworkIndexes=[];var i=this.getConfig({});void 0===i.fireworkIndex&&(i.fireworkIndex=0),this.presets=[]}return Object(d.a)(t,[{key:"getName",value:function(){return"Firework"}},{key:"init",value:function(t,e,i,a){if(this.width=~~e,this.height=~~i,(this.canvas!==t||a)&&(!function(t,e,i){var a=t.getContext("2d"),n=P(a);t.width=e*n,t.height=i*n,t.style.width=e+"px",t.style.height=i+"px",a.setTransform(n,0,0,n,0,0)}(t,e,i),this.canvas=t,this.ctx=t.getContext("2d"),this.dpr=P(this.ctx),this.center&&!a||(this.center={x:e/2,y:i/2}),this.ctx.font="15px Consolas",this.ctx.fillStyle="rgba(0, 255, 0, 0.7)"),!this.background||a){var n=this.getConfig();this.backgroundImageData=void 0,this.background=new Dt(this,{imageIndex:n.backgroundImageIndex,effectIndex:n.backgroundEffectIndex})}this.fireworks?a&&this.postInit():(this.fireworks=[new ia(this),new Pt(this),new Ve(this),new Kt(this),new ae(this),new te(this),new se(this),new Pe(this),new Ae(this),new Ye(this),new Ne(this),new Be(this),new ca(this),new Yt(this),new ya(this),new Lt(this),new Ke(this,{preset:0}),new Ke(this,{preset:1}),new Ke(this,{preset:2}),new Ke(this,{preset:3}),new Ke(this,{preset:4}),new Ke(this,{preset:5}),new Ke(this,{preset:6}),new Ke(this,{preset:7}),new Ye(this)],this.postInit())}},{key:"postInit",value:function(){this.fireworks.forEach((function(t){t.postInit&&t.postInit()})),this.generatePresets(),this.tick=Date.now()}},{key:"getBackgroundImageData",value:function(){return this.background.getImageData()}},{key:"generatePresets",value:function(){var t=this.fireworks,e=t.length;this.presets=[];for(var i=0;i<t.length;i++)this.presets.push([_(0,e)]);if(e>2)for(var a=0;a<2;a++)this.presets.push([_(0,e),_(0,e)]);e>3&&this.presets.push([_(0,e),_(0,e),_(0,e)]),e>5&&this.presets.push([_(0,e),_(0,e),_(0,e),_(0,e),_(0,e)])}},{key:"draw",value:function(){var t=this.ctx,e=this.fireworks,i=this.presets;if(t){var a=Date.now()-this.tick;this.background.draw();var n=this.getConfig();if(0===n.fireworkIndex){this.currentFirework=void 0;var r=~~(a/15100);if(a<15100*r+100)return;i[r%i.length].forEach((function(t){e[t].draw()}))}else{var s=e[(n.fireworkIndex-1)%e.length];this.currentFirework=s,s&&s.draw()}}}},{key:"getCurrentFirework",value:function(){return this.currentFirework}},{key:"getConfigName",value:function(t,e){return"".concat(t,"#").concat(e)}},{key:"getConfigValue",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return this.getConfig()[this.getConfigName(t,e)]||i}},{key:"event",value:function(t,e){var i=this.getCurrentFirework();if(i&&i.event)i.event.call(i,t,e);else switch(t){case"event@mouse-moved":case"event@mouse-clicked":this.center=e}}},{key:"renderFireworkTypeOption",value:function(){var t=this;if(!this.fireworks)return"";var e=this.getConfig(),i=this.fireworks.map((function(t){return t.getDescriptor().name}));return i.unshift("Random"),n.a.createElement("div",{key:"firework#fireworkIndex",className:"underline",style:{padding:"0 0 8px 0"}},n.a.createElement("span",null,"Firework Type"),n.a.createElement(D.a,{ref:function(e){return t.selectElement=e},style:{width:250,margin:"0 0 0 8px"},defaultValue:e.fireworkIndex,placeholder:"Select a firework type",onChange:function(e){return t.changeConfig("fireworkIndex",e)}},i.map((function(t,e){return n.a.createElement(D.a.Option,{key:"firework#".concat(e),value:e},"".concat(t))}))))}},{key:"renderBackgroundImageOption",value:function(){var t=this,e=this.getConfig().backgroundImageIndex,i=Et().backgroundImages;return n.a.createElement("div",{key:"firework#imgIndex",className:"underline",style:{padding:"0 0 8px 0"}},n.a.createElement("span",null,"Background Image"),n.a.createElement(D.a,{style:{width:250},defaultValue:e,placeholder:"Select a background image",onChange:function(e){t.changeConfig("backgroundImageIndex",e)}},i.map((function(t,e){return n.a.createElement(D.a.Option,{key:"img#".concat(e),value:e},"".concat(t.name))}))))}},{key:"renderBackgroundEffectOption",value:function(){var t=this,e=this.getConfig().backgroundEffectIndex,i=Et().backgroundEffects;return n.a.createElement("div",{key:"firework#effectIndex",className:"underline",style:{padding:"0 0 8px 0"}},n.a.createElement("span",null,"Background Effect"),n.a.createElement(D.a,{style:{width:250},defaultValue:e,placeholder:"Select a background effect",onChange:function(e){t.changeConfig("backgroundEffectIndex",e)}},i.map((function(t,e){return n.a.createElement(D.a.Option,{key:"effect#".concat(e),value:e},"".concat(t.name))}))))}},{key:"renderOption",value:function(t,e,i,a,r,s){var o=this,h=this.getConfig()[t]||s;return n.a.createElement("div",{key:"".concat(t),style:{margin:"8px 0"}},n.a.createElement("span",null,"".concat(e,": ").concat(h)),n.a.createElement(j.a,{min:i,max:a,step:r,value:h,tipFormatter:function(t){return"".concat(t)},onChange:function(e){return o.changeConfig(t,e)}}))}},{key:"getConfig",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.store.options||(this.store.options=t),this.store.options}},{key:"changeConfig",value:function(t,e){var i=this.getConfig();if(i[t]=e,"backgroundImageIndex"===t)this.background=new Dt(this,{imageIndex:e,effetcIndex:i.backgroundEffectIndex});else if("backgroundEffectIndex"===t)this.background=new Dt(this,{imageIndex:i.backkgroundImageIndex,effectIndex:e});else if("fireworkIndex"===t){var a=this.fireworks;this.currentFirework=a[(e-1)%a.length]}u("event@effect-config-changed",{name:t,value:e})}},{key:"option",value:function(){var t=[this.renderFireworkTypeOption(),this.renderBackgroundImageOption(),this.renderBackgroundEffectOption()],e=this.getCurrentFirework();return e&&e.option&&t.push.apply(t,Object(E.a)(e.option())),t}}]),t}(),ka=function(t){Object(v.a)(i,t);var e=Object(g.a)(i);function i(t){var a;return Object(f.a)(this,i),(a=e.call(this,t)).effects=[],window.requestAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){window.setTimeout(t,1e3/60)}},window.cancelAnimFrame=function(t){return window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.oCancelAnimationFrame||window.msCancelAnimationFrame||function(t){window.clearTimeout(t)}},a.initEffect=a.initEffect.bind(Object(p.a)(a)),a.drawEffect=a.drawEffect.bind(Object(p.a)(a)),a.onChangeEffectOption=a.onChangeEffectOption.bind(Object(p.a)(a)),a.onToggleOptionBar=a.onToggleOptionBar.bind(Object(p.a)(a)),a.onEvent=a.onEvent.bind(Object(p.a)(a)),a.onResize=a.onResize.bind(Object(p.a)(a)),a.onRun=a.onRun.bind(Object(p.a)(a)),a.onStop=a.onStop.bind(Object(p.a)(a)),a.effects.push(new ma(C)),I(),a}return Object(d.a)(i,[{key:"componentDidMount",value:function(t){var e=this;(function(){return S.apply(this,arguments)})().then((function(){e.onRun()})),c("effects",this.onEvent),window.addEventListener("resize",this.onResize)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.onResize),this.onStop(),O(),l("effects",this.onEvent)}},{key:"onResize",value:function(){this.initEffect(!0),this.forceUpdate()}},{key:"onEvent",value:function(t,e){switch(console.log("effects: ".concat(t)),t){case"event@mouse-down":case"event@mouse-clicked":case"event@mouse-moved":case"event@mouse-up":if(this.canvas){var i=this.getEffect();i&&i.event(t,{x:e.x-this.canvas.offsetLeft,y:e.y-this.canvas.offsetTop})}break;case"event@effect-config-changed":this.onChangeEffectOption();break;case"event@refresh":this.forceUpdate()}}},{key:"onRun",value:function(){this.raf&&cancelAnimationFrame(this.raf),this.running=!0,this.raf=requestAnimationFrame(this.drawEffect)}},{key:"onStop",value:function(){this.running=!1,this.raf&&cancelAnimationFrame(this.raf),this.raf=void 0}},{key:"onChangeEffectOption",value:function(){this.initEffect(!0),O(),this.forceUpdate()}},{key:"onToggleOptionBar",value:function(t){C.optionOpended=!C.optionOpended,C.optionOpended?this.onStop():this.onRun(),this.forceUpdate()}},{key:"getEffect",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this.effects[t%this.effects.length]}},{key:"initEffect",value:function(t){var e=this.canvas,i=this.container;if(e&&i){this.canvas=e;var a=this.getEffect();a&&a.init(e,i.width||i.clientWidth,i.height||i.clientHeight,t)}}},{key:"drawEffect",value:function(){if(this.canvas){if(this.running){var t=this.getEffect();t&&t.draw()}requestAnimationFrame(this.drawEffect)}}},{key:"renderOptions",value:function(){var t,e=[],i=null===(t=this.getEffect())||void 0===t?void 0:t.option();return i&&e.push(i),e}},{key:"renderEffect",value:function(){var t=this;return n.a.createElement("canvas",{ref:function(e){e&&(t.canvas=e,t.initEffect(!1))},style:{width:"100vw",height:"100vh",background:"black"},onMouseDown:function(e){return t.onEvent("event@mouse-down",{x:e.clientX,y:e.clientY})},onMouseMove:function(e){return t.onEvent("event@mouse-moved",{x:e.clientX,y:e.clientY})},onMouseUp:function(e){return t.onEvent("event@mouse-up",{x:e.clientX,y:e.clientY})},onClick:function(e){return t.onEvent("event@mouse-clicked",{x:e.clientX,y:e.clientY})},onTouchStart:function(e){return t.onEvent("event@mouse-down",{x:e.clientX,y:e.clientY})},onTouchMove:function(e){return t.onEvent("event@mouse-moved",{x:e.clientX,y:e.clientY})},onMouseEnd:function(e){return t.onEvent("event@mouse-up",{x:e.clientX,y:e.clientY})}})}},{key:"render",value:function(){var t,e=this,i=C.optionOpended;return n.a.createElement("div",{ref:function(t){t&&(e.container=t,e.initEffect(!0))},style:{width:"100vw",height:"100vh"}},this.renderEffect(),n.a.createElement("span",{className:"app-setting",onClick:function(){return e.onToggleOptionBar()}},n.a.createElement(m.a,null)),n.a.createElement(y.a,{title:"Options",placement:"right",closable:!0,width:Math.min(400,(null===(t=this.container)||void 0===t?void 0:t.width)||400),onClose:function(){return e.onToggleOptionBar()},visible:i},this.renderOptions()))}}]),i}(n.a.Component),wa=function(t){Object(v.a)(i,t);var e=Object(g.a)(i);function i(t){var a;return Object(f.a)(this,i),(a=e.call(this,t)).onEvent=a.onEvent.bind(Object(p.a)(a)),a}return Object(d.a)(i,[{key:"componentDidMount",value:function(t){this.restoreState(),c("home",this.onEvent)}},{key:"componentWillUnmount",value:function(){this.saveState(),l("home",this.onEvent)}},{key:"saveState",value:function(){}},{key:"restoreState",value:function(){}},{key:"onEvent",value:function(t,e){}},{key:"render",value:function(){return n.a.createElement("div",{className:"app-container"},n.a.createElement(a.Suspense,{fallback:n.a.createElement("div",{style:{margin:"16px"}},"Loading...")},n.a.createElement(ka,null)))}}]),i}(n.a.Component);window.onpopstate=function(t){u("event@popstate",t.state)};var xa=function(){return n.a.createElement("div",{className:"App"},n.a.createElement("header",{className:"App-header"},n.a.createElement(wa,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(n.a.createElement(n.a.StrictMode,null,n.a.createElement(xa,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()})).catch((function(t){console.error(t.message)}))},82:function(t,e,i){}},[[142,1,2]]]);
//# sourceMappingURL=main.87e44f00.chunk.js.map