(this.webpackJsonpawesomeasciiart=this.webpackJsonpawesomeasciiart||[]).push([[15],{1199:function(e,t,n){"use strict";n.r(t);var r=n(13),a=n(14),o=n(5),i=n(16),s=n(15),c=n(0),u=n.n(c),l=n(1191),f=n(163),m=n.n(f),h=(n(41),n(3)),v=n(130),d=n(152),b=n(148),p=n.n(b),y=n(128),j=n(149),k=n(133),w={hash:0,text:"",sortBy:4,western:{},eastern:{},combined:{},pieces:[],getNames:function(){var e;return(null===(e=x())||void 0===e?void 0:e.names)||[]},categories:{western:{value:1,checked:!0},eastern:{value:1,checked:!1}}},g=!1;function O(){return(O=Object(j.a)(p.a.mark((function e(){var t,n,r,a,o,i;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!g){e.next=2;break}return e.abrupt("return");case 2:return t={checked:!0},n={chcked:!1},e.next=6,fetch("data/emoticon-western.json");case 6:return r=e.sent,e.next=9,r.json();case 9:return a=e.sent,t.emoticons=a.emoticons,t.names=a.names.filter((function(e){return"western"!==e.name&&"favorite"!==e.name})),t.nameDictionary=new Set(a.names.map((function(e){return e.name}))),e.next=15,fetch("data/emoticon-eastern.json");case 15:return r=e.sent,e.next=18,r.json();case 18:a=e.sent,n.emoticons=a.emoticons,n.names=a.names.filter((function(e){return"eastern"!==e.name&&"favorite"!==e.name})),n.nameDictionary=new Set(a.names.map((function(e){return e.name}))),o={},i=new Map,n.names.forEach((function(e){return i.set(e.name,e.value)})),t.names.forEach((function(e){var t=e.name,n=e.value;i.has(t)?i.set(t,i.get(t)+e.value):i.set(t,n)})),o.names=[],i.forEach((function(e,t){o.names.push({name:t,value:e})})),o.names.sort((function(e,t){return t.value-e.value})),o.nameDictionary=new Set([].concat(Object(y.a)(t.nameDictionary),Object(y.a)(n.nameDictionary))),[].concat(Object(y.a)(t.emoticons),Object(y.a)(n.emoticons)).forEach((function(e,t){e.id=t+1,e.name=e.tags.join(", ");var n=[];e.tags.forEach((function(e){return n.push.apply(n,Object(y.a)(e.split(/ |-|\/|\\|\.|,|\?|!|\u2018|\u2019|'|"|'|:|;|\(|\)/)))})),e.words=Object(y.a)(new Set(n)),e.visible=!0,e.styles=0,e.categories.includes("western")&&(e.styles+=1),e.categories.includes("eastern")&&(e.styles+=2),e.categories.includes("favorite")&&(e.styles+=8),w.pieces.push(e)})),w.western=t,w.categories.western.value=t.emoticons.length,w.eastern=n,w.categories.eastern.value=n.emoticons.length,w.combined=o,Object(v.a)("emoticons",w.pieces),g=!0;case 38:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function x(){var e=w.western,t=w.eastern,n=w.combined;return e.checked&&t.checked?n:e.checked?e:t.checked?t:void 0}function E(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,n=x(),r=n?n.nameDictionary:void 0,a=w.western.checked,o=w.eastern.checked;e=e.split(" ").map((function(e){return e.trim().toLowerCase()})).filter((function(e){return e.length}));var i=0;w.pieces.forEach((function(n){if(n.visible=!1,!(t>0&&i>t)){var s=n.words,c=n.data,u=n.styles;if((a||0===(1&u))&&(o||0===(2&u)))if(e.length)for(var l=function(t){var a=e[t],o=c.includes(a);if(o||(o=s.some((function(e){return!!e.startsWith(a)&&!(e.length>a.length&&r&&r.has(e))}))),o)return n.visible=!0,i++,"break"},f=0;f<e.length;f++){if("break"===l(f))break}else 0!==(8&u)&&(n.visible=!0)}}))}function S(){var e={text:w.text,sortBy:w.sortBy};""!==JSON.stringify(e)&&Object(k.b)("emoticon#pref",e)}var R=w,D=function(e){Object(i.a)(n,e);var t=Object(s.a)(n);function n(e){var a;return Object(r.a)(this,n),(a=t.call(this,e)).state={items:100},a.renderInput=a.renderInput.bind(Object(o.a)(a)),a.onEvent=a.onEvent.bind(Object(o.a)(a)),a.onRefresh=a.onRefresh.bind(Object(o.a)(a)),a.onQuickGenerate=m()((function(e){return a.onRefresh(e,25)}),300),a.onFullGenerate=m()((function(e){return a.onRefresh(e)}),1e3),a}return Object(a.a)(n,[{key:"componentDidMount",value:function(e){var t=this;(function(){return O.apply(this,arguments)})().then((function(){!function(){var e=Object(k.a)("emoticon#pref");w.text=(null===e||void 0===e?void 0:e.text)||"",w.sortBy=null===e||void 0===e?void 0:e.sortBy}();var e=R.text;t.input.setValue(e),t.onRefresh(e)})),Object(h.b)("emoticons",this.onEvent)}},{key:"componentWillUnmount",value:function(){Object(h.c)("emoticons",this.onEvent)}},{key:"onEvent",value:function(e,t){if(e.startsWith("event@scrolled"))return this.input&&this.input.blur(),void("event@scrolled-to-bottom"===e&&(console.log("emoticons: ".concat(e)),this.setState({items:this.state.items+100})));switch(console.log("emoticons: ".concat(e)),e){case"event@refresh":this.forceUpdate();break;case"event@tag-clicked":var n=t;R.text=n,this.input.setValue(n),this.onRefresh(n);break;case"event@favorite-changed":Object(v.b)("emoticons",R.pieces)}}},{key:"onRefresh",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;R.text=e,S(),E(e,t),this.forceUpdate()}},{key:"renderInput",value:function(){var e=this;return u.a.createElement("div",null,u.a.createElement(l.a,{placeholder:"Search emoticons",ref:function(t){return e.input=t},onChange:function(t){var n=t.target.value;n!==R.text&&(e.onQuickGenerate(n),e.onFullGenerate(n))}}))}},{key:"render",value:function(){return u.a.createElement(d.a,{title:"Emoticon",store:R,clusters:["western","eastern"],inputRender:this.renderInput,maxPieces:this.state.items,showSummary:!0,filterBy:"name"})}}]),n}(u.a.Component);t.default=D},128:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(31);var a=n(47);function o(e){return function(e){if(Array.isArray(e))return Object(r.a)(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||Object(a.a)(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}}}]);
//# sourceMappingURL=15.5d464ee4.chunk.js.map