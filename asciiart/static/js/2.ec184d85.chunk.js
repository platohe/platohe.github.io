(this.webpackJsonpawesomeasciiart=this.webpackJsonpawesomeasciiart||[]).push([[2],{125:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return o}));var a=n(126);function r(e,t,n){var r=Object(a.a)("favorites#".concat(e));if(!r){if(!n)return;r=n}var o=new Set(r);t.forEach((function(e){var t=e.tags.filter((function(e){return"favorite"!==e}));o.has(e.id||e.name)&&t.unshift("favorite"),e.tags=t}))}function o(e,t){var n=[];t.forEach((function(e){e.tags.includes("favorite")&&n.push(e.id)})),Object(a.b)("favorites#".concat(e),n)}},126:function(e,t,n){"use strict";function a(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"localStorage";if(t in window){var n=window[t].getItem(e);if(n)return console.log("storage->".concat(e,": ").concat(n.substr(0,64),"...")),JSON.parse(n)}}function r(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"localStorage";if(void 0!==t&&null!==t&&n in window){var a=JSON.stringify(t);console.log("storage<- ".concat(e,": ").concat(a.substr(0,64),"...")),window[n].setItem(e,a)}}n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return r}))},137:function(e,t,n){"use strict";var a=n(13),r=n(14),o=n(5),i=n(16),s=n(15),c=n(0),l=n.n(c),u=n(837),d=n(839),g=n(840),f=n(841),p=n(159),h=n.n(p),m=n(162);n(41);function v(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=document.createElement("textarea");t.value=e,t.setAttribute("readonly",""),t.style.position="absolute",t.style.left="-9999px",document.body.appendChild(t);var n=document.getSelection().rangeCount>0&&document.getSelection().getRangeAt(0);t.select(),document.execCommand("copy"),document.body.removeChild(t),n&&(document.getSelection().removeAllRanges(),document.getSelection().addRange(n))}function y(e){for(var t=e.split(","),n=t[0].match(/:(.*?);/)[1],a=atob(t[1]),r=a.length,o=new Uint8Array(r);r--;)o[r]=a.charCodeAt(r);return new Blob([o],{type:n})}var C=n(3),b=function(e){Object(i.a)(n,e);var t=Object(s.a)(n);function n(e){var r;return Object(a.a)(this,n),(r=t.call(this,e)).onCopy=r.onCopy.bind(Object(o.a)(r)),r}return Object(r.a)(n,[{key:"onCopy",value:function(e){var t=this.props.piece,n=t.id,a=t.name,r=t.data;if("png"===e)h.a.toBlob(document.getElementById(n),{backgroundColor:"#fff"}).then((function(e){return Object(m.saveAs)(e,"".concat(a,".png"))}));else if("jpg"===e)h.a.toJpeg(document.getElementById(n),{backgroundColor:"#fff"}).then((function(e){var t=y(e);Object(m.saveAs)(t,"".concat(a,".jpg"))}));else if("svg"===e)h.a.toSvgDataURL(document.getElementById("piece#".concat(n)),{backgroundColor:"#fff"}).then((function(e){var t=y(e);Object(m.saveAs)(t,"".concat(a,".svg"))}));else{if("html"===e)v('<!DOCTYPE html><html lang="en"><body><div>\n  <pre style="margin:8px auto; line-height:1; font-family:Fira Mono,Andale Mono,Consolas, monospace">\n  '.concat(r,"\n  </pre>\n  </div></body></html>"));else v(r);-1===r.indexOf("\n")?u.a.open({message:a||this.props.title||"",description:'Copied "'.concat(r,'" to clipboard')}):u.a.open({message:this.props.title||"",description:'Copied "'.concat(a,'" to clipboard')})}}},{key:"deleteCategory",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";t=t.toLowerCase(),e.categories?e.categories=e.categories.filter((function(e){return e!==t})):e.tags=e.tags.filter((function(e){return e!==t}))}},{key:"addCategory",value:function(e,t){t&&(t=t.toLowerCase(),e.categories?e.categories.some((function(e){return e===t}))||e.categories.push(t):e.tags.some((function(e){return e===t}))||e.tags.push(t))}},{key:"renderTags",value:function(){var e=this.props.piece,t=e.id,n=e.tags,a=n.categories?n:n.filter((function(e){return!"tiny,small,medium,large,favorite,western,eastern".includes(e)}));return a.length?l.a.createElement(l.a.Fragment,null,l.a.createElement("span",{style:{margin:"0 0 0 4px"}},"("),a.map((function(e){return l.a.createElement("span",{key:"".concat(t,"#").concat(e),style:{margin:"0 4px"}},e)})),l.a.createElement("span",null,")")):""}},{key:"renderData",value:function(e){var t=this.props,n=t.dataRender,a=t.style;return n?n(e):l.a.createElement("pre",{className:"piece",style:a||{}},e)}},{key:"renderShareButton",value:function(){var e=this;return l.a.createElement(d.a,{style:{margin:"0 16px 0 0"},onClick:function(){return e.onCopy("text")}})}},{key:"render",value:function(){var e=this,t=this.props,n=t.piece,a=t.upOptionRender,r=t.bottomOptionRender,o=n.id,i=n.name,s=n.data,c=n.tags,u=n.categories;if(!s)return"";var d=(u||c).includes("favorite");return l.a.createElement("div",{key:"piece#".concat(o||i),className:"piece-container shadow-right-bottom"},a&&a(n),l.a.createElement("div",null,this.renderData(s)),r&&r(n),l.a.createElement("div",{style:{display:"flex",color:"#1890ff",margin:"4px",padding:"8px 0"}},l.a.createElement("span",null,i),l.a.createElement("span",{style:{flex:"auto"}}),d&&l.a.createElement(g.a,{style:{margin:"0 24px"},onClick:function(){e.deleteCategory(n,"favorite"),Object(C.a)("event@favorite-changed"),e.forceUpdate()}}),!d&&l.a.createElement(f.a,{style:{margin:"0 24px"},onClick:function(){e.addCategory(n,"favorite"),Object(C.a)("event@favorite-changed"),e.forceUpdate()}}),this.renderShareButton()))}}]),n}(l.a.Component);t.a=b},138:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return s}));var a=n(158);function r(e,t){for(var n=0,a=Object.values(t);n<a.length;n++){a[n].value=0}e.forEach((function(e){e.tags.forEach((function(e){t[e]?t[e].value++:t[e]={value:1,checked:!1}}))}))}function o(e){var t=-1!==(e=e.join(",")+",").indexOf("favorite,")?1:10,n=10;return-1!==e.indexOf("tiny,")?n=1:-1!==e.indexOf("small,")?n=2:-1!==e.indexOf("medium,")?n=3:-1!==e.indexOf("large,")&&(n=4),[t,n]}function i(e){e.sort((function(e,t){var n=o(e.tags),r=Object(a.a)(n,2),i=r[0],s=r[1],c=o(t.tags),l=Object(a.a)(c,2),u=l[0],d=l[1];return i!==u?i-u:s!==d?s-d:"default"===e.name?-1:"default"===t.name?1:e.name.localeCompare(t.name)}))}function s(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return(e=e.trim())?e.split(/ |-|\/|\\|\.|,|\?|!|\u2018|\u2019|'|"|'|:|;|\(|\)/).map((function(e){return e.trim()})).filter((function(e){return e.length>0})):[]}},140:function(e,t,n){"use strict";var a=n(13),r=n(14),o=n(5),i=n(16),s=n(15),c=n(0),l=n.n(c),u=n(830),d=n(829),g=n(848),f=n(849),p=n(850),h=(n(41),n(18)),m=n(137),v=n(138),y=n(20),C=n(3),b=n(158),k=n(50),E=n(842),x=n(843),O=n(844),j=n(845),S=n(846),w=n(847),T=function(e){Object(i.a)(n,e);var t=Object(s.a)(n);function n(e){var r;return Object(a.a)(this,n),(r=t.call(this,e)).state={text:e.text,sortBy:"name"===e.filterBy?1:4},r.sortedCategories=[],r.clusters=e.clusters||[],r.folderContents=new Map,r.onToggleSort=r.onToggleSort.bind(Object(o.a)(r)),r.onToggleCategory=r.onToggleCategory.bind(Object(o.a)(r)),r.onToggleCategories=r.onToggleCategories.bind(Object(o.a)(r)),r.onToggleOpenFolder=r.onToggleOpenFolder.bind(Object(o.a)(r)),r.didReceiveProps(e),r.sort(r.state.sortBy),r}return Object(r.a)(n,[{key:"componentWillReceiveProps",value:function(e){e.text!==this.state.text&&this.didReceiveProps(e)}},{key:"didReceiveProps",value:function(e){this.words=Object(v.c)(e.text).map((function(e){return e.toLowerCase()}))}},{key:"getNextSortMethod",value:function(e){switch(e){case 1:return 2;case 2:return 4;case 4:return 1}}},{key:"getClusters",value:function(){return this.clusters}},{key:"getNames",value:function(){return"name"===this.props.filterBy?this.props.names:[]}},{key:"getCategories",value:function(){return this.props.categories}},{key:"getSortedCategories",value:function(){var e=this.sortedCategories;if(!e.length)for(var t=this.clusters,n=this.getCategories(),a=0,r=Object.keys(n);a<r.length;a++){var o=r[a];if(!t.includes(o)){var i=n[o].value;0!==i&&e.push({name:o,value:i})}}return e}},{key:"sort",value:function(e){var t="name"===this.props.filterBy?this.getNames():this.getSortedCategories();switch(e){case 1:t.sort((function(e,t){return e.name.localeCompare(t.name)}));break;case 2:t.sort((function(e,t){return t.name.localeCompare(e.name)}));break;case 4:t.sort((function(e,t){return"favorite"===e.name?-1:"favorite"===t.name?1:t.value-e.value}))}}},{key:"checkCategory",value:function(e,t){var n=this.getCategories()[e];n&&(n.checked=t)}},{key:"onToggleCategory",value:function(e){var t=this.getCategories();if(t[e]){var n=t[e];n.checked=!n.checked,Object(C.a)("event@category-changed")}}},{key:"onToggleCategories",value:function(){for(var e=this.getClusters(),t=this.getCategories(),n=0,a=0,r=Object.keys(t);a<r.length;a++){var o=r[a],i=t[o];0===i.value||e.includes(o)||(i.checked||n++)}for(var s=!!n,c=0,l=Object.keys(t);c<l.length;c++){var u=l[c],d=t[u];0===d.value||e.includes(u)||(d.checked=s)}Object(C.a)("event@category-changed")}},{key:"onToggleSelectFolder",value:function(e){return this.onToggleCategory(e)}},{key:"onToggleOpenFolder",value:function(e){var t=this.getCategories();if(t[e]){var n=t[e];n.opened=!n.opened,this.forceUpdate()}}},{key:"onToggleSort",value:function(){var e=this.getNextSortMethod(this.state.sortBy);e&&(this.setState({sortBy:e}),this.sort(e))}},{key:"renderCategories",value:function(){var e=this,t=this.getCategories();return this.getSortedCategories().map((function(n,a){var r=n.name,o=n.value,i=t[r].checked;return l.a.createElement("span",{key:r,className:i?"checked-tag":"tag",style:{borderBottom:a%2&&!i?"1px dotted lightskyblue":void 0},onClick:function(){return e.onToggleCategory(r)}},o>1?"".concat(r,"(").concat(o,")"):r)}))}},{key:"renderNames",value:function(){var e=this.words;return this.getNames().map((function(t,n){var a=t.name,r=t.value,o=r>1?"".concat(a,"(").concat(r,")"):a,i=!!e.length&&e.some((function(e){return a.startsWith(e)}));return l.a.createElement("span",{key:a,style:{margin:"0 8px 0 0",borderBottom:n%2?"1px dotted lightskyblue":void 0,background:i?"yellow":void 0},onClick:function(e){Object(C.a)("event@tag-clicked",a)}},o)}))}},{key:"getFolderContent",value:function(e){var t=this.folderContents;if(t.has(e))return t.get(e);var n=new Map;this.props.pieces.filter((function(t){return t.tags.includes(e)})).forEach((function(e){var t=e.name;n.has(t)?n.set(t,n.get(t)+1):n.set(t,1)}));var a,r=[],o=Object(k.a)(n.entries());try{for(o.s();!(a=o.n()).done;){var i=Object(b.a)(a.value,2),s=i[0],c=i[1];r.push({name:s,value:c})}}catch(l){o.e(l)}finally{o.f()}return t.set(e,r),r}},{key:"renderFolderContent",value:function(e){for(var t=this,n=this.words,a=e.name,r=this.getFolderContent(a),o=[],i=function(e){var i=r[e].name,s=!!n.length&&n.some((function(e){return i.startsWith(e)}));o.push(l.a.createElement("span",{key:i,style:{margin:"0 8px 0 0",borderBottom:e%2?"1px dotted lightskyblue":void 0,background:s?"yellow":void 0},onClick:function(e){t.checkCategory(a,!0),Object(C.a)("event@tag-clicked",i)}},"".concat(i,"(").concat(r[e].value,")")))},s=0;s<r.length;s++)i(s);return o}},{key:"renderFolder",value:function(e){var t=this,n=this.getCategories(),a=e.name,r=e.value,o=n[a],i=o.checked,s=o.opened?E.a:x.a;return l.a.createElement("div",{key:a,className:i?"checked-tag":"tag"},l.a.createElement(s,{onClick:function(){return t.onToggleOpenFolder(a)}}),l.a.createElement("span",{style:{margin:"0 0 0 8px"},onClick:function(){return t.onToggleCategory(a)}},r>1?"".concat(a," (").concat(r,")"):a))}},{key:"renderFolders",value:function(){var e=this,t=this.getCategories();return this.getSortedCategories().map((function(n,a){var r=n.name,o=t[r].opened;return l.a.createElement("div",{key:"folder#".concat(r)},e.renderFolder(n),o&&l.a.createElement("div",{style:{margin:"4px 0 0 24px",overflow:"auto",display:"flex",flexWrap:"wrap"}},e.renderFolderContent(n)))}))}},{key:"render",value:function(){var e=this,t=this.props.filterBy,n=this.state.sortBy,a=4===n?O.a:1===n?j.a:S.a;return"category"===t?l.a.createElement("div",null,l.a.createElement("div",{className:"underline",style:{display:"flex",alignItems:"center",margin:"8px 0 0 0"}},l.a.createElement("span",null,"Categories"),l.a.createElement("span",{style:{flex:"auto"}}),l.a.createElement(a,{style:{color:"#1890ff",margin:"0 24px 0 0"},onClick:this.onToggleSort}),l.a.createElement(w.a,{style:{color:"#1890ff"},onClick:function(){return e.onToggleCategories()}})),l.a.createElement("div",{className:"component-optionbar",onScroll:function(e){return Object(h.c)(e,-4)}},this.renderCategories())):"name"===t?l.a.createElement("div",null,l.a.createElement("div",{className:"underline",style:{display:"flex",alignItems:"center",margin:"8px 0 0 0"}},l.a.createElement("span",null,"Names "),l.a.createElement("span",{style:{flex:"auto"}}),l.a.createElement(a,{style:{color:"#1890ff"},onClick:this.onToggleSort})),l.a.createElement("div",{className:"component-optionbar",onScroll:function(e){return Object(h.c)(e,-4)}},this.renderNames())):"folder"===t?l.a.createElement("div",null,l.a.createElement("div",{className:"underline",style:{display:"flex",alignItems:"center",margin:"8px 0 0 0"}},l.a.createElement("span",null,"Categories"),l.a.createElement("span",{style:{flex:"auto"}}),l.a.createElement(a,{style:{color:"#1890ff",margin:"0 24px 0 0"},onClick:this.onToggleSort}),l.a.createElement(w.a,{style:{color:"#1890ff"},onClick:function(){return e.onToggleCategories()}})),l.a.createElement("div",{className:"component-optionbar",style:{display:"list-item"},onScroll:function(e){return Object(h.c)(e,-4)}},this.renderFolders())):""}}]),n}(l.a.Component),B=function(e){Object(i.a)(n,e);var t=Object(s.a)(n);function n(e){var r;return Object(a.a)(this,n),(r=t.call(this,e)).state={filterBy:e.filterBy},r.clusters=e.clusters||[],r.onRefresh=r.onRefresh.bind(Object(o.a)(r)),r.onEvent=r.onEvent.bind(Object(o.a)(r)),r.onTapExpandCollapseButton=r.onTapExpandCollapseButton.bind(Object(o.a)(r)),r.onSelectCluster=r.onSelectCluster.bind(Object(o.a)(r)),r.didReceiveProps(e),r.visiblePieces=r.getVisiblePieces(),r}return Object(r.a)(n,[{key:"componentDidMount",value:function(){Object(C.b)("pieceCollection",this.onEvent)}},{key:"componentWillUnmount",value:function(){Object(C.c)("pieceCollection",this.onEvent)}},{key:"componentWillReceiveProps",value:function(e){var t=this.snapshot;e.store.hash===t.hash&&e.maxPieces===t.maxPieces&&e.store.text===t.text&&e.filterTypes===t.filterTypes||(this.didReceiveProps(e),this.visiblePieces=this.getVisiblePieces(),this.forceUpdate())}},{key:"didReceiveProps",value:function(e){this.snapshot={hash:e.store.hash,text:e.store.text,maxPieces:e.maxPieces,filterTypes:e.filterTypes}}},{key:"getClusters",value:function(){return this.clusters}},{key:"getNames",value:function(){var e=this.props.store;return(e.getNames?e.getNames():e.names)||[]}},{key:"getCategories",value:function(){var e=this.props.store;return e.getCategories?e.getCategories():e.categories}},{key:"getCheckedClusters",value:function(){var e=this.getCategories();return this.getClusters().filter((function(t){return!!e[t]&&e[t].checked}))}},{key:"getVisiblePieces",value:function(e){var t=this.props.store,n=t.text,a=t.pieces,r=this.props.maxPieces;e||(e=this.state.filterBy);for(var o=this.getCategories(),i=this.getClusters(),s=this.getCheckedClusters(),c=Object(v.c)(n).map((function(e){return e.toLowerCase()})),l=[],u=i.length>0,d="category"===e||"folder"===e,g="name"===e||"folder"===e,f=0;f<a.length;f++){var p=a[f];if(p.data){if(r&&l.length>=r)break;var h=p.tags,m=p.categories;if(u){for(var y=!1,C=0;C<s.length;C++){var b=s[C];if(h.includes(b)||(null===m||void 0===m?void 0:m.includes(b))){y=!0;break}}if(!y)continue}if(d){var k=m||h.filter((function(e){return!i.includes(e)}));if(!k.length)continue;if(!k.some((function(e){return o[e]&&o[e].checked})))continue}if(g)if(c.length){if("continue"===function(){var e=p.name.toLowerCase();if(c.some((function(t){return!!e.startsWith(t)||!!e.includes(" ".concat(t))})))return l.push(p),"continue"}())continue}else"category"===e&&l.push(p);else l.push(p)}}return Object(v.b)(l),console.log("pieceCollection: found ".concat(l.length," pieces")),l}},{key:"onEvent",value:function(e,t){console.log("pieceCollection: ".concat(e)),"event@category-changed"===e&&this.onRefresh()}},{key:"onRefresh",value:function(e){this.visiblePieces=this.getVisiblePieces(e),this.forceUpdate()}},{key:"onTapExpandCollapseButton",value:function(e){var t=this.props.store;t.optionExpanded=!t.optionExpanded,this.forceUpdate()}},{key:"onSelectCluster",value:function(e,t){var n=this.getCategories();n[e]&&(n[e].checked=t,this.onRefresh())}},{key:"renderClusters",value:function(){var e=this,t=this.getCategories(),n=this.getClusters();return n.length?l.a.createElement(l.a.Fragment,null,n.map((function(n){return l.a.createElement(u.a,{key:n,checked:t[n].checked,onChange:function(t){return e.onSelectCluster(n,t.target.checked)}},n)}))):l.a.createElement("span",null,"Options")}},{key:"renderExpandCollapseButton",value:function(e){var t=e?g.a:f.a;return[l.a.createElement("span",{style:{flex:"auto"},onClick:this.onTapExpandCollapseButton}),l.a.createElement(t,{style:{color:"#1890ff",alignSelf:"center"},onClick:this.onTapExpandCollapseButton})]}},{key:"renderFilters",value:function(){return l.a.createElement(T,{text:this.props.store.text,pieces:this.props.store.pieces,categories:this.getCategories(),names:this.getNames(),clusters:this.getClusters(),filterBy:this.props.filterBy})}},{key:"renderSettings",value:function(){var e=this.props.store.optionExpanded,t=this.getCheckedClusters(),n=this.getClusters().length>0?e&&t.length>0:e;return l.a.createElement("div",null,l.a.createElement("div",{className:"underline",style:{display:"flex",margin:"8px 0 0 0"}},this.renderClusters(),l.a.createElement(y.b,null,this.renderExpandCollapseButton(e)),l.a.createElement(y.c,null,this.renderExpandCollapseButton(e))),n&&l.a.createElement(y.b,null,this.renderFilters()),n&&l.a.createElement(y.c,null,this.renderFilters()),l.a.createElement(y.a,null,this.renderFilters()))}},{key:"renderSummary",value:function(){var e,t=this.props.store.text,n=this.visiblePieces.length;if(n>0){var a=n===this.props.maxPieces?"+":"";e=t?"".concat(n).concat(a,' match "').concat(t,'"'):"Total ".concat(n).concat(a)}else{e=this.getCheckedClusters().length?t?'Oops, nothing matches "'.concat(t,'"'):"":"Oops, nothing selected!"}return l.a.createElement("div",{style:{margin:"8px 0"}},e)}},{key:"renderPieces",value:function(e){var t=this,n=this.props.pieceRender;return l.a.createElement("div",null,e.map((function(e){return n?n(e):l.a.createElement(m.a,{key:"piece#".concat(e.id||e.name),style:{margin:"8px auto"},piece:e,title:t.props.title})})),l.a.createElement(d.a,{className:"backtop"},l.a.createElement(p.a,{style:{color:"lightskyblue"}})))}},{key:"render",value:function(){var e=this.props,t=e.store,n=e.inputRender,a=e.controlRender,r=e.showSummary,o=e.store.optionExpanded,i=this.visiblePieces,s=a&&i.length>0;return l.a.createElement("div",{style:{display:"flex",height:"100%"}},l.a.createElement("div",{className:"component-box"},n&&n(),l.a.createElement("div",{className:"component-innerbar"},this.renderSettings(),o&&s&&a(t)),r&&this.renderSummary(),l.a.createElement("div",{className:"scrollable",onScroll:h.c},this.renderPieces(i))),l.a.createElement("div",{className:"component-sidebar"},this.renderSettings(),s&&a(t)))}}]),n}(l.a.Component);t.a=B}}]);
//# sourceMappingURL=2.ec184d85.chunk.js.map