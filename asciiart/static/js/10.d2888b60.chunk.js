(this.webpackJsonpawesomeasciiart=this.webpackJsonpawesomeasciiart||[]).push([[10],{125:function(e,t,a){"use strict";a.d(t,"a",(function(){return i})),a.d(t,"b",(function(){return r}));var n=a(126);function i(e,t,a){var i=Object(n.a)("favorites#".concat(e));if(!i){if(!a)return;i=a}var r=new Set(i);t.forEach((function(e){var t=e.tags.filter((function(e){return"favorite"!==e}));r.has(e.id||e.name)&&t.unshift("favorite"),e.tags=t}))}function r(e,t){var a=[];t.forEach((function(e){e.tags.includes("favorite")&&a.push(e.id)})),Object(n.b)("favorites#".concat(e),a)}},126:function(e,t,a){"use strict";function n(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"localStorage";if(t in window){var a=window[t].getItem(e);if(a)return console.log("storage->".concat(e,": ").concat(a.substr(0,64),"...")),JSON.parse(a)}}function i(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"localStorage";if(void 0!==t&&null!==t&&a in window){var n=JSON.stringify(t);console.log("storage<- ".concat(e,": ").concat(n.substr(0,64),"...")),window[a].setItem(e,n)}}a.d(t,"a",(function(){return n})),a.d(t,"b",(function(){return i}))},137:function(e,t,a){"use strict";var n=a(13),i=a(14),r=a(5),o=a(16),c=a(15),s=a(0),l=a.n(s),u=a(837),d=a(839),m=a(840),f=a(841),p=a(159),g=a.n(p),v=a(162);a(41);function h(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=document.createElement("textarea");t.value=e,t.setAttribute("readonly",""),t.style.position="absolute",t.style.left="-9999px",document.body.appendChild(t);var a=document.getSelection().rangeCount>0&&document.getSelection().getRangeAt(0);t.select(),document.execCommand("copy"),document.body.removeChild(t),a&&(document.getSelection().removeAllRanges(),document.getSelection().addRange(a))}function y(e){for(var t=e.split(","),a=t[0].match(/:(.*?);/)[1],n=atob(t[1]),i=n.length,r=new Uint8Array(i);i--;)r[i]=n.charCodeAt(i);return new Blob([r],{type:a})}var b=a(3),x=function(e){Object(o.a)(a,e);var t=Object(c.a)(a);function a(e){var i;return Object(n.a)(this,a),(i=t.call(this,e)).onCopy=i.onCopy.bind(Object(r.a)(i)),i}return Object(i.a)(a,[{key:"onCopy",value:function(e){var t=this.props.piece,a=t.id,n=t.name,i=t.data;if("png"===e)g.a.toBlob(document.getElementById(a),{backgroundColor:"#fff"}).then((function(e){return Object(v.saveAs)(e,"".concat(n,".png"))}));else if("jpg"===e)g.a.toJpeg(document.getElementById(a),{backgroundColor:"#fff"}).then((function(e){var t=y(e);Object(v.saveAs)(t,"".concat(n,".jpg"))}));else if("svg"===e)g.a.toSvgDataURL(document.getElementById("piece#".concat(a)),{backgroundColor:"#fff"}).then((function(e){var t=y(e);Object(v.saveAs)(t,"".concat(n,".svg"))}));else{if("html"===e)h('<!DOCTYPE html><html lang="en"><body><div>\n  <pre style="margin:8px auto; line-height:1; font-family:Fira Mono,Andale Mono,Consolas, monospace">\n  '.concat(i,"\n  </pre>\n  </div></body></html>"));else h(i);-1===i.indexOf("\n")?u.a.open({message:n||this.props.title||"",description:'Copied "'.concat(i,'" to clipboard')}):u.a.open({message:this.props.title||"",description:'Copied "'.concat(n,'" to clipboard')})}}},{key:"deleteCategory",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";t=t.toLowerCase(),e.categories?e.categories=e.categories.filter((function(e){return e!==t})):e.tags=e.tags.filter((function(e){return e!==t}))}},{key:"addCategory",value:function(e,t){t&&(t=t.toLowerCase(),e.categories?e.categories.some((function(e){return e===t}))||e.categories.push(t):e.tags.some((function(e){return e===t}))||e.tags.push(t))}},{key:"renderTags",value:function(){var e=this.props.piece,t=e.id,a=e.tags,n=a.categories?a:a.filter((function(e){return!"tiny,small,medium,large,favorite,western,eastern".includes(e)}));return n.length?l.a.createElement(l.a.Fragment,null,l.a.createElement("span",{style:{margin:"0 0 0 4px"}},"("),n.map((function(e){return l.a.createElement("span",{key:"".concat(t,"#").concat(e),style:{margin:"0 4px"}},e)})),l.a.createElement("span",null,")")):""}},{key:"renderData",value:function(e){var t=this.props,a=t.dataRender,n=t.style;return a?a(e):l.a.createElement("pre",{className:"piece",style:n||{}},e)}},{key:"renderShareButton",value:function(){var e=this;return l.a.createElement(d.a,{style:{margin:"0 16px 0 0"},onClick:function(){return e.onCopy("text")}})}},{key:"render",value:function(){var e=this,t=this.props,a=t.piece,n=t.upOptionRender,i=t.bottomOptionRender,r=a.id,o=a.name,c=a.data,s=a.tags,u=a.categories;if(!c)return"";var d=(u||s).includes("favorite");return l.a.createElement("div",{key:"piece#".concat(r||o),className:"piece-container shadow-right-bottom"},n&&n(a),l.a.createElement("div",null,this.renderData(c)),i&&i(a),l.a.createElement("div",{style:{display:"flex",color:"#1890ff",margin:"4px",padding:"8px 0"}},l.a.createElement("span",null,o),l.a.createElement("span",{style:{flex:"auto"}}),d&&l.a.createElement(m.a,{style:{margin:"0 24px"},onClick:function(){e.deleteCategory(a,"favorite"),Object(b.a)("event@favorite-changed"),e.forceUpdate()}}),!d&&l.a.createElement(f.a,{style:{margin:"0 24px"},onClick:function(){e.addCategory(a,"favorite"),Object(b.a)("event@favorite-changed"),e.forceUpdate()}}),this.renderShareButton()))}}]),a}(l.a.Component);t.a=x},832:function(e,t,a){"use strict";a.r(t);var n=a(13),i=a(14),r=a(5),o=a(16),c=a(15),s=a(0),l=a.n(s),u=a(825),d=a(824),m=a(122),f=a(826),p=a(830),g=a(848),v=a(849),h=(a(41),a(3)),y=a(125),b=a(18),x=a(137),E=a(133),O=a.n(E),w=a(11),C=a(134),k=a(126),S=a(136),j=a(158),I=a(828);function A(e,t){return~~(e*t)}function W(e){return e>255?255:e<0?0:e}function N(e,t,a){for(var n=0;n<e.length;n++)e[n]=W(A(e[n],t)+a)}function B(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return N(e,1,t)}function M(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return N(e,t,0)}var R=document.createElement("canvas");R.style.display="none";var z=R.getContext("2d"),D=function(){var e=document.createElement("pre");e.style.display="inline",e.textContent="a",document.body.appendChild(e);var t=e.getBoundingClientRect(),a=t.width,n=t.height;document.body.removeChild(e);var i=n/a;return console.log("asciify: font ratio: ".concat(i)),i}(),U=function(e,t,a,n){return 0===e?255:.299*t+.587*a+.114*n},F=function(e,t,a){for(var n=e.getImageData(0,0,t,a),i=[],r=0;r<n.data.length;r+=4){var o=n.data[r],c=n.data[r+1],s=n.data[r+2],l=n.data[r+3],u=U(l,o,c,s);n.data[r]=n.data[r+1]=n.data[r+2]=u,i.push(u)}return e.putImageData(n,0,0),i};function L(e,t,a){return e.reduce((function(e,n,i){var r=function(e,t){return t[Math.ceil((t.length-1)*e/255)]}(n,t);return(i+1)%a===0&&(r+="\n"),e+r}),"")}function P(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:80,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1,i=Math.floor(D*e);if(n>0&&t>n){var r=Math.floor(i*n/t);return[r,n]}if(a>0&&e>a){var o=Math.floor(t*a/i);return[a,o]}return[i,t]}function T(e,t){return t?e.split("").reverse().join(""):e}function J(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=e.imageDescriptor,n=a.image,i=n.naturalWidth||n.width;t.maxWidth?e.asciifyOptions=t:t=e.asciifyOptions;var r=t.maxWidth;r>i&&(r=i);var o=P(i,n.naturalHeight||n.height,r),c=Object(j.a)(o,2),s=c[0],l=c[1];R.width=s,R.height=l,a.grayScales&&a.grayScalesWidth===s&&a.grayScaleHeight===l||(z.drawImage(n,0,0,s,l),a.grayScalesWidth=s,a.grayScalesHeight=l,a.grayScales=F(z,s,l));var u=T(e.grayRamp||e.patterns[0].value,t.inverse),d=a.grayScales;return 0===t.brightness&&1===t.contrast||(d=Object(S.a)(d),0!==t.brightness&&B(d,t.brightness),1!==t.contrast&&M(d,t.contrast)),L(d,u,r)}function $(e){var t=e.patterns;if(t.length<2)return"";var a=e.grayRamp||t[0].value;return l.a.createElement("div",{style:{display:"flex",alignItems:"center",flexWrap:"wrap",margin:"8px 0"}},l.a.createElement(I.a,{style:{width:250},defaultValue:a,placeholder:"Select a pattern",onChange:function(t){e.grayRamp=t,e.data=J(e),Object(h.a)("event@refresh")}},t.map((function(e,t){return l.a.createElement(I.a.Option,{key:"pattern#".concat(t),value:e.value},"".concat(e.name||e.value))}))))}function H(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=e.id,n=e.name;return l.a.createElement(x.a,{key:"asciify#".concat(a||n),piece:e,title:"Asciify",dataRender:function(e){return l.a.createElement("pre",{className:"asciify-piece",style:{fontSize:"".concat(t.fontSize||8,"px")}},e)},bottomOptionRender:function(){return $(e)}})}var V=[{name:"default",patterns:[{value:"@&$%0>o^li;:=~-`'.  "}]},{name:"ten characters",patterns:[{value:"@#%*+=-:. "}]},{name:"blocks",patterns:[{value:"\u2588\u2593\u2592\u2591 "}]},{name:"More patterns",patterns:[{value:"#&B9@?sri:,. "},{name:"five characters",patterns:[{value:"@=:. "}]},{value:"@&$%0<o~^li;:=~-'. "},{value:"@%#*+=-:. "},{value:"@#8&o:*. "},{value:"@#$=*!;:~-,.  "},{value:"M$o|*:=\\. "},{value:"@80GCLft1i;:,. "},{value:"MNFV$I*:. "},{value:"#@&%0?="},{value:"@%$&#^+()~!*_"},{value:"$@B%8&WM#*oahkbdpqwmZO0QLCJUYXzcvunxrjft/|()1{}[]?-_+~<>i!lI;:,\"^`'. "},{value:"@%DMm890$&dawB6hbgSqeopWERO4#5knZsGQUP3XCFI2cNAHu1^fJT7zxvV>y=Y?[<KLrt+/jl]\\{}|()~!*\"i-;':,.`_"},{value:"@%DMm890$&dawB6hbgSqeopWERO4#5knZsGQUP3XCFI2cNAHu1^fJT7zxvV>y=Y?[<KLrt+/jl]\\{}|()~!*i-;:"}]}],Y={hash:0,optionExpanded:!0,asciifyOptions:{inverse:!1,brightness:0,contrast:1,fontSize:4,maxWidth:window.screen.availWidth/10|80},image:{name:"",src:"",width:0,height:0},thumbnailPiece:{name:"thumbnail",patterns:V[0].patterns,tags:[],data:"",generator:function(e){e.data=J(e,{fontSize:4,maxWidth:80}),Object(h.a)("event@refresh")},render:function(e){return H(e,{fontSize:4,maxWidth:80})}},pieces:[]},q=!1;function G(){return(G=Object(C.a)(O.a.mark((function e(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!q){e.next=2;break}return e.abrupt("return");case 2:V.forEach((function(e){Y.pieces.push({name:e.name,tags:[],patterns:e.patterns,data:"",generator:function(e){e.data=J(e,Y.asciifyOptions),Object(h.a)("event@refresh")},render:function(e){return H(e,Y.asciifyOptions)}})})),Object(y.a)("asciify",Y.pieces),q=!0;case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Q(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if("imgsrc"===e)Object(k.b)("asciify#imgsrc",{src:Y.image.src});else if("pref"===e){var t={asciifyOptions:Y.asciifyOptions,image:{name:Y.image.name,width:Y.image.width,height:Y.image.height}},a=JSON.stringify(t);""!==a&&Object(k.b)("asciify#pref",t)}}var X=Y,Z=(u.a.Dragger,function(e){Object(o.a)(a,e);var t=Object(c.a)(a);function a(e){var i;return Object(n.a)(this,a),(i=t.call(this,e)).fileScan=function(e){var t=e.size/1024/1024<32,a=["image/jpg","image/jpeg","image/png"].some((function(t){return t.includes(e.type)}));return t||d.a.error("Image must be smaller than 32M!"),a||d.a.error("Please use the image with format of 'jpg, png'"),!1},i.fileSelectChange=function(e){var t=e.fileList,a=t[t.length-1].originFileObj;i.loadImageFile(a)},i.image={name:"",width:"",height:""},i.workingImage=new Image,i.onEvent=i.onEvent.bind(Object(r.a)(i)),i.onTapExpandCollapseButton=i.onTapExpandCollapseButton.bind(Object(r.a)(i)),i}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=this;(function(){return G.apply(this,arguments)})().then((function(){if(function(){var e=Object(k.a)("asciify#pref");Y.asciifyOptions=(null===e||void 0===e?void 0:e.asciifyOptions)||Y.asciifyOptions,Y.image=Object(w.a)(Object(w.a)({},null===Y||void 0===Y?void 0:Y.image),null===e||void 0===e?void 0:e.image);var t=Object(k.a)("asciify#imgsrc");Y.image.src=(null===t||void 0===t?void 0:t.src)||""}(),X.image.src){var t=e.workingImage;t.onload=function(){e.onAsciify()},t.src=X.image.src}})),Object(h.b)("asciify",this.onEvent)}},{key:"componentWillUnmount",value:function(){Object(h.c)("asciify",this.onEvent)}},{key:"onEvent",value:function(e,t){e.startsWith("event@scrolled")||(console.log("asciify: ".concat(e)),"event@refresh"===e?this.forceUpdate():"event@favorite-changed"===e&&Object(y.b)("asciify",X.pieces))}},{key:"onTapExpandCollapseButton",value:function(e){X.optionExpanded=!X.optionExpanded,this.forceUpdate()}},{key:"onAsciify",value:function(){var e=this,t=X.pieces,a=X.thumbnailPiece;t.forEach((function(t){t.imageDescriptor={image:e.workingImage},t.generator(t)})),a.imageDescriptor={image:this.workingImage},a.generator(a),this.forceUpdate(),Q("pref")}},{key:"loadImageFile",value:function(e){var t=this,a=new FileReader;a.onload=function(e){var a=t.workingImage;a.onload=function(){var e=a.naturalWidth,n=a.naturalHeight;e<=25?d.a.error("Image size is too small"):(t.previewImg&&(t.previewImg.src=a.src),t.image.width=e,t.image.height=n,X.image.src=a.src,X.image.width=e,X.image.height=n,t.onAsciify(),Q("imgsrc"))},a.src=e.target.result},X.image.name=e.name,this.image.name=e.name,a.readAsDataURL(e)}},{key:"getMaxAsciifyWidth",value:function(){return Math.min(X.image.width-1,500)}},{key:"renderInput",value:function(){return l.a.createElement("div",null,l.a.createElement(u.a,{accept:"image/*",multiple:!1,showUploadList:!1,beforeUpload:this.fileScan,onChange:this.fileSelectChange},l.a.createElement(m.a,{type:"primary"},"Open an image file")))}},{key:"isImageLoaded",value:function(){return!!X.image.src}},{key:"renderPreviewImage",value:function(){var e=this,t=X.image,a=t.src,n=t.width,i=t.height,r=120*i/n;return l.a.createElement("div",{style:{display:"flex",flexDirection:"column"}},l.a.createElement("img",{ref:function(t){return e.previewImg=t},src:a||"./static/image/dot.png",alt:"",style:{width:"".concat(120,"px"),height:"".concat(r),objectFit:"contain"}}),l.a.createElement("div",null,"w: ".concat(n," px")),l.a.createElement("div",null,"h: ".concat(i," px")))}},{key:"renderThumbnailImage",value:function(){var e=X.thumbnailPiece;return l.a.createElement("pre",{className:"piece",style:{fontSize:"4px",margin:"0 auto"}},e.data)}},{key:"renderExpandCollapseBar",value:function(){var e=X.optionExpanded?g.a:v.a;return l.a.createElement("div",{className:"underline",style:{display:"flex",width:"100%",margin:"8px 0"},onClick:this.onTapExpandCollapseButton},l.a.createElement("span",null,"ASCIIfy image options"),l.a.createElement("span",{style:{flex:"auto"}}),l.a.createElement(e,{style:{color:"#1890ff",alignSelf:"center"}}))}},{key:"renderSlider",value:function(e,t,a,n,i,r){var o=this,c=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"",s=X.asciifyOptions[e]||0;return l.a.createElement("div",{style:r},l.a.createElement("span",null,"".concat(t,": ").concat(s)),l.a.createElement(f.a,{min:a,max:n,step:i,value:s,tipFormatter:function(e){return"".concat(e," ").concat(c)},onChange:function(t){X.asciifyOptions[e]=t,"fontSize"!==e&&o.onAsciify(),o.forceUpdate(),Q("pref")}}))}},{key:"renderAsciifyOptions",value:function(){var e=this;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"underline"},l.a.createElement(p.a,{style:{margin:"0 16px 0 0"},checked:X.asciifyOptions.inverse,onChange:function(t){X.asciifyOptions.inverse=t.target.checked,e.onAsciify()}},"Inverse "),this.renderSlider("brightness","Brightness",-50,200,1,{minWidth:"200px",maxWidth:"576px",margin:"8px 16px 8px 0"}),this.renderSlider("contrast","Contrast",.1,10,.1,{width:"150px",margin:"8px 0"})),l.a.createElement("div",null,this.renderSlider("fontSize","Font Size",2,12,1,{width:"100px",margin:"8px 16px 8px 0"},"pixels"),this.renderSlider("maxWidth","Width",25,this.getMaxAsciifyWidth(),1,{minWidth:"200px",maxWidth:"576px",margin:"8px 0"},"characters")))}},{key:"renderAsciifiedImages",value:function(){return l.a.createElement("div",null,X.pieces.map((function(e){var t=e.id,a=e.name;return e.render?e.render(e):l.a.createElement(x.a,{key:"asciify#".concat(t||a),piece:e,title:a,className:"asciify-piece",style:{margin:"8px auto",fontSize:"".concat(X.asciifyOptions.fontSize,"px")}})})))}},{key:"render",value:function(){if(!this.isImageLoaded())return l.a.createElement("div",{style:{display:"flex",height:"100%"}},l.a.createElement("div",{className:"component-box"},this.renderInput()),l.a.createElement("div",{className:"component-sidebar"}));var e=X.optionExpanded;return l.a.createElement("div",{style:{display:"flex",height:"100%"}},l.a.createElement("div",{className:"component-box"},this.renderInput(),l.a.createElement("div",{className:"component-innerbar"},this.renderExpandCollapseBar(),e&&l.a.createElement("div",{style:{display:"flex",margin:"8px",alignItems:"start"}},this.renderPreviewImage(),l.a.createElement("div",{style:{flex:"auto",margin:"0 0 0 16px"}},this.renderAsciifyOptions()))),l.a.createElement("div",{className:"scrollable",onScroll:b.c},this.renderAsciifiedImages())),l.a.createElement("div",{className:"component-sidebar"},l.a.createElement("div",{className:"underline",style:{display:"flex"}},this.renderPreviewImage(),this.renderThumbnailImage()),l.a.createElement("div",{style:{margin:"16px 0 0 0"}},this.renderAsciifyOptions())))}}]),a}(l.a.Component));t.default=Z}}]);
//# sourceMappingURL=10.d2888b60.chunk.js.map