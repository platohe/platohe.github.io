(this.webpackJsonpawesomeidea=this.webpackJsonpawesomeidea||[]).push([[0],{128:function(e,t,n){},223:function(e,t,n){},381:function(e,t){Object.entries||(Object.entries=function(e){for(var t=Object.keys(e),n=t.length,a=new Array(n);n--;)a[n]=[t[n],e[t[n]]];return a})},395:function(e,t){},505:function(e,t){},569:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(33),o=n.n(i),c=n(278);n(380),n(128),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var s=n(9),u=n(10),l=n(18),d=n(12),h=n(13),p=(n(381),n(223),"awesome"),f="black",v="honeydew",g="t",m=":",b="*",k=n(5),y=n(3),j=n(17),O=n(29),x=n(8),w=n.n(x);function S(e,t){var n=new Date;console.log("".concat(e,"-").concat(n.getHours(),":").concat(n.getMinutes(),":").concat(n.getSeconds(),":").concat(n.getMilliseconds()," ").concat(t))}function I(e){S("info",e)}function E(e,t){(void 0===t||t)&&S("dbg",e)}function C(e){0}var _,A=n(281),T="idealab",D="keyval";function P(){return W.apply(this,arguments)}function W(){return(W=Object(j.a)(w.a.mark((function e(){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!_){e.next=2;break}return e.abrupt("return",Promise.resolve(_));case 2:return E("idb: opening db"),e.abrupt("return",Object(A.a)(T,1,{upgrade:function(e){e.createObjectStore(D)}}).then((function(e){return _=e})));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function R(e){return N.apply(this,arguments)}function N(){return(N=Object(j.a)(w.a.mark((function e(t){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",P().then((function(e){return E("idb: loaded ".concat(t)),e.get(D,t)})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function L(e,t){return M.apply(this,arguments)}function M(){return(M=Object(j.a)(w.a.mark((function e(t,n){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",P().then((function(e){return E("idb: saved ".concat(t)),e.put(D,n,t)})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function U(e){return B.apply(this,arguments)}function B(){return(B=Object(j.a)(w.a.mark((function e(t){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",P().then((function(e){return E("idb: deleted ".concat(t)),e.delete(D,t)})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function G(){return F.apply(this,arguments)}function F(){return(F=Object(j.a)(w.a.mark((function e(){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",P().then((function(e){return E("idb: get all keys"),e.getAllKeys(D)})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var q=function(){return"extension"===Object({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_EMAILJS_ACCESS_TOKEN:"767696e1c9e5f17c6176f5afd97619cb",REACT_APP_EMAILJS_SERVICE_ID:"awesome",REACT_APP_EMAILJS_TEMPLATE_ID:"template_zwftzps",REACT_APP_EMAILJS_USER_ID:"user_uplKuSONfJpHb5r2AnXOw",REACT_APP_GITHUB_TOKEN:"5a193fbedb7d6e13708346235f8ba5a0ca496319",REACT_APP_GOOGLE_API_KEY:"AIzaSyC3CQs9LPdJN7GX4RRZ9toHytgMtRBfDdI",REACT_APP_GOOGLE_CLIENT_ID:"586821861057-7b66mi1pr3cr7rf14c4livnvhbsnu2b9.apps.googleusercontent.com",REACT_APP_GOOGLE_CLIENT_SECRET:"_o26TCpjPOCBFXWd4FBj2EWL",REACT_APP_SENDGRID_API_KEY:"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",REACT_APP_SENDGRID_FROM:"plato.he.2000@gmail.com"}).REACT_APP_BUILD_TARGET},K="indexedDB";function H(e,t){var n,a=[],r=Object(O.a)(e);try{for(r.s();!(n=r.n()).done;){var i=n.value;t&&!i.startsWith(t)||a.push(i)}}catch(o){r.e(o)}finally{r.f()}return a}function V(e,t){return e in window?H(Object.keys(window[e]),t):[]}function z(e,t,n){if(t&&e in window){var a=window[e].getItem(t);if(a)return E("storage: loaded ".concat(t)),JSON.parse(a)}return n}function J(e,t,n){t&&n?e in window&&(E("storage: saved ".concat(t)),window[e].setItem(t,JSON.stringify(n))):E("storage:setItem: invalid key or value")}function Y(e,t){t?e in window&&(E("storage: removed ".concat(t)),window[e].removeItem(t)):E("storage:removeItem: invalid key")}function Q(){return(Q=Object(j.a)(w.a.mark((function e(t){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.resolve(V("sessionStorage",t)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function X(){return(X=Object(j.a)(w.a.mark((function e(t,n){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.resolve(z("sessionStorage",t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Z(e){if("indexedDB"===e){if("file:"===window.location.protocol)return"localStorage";if(!(e in window))return"localStorage"}return e}function $(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:K;return q()?new Promise((function(n){window.chrome.storage.local.get([e],(function(a){var r=a[e];r&&(E('storage: retrieved "'.concat(e,'" from extension')),n(JSON.parse(r))),n(t)}))})):"indexedDB"===(n=Z(n))?R(e).then((function(e){return e?JSON.parse(e):t})):Promise.resolve(z(n,e,t))}function ee(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:K;if(q())return new Promise((function(n){window.chrome.storage.local.set(Object(y.a)({},e,JSON.stringify(t)),(function(){E('storage: saved "'.concat(e,'" to extension'))}))}));"indexedDB"===(n=Z(n))?L(e,JSON.stringify(t)):J(n,e,t)}function te(e){if(!e)throw new Error("Precondition failed")}var ne="pref#",ae={APP_BUILD:"1.0.220316",EXECUTE_STRATEGY:"web",LAYOUT_STRATEGY:"responsive",ENABLE_SYNC:!1,ENABLE_TAG_GRAPH:!1,ENABLE_WORKSPACE_MENUITEMS:!1,ENABLE_MULTIPLE_EXPAND_COLLAPSE:!1,LANGUAGE:"en",OS_TYPE:0,DEVICE_TYPE:1,GA_TRACKING_CODE:re("REACT_APP_GA_TRACKING_CODE"),EMAILJS_USER_ID:re("REACT_APP_EMAILJS_USER_ID"),EMAILJS_ACCESS_TOKEN:re("REACT_APP_EMAILJS_ACCESS_TOKEN"),EMAILJS_SERVICE_ID:re("REACT_APP_EMAILJS_SERVICE_ID"),EMAILJS_TEMPLATE_ID:re("REACT_APP_EMAILJS_TEMPLATE_ID"),SENDGRID_FROM:re("REACT_APP_SENDGRID_FROM"),SENDGRID_API_KEY:re("REACT_APP_SENDGRID_API_KEY"),GOOGLE_API_KEY:re("REACT_APP_GOOGLE_API_KEY"),GOOGLE_CLIENT_ID:re("REACT_APP_GOOGLE_CLIENT_ID"),GOOGLE_CLIENT_SECRET:re("REACT_APP_GOOGLE_CLIENT_SECRET")};function re(e){return Object({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_EMAILJS_ACCESS_TOKEN:"767696e1c9e5f17c6176f5afd97619cb",REACT_APP_EMAILJS_SERVICE_ID:"awesome",REACT_APP_EMAILJS_TEMPLATE_ID:"template_zwftzps",REACT_APP_EMAILJS_USER_ID:"user_uplKuSONfJpHb5r2AnXOw",REACT_APP_GITHUB_TOKEN:"5a193fbedb7d6e13708346235f8ba5a0ca496319",REACT_APP_GOOGLE_API_KEY:"AIzaSyC3CQs9LPdJN7GX4RRZ9toHytgMtRBfDdI",REACT_APP_GOOGLE_CLIENT_ID:"586821861057-7b66mi1pr3cr7rf14c4livnvhbsnu2b9.apps.googleusercontent.com",REACT_APP_GOOGLE_CLIENT_SECRET:"_o26TCpjPOCBFXWd4FBj2EWL",REACT_APP_SENDGRID_API_KEY:"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",REACT_APP_SENDGRID_FROM:"plato.he.2000@gmail.com"})[e]}function ie(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(Array.isArray(e))e.forEach((function(e){return ie(e)}));else for(var t=Object.keys(ae),n=0,a=Object.entries(e);n<a.length;n++){var r=Object(k.a)(a[n],2),i=r[0],o=r[1];t.includes(i)&&(ae[i]=o)}}function oe(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";te(e);var n=ae[e];return void 0!==n?n:t}function ce(e,t){te(e),te(t),ae[e]=t,ee("".concat(ne).concat(e),t)}!function(){("browser-extension"===ae.EXECUTE_STRATEGY||q())&&(ae.EXECUTE_STRATEGY="browser-extension",ae.LAYOUT_STRATEGY="mini"),ie(window._env_);var e=[];(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"indexedDB";return"indexedDB"===(t=Z(t))?G().then((function(t){return H(t,e)})):Promise.resolve(V(t,e))})(ne).then((function(t){return e=t,Promise.all(e.map((function(e){return $(e)})))})).then((function(t){for(var n=0;n<e.length;n++){var a=e[n].substr(ne.length);ae[a]=t[n]}}))}();var se=ae,ue=n(1),le=n(280),de=void 0,he={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(e){var t,n,a,r,i,o,c,s="",u=0;for(e=he._utf8_encode(e);u<e.length;)r=(t=e.charCodeAt(u++))>>2,i=(3&t)<<4|(n=e.charCodeAt(u++))>>4,o=(15&n)<<2|(a=e.charCodeAt(u++))>>6,c=63&a,isNaN(n)?o=c=64:isNaN(a)&&(c=64),s=s+de._keyStr.charAt(r)+de._keyStr.charAt(i)+de._keyStr.charAt(o)+de._keyStr.charAt(c);return s},decode:function(e){var t,n,a,r,i,o,c="",s=0;for(e=e.replace(/[^A-Za-z0-9+/=]/g,"");s<e.length;)t=de._keyStr.indexOf(e.charAt(s++))<<2|(r=de._keyStr.indexOf(e.charAt(s++)))>>4,n=(15&r)<<4|(i=de._keyStr.indexOf(e.charAt(s++)))>>2,a=(3&i)<<6|(o=de._keyStr.indexOf(e.charAt(s++))),c+=String.fromCharCode(t),64!==i&&(c+=String.fromCharCode(n)),64!==o&&(c+=String.fromCharCode(a));return c=he._utf8_decode(c)},_utf8_encode:function(e){var t="";e=e.replace(/\r\n/g,"\n");for(var n=0;n<e.length;n++){var a=e.charCodeAt(n);a<128?t+=String.fromCharCode(a):a>127&&a<2048?(t+=String.fromCharCode(a>>6|192),t+=String.fromCharCode(63&a|128)):(t+=String.fromCharCode(a>>12|224),t+=String.fromCharCode(a>>6&63|128),t+=String.fromCharCode(63&a|128))}return t},_utf8_decode:function(e){for(var t,n,a,r="",i=0;i<e.length;)(t=e.charCodeAt(i))<128?(r+=String.fromCharCode(t),i++):t>191&&t<224?(n=e.charCodeAt(i+1),r+=String.fromCharCode((31&t)<<6|63&n),i+=2):(n=e.charCodeAt(i+1),a=e.charCodeAt(i+2),r+=String.fromCharCode((15&t)<<12|(63&n)<<6|63&a),i+=3);return r}};function pe(e){return/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(e).toLowerCase())}function fe(e){return/((([A-Za-z]{3,9}:(?:\/\/)?)(?:[-;:&=+$,\w]+@)?[A-Za-z0-9.-]+|(?:www\.|[-;:&=+$,\w]+@)[A-Za-z0-9.-]+)((?:\/[+~%/.\w\-_]*)?\??(?:[-+=&;%@.\w_]*)#?(?:[.!/\\\w]*))?)/.test(e)}var ve=[];function ge(e,t){te(e),te(t),E("observers: added ".concat(e)),ve.unshift({name:e,notify:t})}function me(e){te(e);var t=ve.findIndex((function(t){return t.name===e}));t>-1&&(E("observers: removed ".concat(e)),ve.splice(t,1))}function be(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;setTimeout((function(){C("observers: processing ".concat(e));for(var n=0;n<ve.length&&!ve[n].notify(e,t);n++);}),n)}function ke(e){te(e),pe(e)?window.open("mailto://".concat(e),"_blank"):/^[(]{0,1}[0-9]{3}[)]{0,1}[-\s\.]{0,1}[0-9]{3}[-\s\.]{0,1}[0-9]{4}$/.test(e)?window.open("tel:".concat(e),"_blank"):window.open(e,"_blank")}function ye(e){var t=e.url;return t?fetch(t,{method:e.method||"GET",headers:e.headers,body:e.body}).then((function(e){return e.blob()})).then((function(e){return function(e){return new Promise((function(t){var n=new FileReader;n.addEventListener("load",(function(){return t(n.result)}),!1),n.readAsDataURL(e)}))}(e)})).then((function(t){return Promise.resolve({req:e,resp:t})})).catch((function(t){return Promise.reject({req:e,resp:"",error:{message:t.message,stack:t.stack}})})):Promise.reject({req:e,resp:"",error:{message:"invalid request"}})}function je(e,t){if(window.Android||window.webkit){if(window.Android&&window.Android.eventHandler){var n=JSON.stringify(t?Object(ue.a)({evt:e},t):{evt:e});return void window.Android.eventHandler(n)}if(window.webkit&&window.webkit.messageHandlers){var a=JSON.stringify(t?Object(ue.a)({evt:e},t):{evt:e});return void window.webkit.messageHandlers.eventHandler.postMessage(a)}}!function(e,t){switch("notify@log"!==e&&E("service: ".concat(e)),e){case"notify@log":console.log(t.msg||"");break;case"req@toast":le.a.open({message:t.title||"",description:t.msg||""});break;case"req@send-email":ke(t.email||t.link);break;case"req@open-url":ke(t.url||t.link);break;case"req@get-pref":$("pref#".concat(t.name)).then((function(e){be("resp@get-pref",{result:e})}));break;case"req@save-pref":ee("pref#".concat(t.name),t.value);break;case"req@fetch-url":ye(t).then((function(e){return be("resp@fetch-url",e)})).catch((function(e){return be("resp@fetch-url",e)}));break;default:E("service: ".concat(e," not supported"))}}(e,t)}function Oe(e,t){je("req@fetch-url",Object(ue.a)({url:e},t))}window._runtime_={eventHandler:function(e){if(e){var t={};try{if(!(t=JSON.parse(e)).evt)return void E("service: discarded a suspicious event ".concat(e))}catch(n){return void E("service: discarded an invalid event ".concat(e,", ").concat(n))}E("service: ".concat(t.evt)),be(t.evt,t)}else E("service: received an empty response!")}};var xe={};function we(e){var t,n;n=e,te(t="state#network"),xe[t]=n}var Se={Dismiss:"Ignorer",OK:"OK",Done:"Termin\xe9",Apply:"Appliquer","Try Again":"R\xe9essayer",Reset:"R\xe9initialiser",Send:"Envoyer",Cancel:"Annuler",Clear:"Effacer","Please tap BACK again to exit":"S'il vous pla\xeet appuyez sur RETOUR pour quitter","Sorry, we are unable to complete your request. Please try again later.":"D\xe9sol\xe9, nous ne sommes pas en mesure de compl\xe9ter votre demande. Veuillez r\xe9essayer plus tard.","Unable to connect to Wi-Fi or Mobile Network. Please check your connection settings.":"Connexion au r\xe9seau Wi-Fi ou mobile impossible. Veuillez v\xe9rifier vos param\xe8tres de connexion."};function Ie(e){return function(e,t){if(t){if("en"===t)return e;if("fr"===t)return Se[e]}return e}(e,se.LANGUAGE)||e}var Ee=n(67);function Ce(e,t){return!!e.GA_TRACKING_CODE&&((void 0===window.GA_INITIALIZED||t)&&(Ee.a.initialize(e.GA_TRACKING_CODE,{debug:!0}),window.GA_INITIALIZED=!0,Ee.a.ga("set","appName","LeoPages"),Ee.a.ga("set","appVersion",e.APP_BUILD),Ee.a.ga("set","checkProtocolTask",null),Ee.a.ga("set","checkStorageTask",null),Ee.a.ga("set","historyImportTask",null),E("ga: ".concat(t?"force":""," initialized with tracking code ").concat(e.GA_TRACKING_CODE))),!0)}function _e(e,t){Ce(e,t)&&!window.GA_LANDING_PAGE_TRIGGERED&&window.GA_INITIALIZED&&(E("ga: tracking code: ".concat(e.GA_TRACKING_CODE)),E("ga: initialized: ".concat(window.GA_INITIALIZED)),Ae("//Landing Page"),window.GA_LANDING_PAGE_TRIGGERED=!0)}function Ae(e){e&&(Ce(!1)?(Ee.a.set({page:e}),Ee.a.pageview(e)):E("ga: ".concat(e)))}var Te=n(7),De=n(262),Pe=(n(34),n(53)),We=n(572),Re=n(282),Ne=n(604),Le=n(605),Me=n(263);function Ue(){return(Ue=Object(j.a)(w.a.mark((function e(t){var n,a;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,window.Ipfs.create();case 2:return n=e.sent,e.next=5,n.add(t);case 5:return a=e.sent,n.stop(),e.abrupt("return",a.cid.toString());case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Be(e){return new Promise((function(t,n){var a=new Blob([e]),r=new FileReader;r.onload=function(e){t(e.target.result)},r.readAsText(a)}))}function Ge(){return(Ge=Object(j.a)(w.a.mark((function e(t){var n,a,r,i,o,c,s,u;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,window.Ipfs.create();case 2:n=e.sent,t.startsWith("/")||(t="/ipfs/"+t),a=[],r=!1,i=!1,e.prev=7,c=Object(Me.a)(n.files.read(t));case 9:return e.next=11,c.next();case 11:if(!(r=!(s=e.sent).done)){e.next=21;break}return u=s.value,e.t0=a,e.next=16,Be(u);case 16:e.t1=e.sent,e.t0.push.call(e.t0,e.t1);case 18:r=!1,e.next=9;break;case 21:e.next=27;break;case 23:e.prev=23,e.t2=e.catch(7),i=!0,o=e.t2;case 27:if(e.prev=27,e.prev=28,!r||null==c.return){e.next=32;break}return e.next=32,c.return();case 32:if(e.prev=32,!i){e.next=35;break}throw o;case 35:return e.finish(32);case 36:return e.finish(27);case 37:return n.stop(),e.abrupt("return",a.join(""));case 39:case"end":return e.stop()}}),e,null,[[7,23,27,37],[28,,32,36]])})))).apply(this,arguments)}var Fe,qe,Ke="https://www.googleapis.com/auth/drive.file";function He(){return Fe?Fe.signIn():Promise.reject()}function Ve(){if(!Fe||!Fe.currentUser)return!1;var e=Fe.currentUser.get();if(!e)return!1;if(null==e.wc)qe="";else if(e.hasGrantedScopes(Ke))return qe=e.Ot.Cd,E("gapi: authorized ".concat(qe)),!0;return!1}function ze(){return(ze=Object(j.a)(w.a.mark((function e(t,n){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){var a="awesome_awesome",r="\r\n--".concat(a,"\r\n"),i="\r\n--".concat(a,"--"),o="text/plain",c={name:t,mimeType:o},s=r+"Content-Type: application/json; charset=UTF-8\r\n\r\n"+JSON.stringify(c)+r+"Content-Type: "+"text/plain\r\n\r\n"+n+"\r\n"+i;window.gapi.client.request({path:"https://www.googleapis.com/upload/drive/v3/files",method:"POST",params:{uploadType:"multipart"},headers:{"Content-Type":"multipart/related; boundary=".concat(a)},body:s}).execute((function(t){e(t)}))})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Je(){return(Je=Object(j.a)(w.a.mark((function e(t){var n,a;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Fe||!qe){e.next=2;break}return e.abrupt("return",Promise.resolve(Fe));case 2:if(!Fe){e.next=4;break}return e.abrupt("return",He().then((function(e){return Ve()?Promise.resolve(Fe):Promise.reject()})));case 4:return n=t.GOOGLE_API_KEY,a=t.GOOGLE_CLIENT_ID,e.abrupt("return",new Promise((function(e,t){var r=document.createElement("script");r.onload=function(){window.gapi.load("client:auth2",(function(){window.gapi.client.init({apiKey:n,clientId:a,scope:Ke,discoveryDocs:["https://www.googleapis.com/discovery/v1/apis/drive/v3/rest"]}).then((function(){return(Fe=window.gapi.auth2.getAuthInstance()).isSignedIn.listen(Ve),He()})).then((function(n){return Ve()?e(Fe):t()}))}))},r.src="https://apis.google.com/js/api.js",document.body.appendChild(r)})));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Ye=n(264),Qe=n.n(Ye);function Xe(e,t){if(e&&e.length>t){var n=(t-3)/2;return e.substr(0,n)+"..."+e.substr(e.length-n)}return e}function Ze(e,t){return t?Qe()(e,t):e}function $e(){var e=Date.now()/1e3;return e=~~e}var et=n(186),tt=n.n(et);function nt(){return tt.a.generate()}var at=n(111),rt=n.n(at);function it(e){var t=rt.a.MD5(e);return t.toString(rt.a.enc.utf8)}function ot(e,t){return rt.a.AES.encrypt(e,t).toString()}function ct(e,t){var n=rt.a.AES.decrypt(e,t);return n.toString(rt.a.enc.Utf8)}n(73);var st=n(187),ut=n.n(st),lt=n(70),dt=n(575),ht=n(50),pt=n(107),ft=n(160),vt=n(586);function gt(e,t){return 0!==(e&t)}var mt=n(265),bt=n(571),kt=n(82),yt=n(122),jt=n.n(yt),Ot=new Map,xt=function(e,t){var n=t.req;if(n){var a=n.seed;if(Ot.has(a)){var r=Ot.get(a);Ot.delete(a),r.resolve&&r.resolve(t)}else E('task: discarded orphan task "'.concat(a,'"'))}else E("task: invalid req ".concat(t))};jt()((function(e){Oe(e.url,e)}),100);ge("task",(function(e,t){if("resp@fetch-url"===e){var n=t.req,a=t.resp,r=t.error;if(r)return xt(0,{req:n,resp:a,error:r});if(function(e){return!!e.startsWith("data:application/octet-tream;base64,")||!!e.startsWith("data:image/")}(a))return xt(0,{req:n,resp:{blob:a}});var i=n.contentType;if("blob"===i)return xt(0,{req:n,resp:{blob:"data:application/octet-stream;base64,"+a}});var o=a;if(a.startsWith("data:")){var c=a.indexOf("base64,");-1!==c&&(o=a.substring(c+7))}return o=kt.a.decode(o),xt(0,"json)"===i?{req:n,resp:{json:JSON.parse(o)}}:{req:n,resp:{text:o}})}}));new Map,new Map;var wt=n(581),St=n(582);function It(){return It=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},It.apply(this,arguments)}function Et(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,Ct(e,t)}function Ct(e,t){return Ct=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Ct(e,t)}function _t(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function At(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function Tt(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){if(e){if("string"===typeof e)return At(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?At(e,t):void 0}}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var a=0;return function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var Dt=function(e){function t(){for(var t,n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];return(t=e.call.apply(e,[this].concat(a))||this).state={expanded:!1,truncated:!1},t.handleTruncate=t.handleTruncate.bind(_t(t)),t.toggleLines=t.toggleLines.bind(_t(t)),t}Et(t,e);var n=t.prototype;return n.handleTruncate=function(e){this.state.truncated!==e&&this.setState({truncated:e})},n.toggleLines=function(e){e.preventDefault(),e.stopPropagation(),this.setState({expanded:!this.state.expanded})},n.render=function(){var e=this.props,t=e.children,n=e.more,a=e.less,i=e.lines,o=this.state,c=o.expanded,s=o.truncated;return r.a.createElement("div",null,r.a.createElement(mt.a,{lines:!c&&i,ellipsis:r.a.createElement("span",{onClick:this.toggleLines},"... ",r.a.createElement("span",{className:"clickable"},n)),onTruncate:this.handleTruncate},t),!s&&c&&r.a.createElement("span",{onClick:this.toggleLines,className:"clickable",style:{margin:"0 0 0 8px"}},a))},t}(a.Component);Dt.defaultProps={lines:3,more:"Read more",less:"Show less"};bt.a.Paragraph;var Pt=new Map,Wt="imgCache#";(function(e){return Q.apply(this,arguments)})(Wt).then((function(e){for(var t,n=function(){var e=t.value;(function(e,t){return X.apply(this,arguments)})(e).then((function(t){t&&Pt.set(e.substring(Wt.length),t)}))},a=Tt(e);!(t=a()).done;)n()}));var Rt=["src","fallbackSrc"],Nt=(a.Component,function(e){var t=Object(a.useState)(e.expanded),n=t[0],i=t[1],o=e.title,c=e.expandable,s=n?wt.a:St.a,u=e.icon;return r.a.createElement("div",{style:It({},e.style||{})},r.a.createElement("div",{style:{display:"flex",alignItems:"baseline",padding:"4px 0",borderBottom:"1px solid lightgray",background:e.backgroundColor||"white",color:e.foregroundColor||"black"},onClick:function(){c&&i(!n)}},u&&r.a.createElement(u,{style:{margin:"0 0 0 4px"}}),r.a.createElement("span",{style:{margin:"0 0 0 8px",fontWeight:"500"}},o||""),r.a.createElement("span",{style:{flex:"auto"}}),c&&r.a.createElement(s,{style:{margin:"0 8px 0 0"}})),n&&It({},e.children))}),Lt=function(e){return r.a.createElement("div",{style:{height:""+e.height}})};function Mt(e,t){if(void 0===t&&(t={className:"item-favicon"}),!e)return"";try{var n=new URL(e).hostname;return r.a.createElement("img",It({src:"https://s2.googleusercontent.com/s2/favicons?domain="+n,alt:""},t))}catch(c){var a,i;return o=""+JSON.stringify((null===(a=c.err)||void 0===a?void 0:a.message)||(null===(i=c.err)||void 0===i?void 0:i.stack)),console.log(o),""}var o}var Ut=128,Bt={"#all":Ut,"#notag":64,"#nocolor":16,"#pinned":1,"#deleted":2};function Gt(e){var t;return e=null===(t=e)||void 0===t?void 0:t.toLowerCase(),Bt[e]||0}var Ft=n(573),qt=n(578),Kt=n(583),Ht=n(4),Vt=[{name:"",bkColor:"#fff",foreColor:"black",default:!0},{name:"blue",bkColor:"#89a6db"},{name:"green",bkColor:"#9ecf89"},{name:"orange",bkColor:"#e9ae77"},{name:"purple",bkColor:"#a094d4"},{name:"red",bkColor:"#d69e9c"},{name:"yellow",bkColor:"#f8ef88"},{name:"black",bkColor:"#4e4e4e",foreColor:"white"}],zt=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=new Map,a=1<<t;return e.forEach((function(e){e.default?e.hash=0:(e.hash=a,a<<=1),n.set(e.name,e)})),n}(Vt,8);function Jt(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e&&zt.has(e)?zt.get(e):Vt[0]}function Yt(e){var t;return(null===(t=zt.get(e))||void 0===t?void 0:t.hash)||0}var Qt=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"getMenuItem",value:function(e){var t=this,n=e.name,a=e.bkColor,r=e.foreColor;return Object(Ht.jsx)(Ft.a.Item,{style:{background:a,color:r||"black"},children:Object(Ht.jsx)("span",{style:{marginLeft:"8px"},onClick:function(e){var a,r;null===(a=(r=t.props).eventHandler)||void 0===a||a.call(r,"color#changed",{name:n})},children:n||"white"})},"menu#".concat(n))}},{key:"getDropdownMenu",value:function(){var e=this;return Object(Ht.jsx)(Ft.a,{children:Vt.map((function(t){return e.getMenuItem(t)}))})}},{key:"render",value:function(){var e=Jt(this.props.theme),t=e.name,n=e.bkColor,a=e.foreColor,r=this.props,i=r.mode,o=r.style,c=o?Object(ue.a)({},o):{};"detail"===i&&((c={display:"flex",alignItems:"baseline"}).color=a||"black",c.background=n);var s=t||"white";return Object(Ht.jsx)(qt.a,{overlay:this.getDropdownMenu(),placement:"bottomLeft",trigger:["click"],className:"icon",children:Object(Ht.jsxs)("div",{style:Object(ue.a)({width:"detail"===i?"100%":void 0},c),children:[Object(Ht.jsx)(Kt.a,{className:"icon clickable"}),"detail"===i&&Object(Ht.jsx)("span",{style:{flex:"auto",marginLeft:"8px"},children:s})]})})}}]),n}(r.a.Component),Xt=Qt;function Zt(e){if(!e||!e.length)return 0;var t=Gt("#"===e[0]?e:"#".concat(e));t||(t|=Yt("#"===e[0]?e.substr(1):e));return t}var $t=function(e,t){for(var n=0,a=0;a<e.length;a++){var r=e[a];if(r===t){n=1;break}(r.startsWith(t)||r.endsWith(t))&&(n=.5)}return n?.5+5*n/e.length:0};function en(e,t){var n,a=t.theme,r=e.must,i=e.not,o=e.or,c=e.hash,s=t.tags,u=0;if(c&&(gt(c,64)&&!s.length&&u++,gt(c,1)&&gt(t.hash,1)&&u++,gt(c,Ut)&&u++,void 0!==a)){var l=Yt(a);(0!==(c&l)||!l&&gt(c,16))&&u++}var d,h=t.getSearchableContents();if(h){var p=[];h=h.map((function(e){return e?function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:/[.,/#!$%^&*;:{}=\-_`~()]/g;return e.replace(t," ")}(e.toLowerCase()):e})).forEach((function(e){return p.push.apply(p,Object(Te.a)(e.split(" ")))})),h=p.map((function(e){return e.trim()})).filter((function(e){return e.length>1}))}else h=[];s=",".concat(null===(n=s)||void 0===n?void 0:n.join(","),",");for(var f=0;f<r.length;f++){var v=r[f];if(s.includes(",".concat(v,",")))u+=3;else if(s.includes(",".concat(v)))u+=1;else{if(0===(d=$t(h,v)))return 0;u+=d}}for(var g=0;g<i.length;g++){var m=i[g];if(s.includes(",".concat(m,",")))return 0;if(1===(d=$t(h,m)))return 0}for(var b=0;b<o.length;b++){var k=o[b];s.includes(",".concat(k,","))?u+=3:s.includes(",".concat(k))?u+=1:u+=$t(h,k)}return u}function tn(e,t){return(e=e.trim())===(t=t.trim())||!(e.length>t.length?e.substr(t.length).trim():t.substr(e.length).trim()).length}var nn=jt()((function(e){be("app#cmd:quick-search",e)}),150),an=jt()((function(e){be("app#cmd:search",e)}),600);function rn(e,t){switch(t){case 0:C('search: queued "'.concat(e,'"')),nn(e);break;case 1:an(e);break;case 2:be("app#cmd:search",e)}}var on=n(584),cn=n(585),sn=n(268),un=[{icon:on.a,tag:"#pinned",description:"#pinned"},{icon:cn.a,tag:"#notag",description:"#notag"},{icon:Kt.a,tag:"#nocolor",description:"#nocolor"},{icon:vt.a,tag:"#all",description:"#all"}];function ln(e,t){"popularity"===t?null===e||void 0===e||e.sort((function(e,t){return t.count-e.count})):"alphabetic"===t&&(null===e||void 0===e||e.sort((function(e,t){return e.value.localeCompare(t.value)})))}var dn=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(e){var a;return Object(s.a)(this,n),(a=t.call(this,e)).updateData(e),a}return Object(u.a)(n,[{key:"shouldComponentUpdate",value:function(e,t){var n=!1,a=this.options;if(a||(n=!0),!n){var r=e.options;a.tagRender===r.tagRender&&a.showTagCount===r.showTagCount&&a.showTagScale===r.showTagScale&&a.tagSort===r.tagSort||(n=!0)}if(!n){var i,o,c=this.props.dataSource,s=e.dataSource;c.tags.length===s.tags.length&&c.noTagItemCount===s.noTagItemCount&&c.noThemeItemCount===s.noTagItemCount&&(null===(i=c.themes)||void 0===i?void 0:i.length)===(null===(o=s.themes)||void 0===o?void 0:o.length)||(n=!0)}return n&&this.updateData(e),n}},{key:"updateData",value:function(e){this.options=e.options,this.data=this.generateData(e.dataSource);var t=e.tagSort,n=this.data,a=n.hashTags,r=n.themeTags,i=n.tagTags;ln(a,t),ln(r,t),ln(i,t)}},{key:"generateData",value:function(e){var t=e.totalItemCount,n=e.tags,a=e.noTagItemCount,r=e.themes,i=e.noThemeItemCount,o=[];a>0&&o.push({value:"#notag",count:a}),i>0&&o.push({value:"#nocolor",count:i});var c=[];r.forEach((function(e){var t=e.name,n=e.count;if(t){var a=Yt(t);c.push({value:t,count:n,background:null===a||void 0===a?void 0:a.bkColor,color:(null===a||void 0===a?void 0:a.foreColor)||"black",isHashTag:!0})}}));var s=n.filter((function(e){return e.count<t})).map((function(e){return{value:e.name,count:e.count}}));return{hashTags:o,themeTags:c,tagTags:s}}},{key:"renderHashTags",value:function(e){return this.options.showHashtag?Object(Ht.jsx)("div",{className:"item-tagcloud-toolbar",style:{display:"flex"},children:e.map((function(e){var t=e.tag,n=e.description;return Object(Ht.jsx)("div",{className:"clickable-no-underline",style:{marginRight:"16px",display:"flex",alignItems:"baseline"},onClick:function(){return be("item#cmd:hashtag-selected",t)},children:n},t)}))}):""}},{key:"renderTag",value:function(e,t,n){var a=this.props.selectedTag,r=this.options,i=r.showTagCount,o=r.showTagScale,c=e.value,s=e.count,u=c;u=Xe(u,35).toLowerCase(),i&&(u="".concat(u,"(").concat(s,")"));var l={margin:"3px",padding:"3px",display:"inline-block"};-1!==u.indexOf(" ")&&(l.borderBottom="1px dotted black"),c===a&&(n="green",l.textDecoration="underline"),l.background=e.background,l.color=e.color;var d=u,h=e.icon;return h&&(d=Object(Ht.jsxs)("span",{style:{display:"flex",alignItems:"center"},children:[Object(Ht.jsx)(h,{style:{marginRight:"4px"}}),u]})),o?Object(Ht.jsx)("span",{style:Object(ue.a)({fontSize:"".concat(t/2,"em"),color:n},l),className:"clickable-no-underline",children:d},c):Object(Ht.jsx)("span",{style:Object(ue.a)({fontSize:"1.2em",color:n},l),className:"clickable-no-underline",children:d},c)}},{key:"renderTags",value:function(e){var t=this;return Object(Ht.jsx)(sn.TagCloud,{minSize:3,maxSize:10,shuffle:!1,tags:e,disableRandomColor:!0,renderer:function(e,n,a){return t.renderTag(e,n,a)},onClick:function(e){return be("item#cmd:tag-selected","".concat(e.isHashTag?"#":"").concat(e.value))}})}},{key:"render",value:function(){var e=this.data,t=e.themeTags,n=e.tagTags;return Object(Ht.jsxs)(Ht.Fragment,{children:[this.renderHashTags(un),this.renderTags([].concat(Object(Te.a)(t),Object(Te.a)(n)))]})}}]),n}(r.a.Component),hn=n(37),pn=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(e){var a;return Object(s.a)(this,n),(a=t.call(this,e)).dragging=!1,a.state={now:Date.now()},a.colorRamp=hn.i(hn.j),a.onTick=a.onTick.bind(Object(l.a)(a)),a.onResize=a.onResize.bind(Object(l.a)(a)),a}return Object(u.a)(n,[{key:"componentDidMount",value:function(){this.updateForceLayout(),window.addEventListener("resize",this.onResize)}},{key:"componentDidUpdate",value:function(){this.updateForceLayout()}},{key:"componentWillUnmount",value:function(){var e;window.removeEventListener("resize",this.onResize),null===(e=this.simulation)||void 0===e||e.stop()}},{key:"onResize",value:function(){this.clientWidth=void 0,this.clientHeight=void 0,this.tickCount=0,this.setState({now:Date.now()})}},{key:"initForceLayout",value:function(e,t){var n=this,a={};this.nodes=[],e.forEach((function(e){var t=Object(ue.a)({},e);a[e.name]=t,n.nodes.push(t)})),this.edges=[],t.forEach((function(e){var t=e.source,r=e.target,i=e.count;n.edges.push({source:a[t],target:a[r],weight:i})})),this.nodes.forEach((function(e){e.degreeCentrality=t.filter((function(t){return t.source===e.name||t.target===e.name})).length})),this.tickCount=0,this.clientWidth=void 0,this.clientHeight=void 0,E("graph: initialized ".concat(e.length," nodes, ").concat(t.length," edges"))}},{key:"createForceLayout",value:function(){var e=this,t=this.nodes,n=this.edges,a=this.svg,r=a.clientWidth,i=a.clientHeight;C("graph: create layout (".concat(r,", ").concat(i,")")),hn.k(this.svg).style("width","".concat(r,"px")).style("height","".concat(i,"px")),this.simulation=hn.f().force("charge",hn.e().strength(-10)).force("center",hn.b(r/2,i/2)).force("link",hn.d().links(n).distance(80)).force("collision",hn.c().radius((function(e){return 8}))).nodes(t).on("tick",this.onTick),hn.k(this.svg).selectAll("line.link").data(n,(function(e){return"".concat(e.source.name,"-").concat(e.target.name)})).exit().remove();var o=hn.h().domain([1,hn.g(n,(function(e){return e.weight}))]).range([1,8]);hn.k(this.svg).selectAll("line.link").data(n,(function(e){return"".concat(e.source.name,"-").concat(e.target.name)})).enter().append("line").attr("class","link").style("opacity",.5).style("stroke","#93C464").style("stroke-width",(function(e){return o(e.weight)})),hn.k(this.svg).selectAll("g.node").data(t,(function(e){return e.name})).exit().remove();var c,s=hn.h().domain([0,hn.g(t,(function(e){return e.count}))]).range([4,16]),u=hn.k(this.svg).selectAll("g.node").data(t,(function(e){return e.name})).enter().append("g").attr("class","node");u.append("circle").attr("r",(function(e){return s(e.count)})).style("fill",(function(t){return e.colorRamp(t.count)})).call((c=this,hn.a().on("start",(function(e){c.dragging=!0,e.active||c.simulation.alphaTarget(.3).restart(),e.subject.fx=e.subject.x,e.subject.fy=e.subject.y})).on("drag",(function(e){e.subject.fx=e.x,e.subject.fy=e.y})).on("end",(function(e){e.active||c.simulation.alphaTarget(0),c.dragging=!1,c.tickCount=0,e.subject.fx=null,e.subject.fy=null})))),u.append("text").style("text-anchor","middle").attr("y",15).text((function(e){return e.name}))}},{key:"updateForceLayout",value:function(){var e=!1,t=this.props.data,n=t.tags,a=t.links;this.propsNodes!==n&&(this.initForceLayout(n,a),this.propsNodes=n,e=!0);var r=this.svg,i=r.clientWidth,o=r.clientHeight;this.clientWidth===i&&this.clientHeight===o||(this.clientWidth=i,this.clientHeight=o,e=!0),(e||this.dragging)&&this.createForceLayout()}},{key:"onTick",value:function(){this.tickCount++,!this.dragging&&this.tickCount>250||(hn.l("line.link").attr("x1",(function(e){return e.source.x})).attr("x2",(function(e){return e.target.x})).attr("y1",(function(e){return e.source.y})).attr("y2",(function(e){return e.target.y})),hn.l("g.node").attr("transform",(function(e){return"translate(".concat(e.x,",").concat(e.y,")")})))}},{key:"render",value:function(){var e=this;return Object(Ht.jsx)("svg",{ref:function(t){return e.svg=t},style:{width:"100%",height:"100%"}})}}]),n}(r.a.Component),fn=n(589),vn=n(587),gn=n(284),mn=n(283),bn=n(588),kn=n(269),yn=n.n(kn),jn={};function On(e,t){return xn.apply(this,arguments)}function xn(){return(xn=Object(j.a)(w.a.mark((function e(t,n){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,a){jn={name:t,resolve:e,reject:a},be(t,n)})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function wn(e){return Sn.apply(this,arguments)}function Sn(){return(Sn=Object(j.a)(w.a.mark((function e(t){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",On("dlg#getText",t));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function In(e){return En.apply(this,arguments)}function En(){return(En=Object(j.a)(w.a.mark((function e(t){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",On("dlg#confirm",t));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Cn(){return(Cn=Object(j.a)(w.a.mark((function e(){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",On("dlg#getWorkspace"));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _n(){return(_n=Object(j.a)(w.a.mark((function e(){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",On("dlg#import"));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function An(){return(An=Object(j.a)(w.a.mark((function e(){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",On("dlg#export"));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Tn(){return(Tn=Object(j.a)(w.a.mark((function e(t){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",On("dlg#sync",t));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Dn(){return(Dn=Object(j.a)(w.a.mark((function e(t){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",On("dlg#editItem",t));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Pn(){return(Pn=Object(j.a)(w.a.mark((function e(t){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",On("dlg#editItem",t));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Wn(){return(Wn=Object(j.a)(w.a.mark((function e(){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",On("dlg#addTags"));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Rn(){return(Rn=Object(j.a)(w.a.mark((function e(t){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",On("dlg#deleteTags",t));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}ge("dlg",(function(e,t){if(e.startsWith("dlg#")&&(e.endsWith("#OK")||e.endsWith("#cancelled"))&&jn&&e.startsWith(jn.name)){var n=jn,a=n.resolve,r=n.reject;jn={},e.endsWith("#OK")?a(t):r(t)}}));var Nn=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"generateMenuItem",value:function(e,t){return Object(Ht.jsx)(Ft.a.Item,{icon:Object(Ht.jsx)(t,{style:{fontSize:"20px"},className:"icon"}),onClick:function(t){e.confirm?In(e.confirm).then((function(t){return be("item#cmd:action",e)})):be("item#cmd:action",e)},children:e.name},"menu#".concat(e.action))}},{key:"getDropdownMenu",value:function(e){var t=e.getId(),n=e.isPinned(),a=e.getDescription();return Object(Ht.jsxs)(Ft.a,{children:[this.generateMenuItem({action:"toggle-pin",name:"Pin/Unpin",id:[t]},n?vn.a:on.a),this.generateMenuItem({action:"delete",name:"Delete",ids:[t],confirm:{title:"Delete",text:'Are you sure to delete "'.concat(a,'"')}},gn.a),this.generateMenuItem({action:"edit",name:"Edit",id:t},mn.a)]})}},{key:"renderItemDate",value:function(e){var t=e.add_date,n=e.last_modified;if(t||n){var a=new Date;return a.setTime(Number(1e3*(n||t))),Object(Ht.jsx)("div",{children:"".concat(yn()(a).fromNow())})}return""}},{key:"render",value:function(){var e=this.props.item;return Object(Ht.jsxs)("div",{className:"item-actionbar",children:[this.renderItemDate(e),Object(Ht.jsx)("div",{style:{flex:"auto"}}),Object(Ht.jsx)(qt.a,{overlay:this.getDropdownMenu(e),placement:"bottomRight",trigger:["click"],children:Object(Ht.jsx)("span",{className:"clickable icon",style:{marginLeft:"4px"},children:Object(Ht.jsx)(bn.a,{})})})]})}}]),n}(r.a.Component),Ln=Nn,Mn=new(function(){function e(){Object(s.a)(this,e),this._expandItems=new Set,this.editingItem={}}return Object(u.a)(e,[{key:"getEditingItem",value:function(){return this.editingItem}},{key:"setEditingItem",value:function(e){this.editingItem=e}},{key:"isExpanded",value:function(e){return this._expandItems.has(e.getId())}},{key:"expand",value:function(e){se.ENABLE_MULTIPLE_EXPAND_COLLAPSE||this.collapseAll(),this._expandItems.add(e.getId())}},{key:"collapse",value:function(e){var t=e.getId();this._expandItems.has(t)&&this._expandItems.delete(t)}},{key:"toggleState",value:function(e){var t=e.getId();this._expandItems.has(t)?this._expandItems.delete(t):(se.ENABLE_MULTIPLE_EXPAND_COLLAPSE||this.collapseAll(),this._expandItems.add(t))}},{key:"collapseAll",value:function(){this._expandItems.clear()}}]),e}());function Un(e,t){var n=e.tags,a=e.id||e.url;return Object(Ht.jsxs)("div",{className:"item-tags",children:[Object(Ht.jsx)(fn.a,{style:{marginRight:"8px"}}),Object(Ht.jsx)("div",{style:{flex:"auto",display:"flex",flexWrap:"wrap"},children:n.length>0&&n.map((function(e){return e=e.toLowerCase(),function(e,t,n){return Object(Ht.jsx)("span",{style:{color:n,padding:"0 4px"},className:"clickable-no-underline",onClick:function(e){e.preventDefault(),e.stopPropagation(),be("item#cmd:tag-selected",t)},children:Xe(t,35)},"item#".concat(e,"#").concat(t))}(a,e,e===t?"green":"#1890ff")}))})]})}function Bn(e,t,n){var a=e.getId(),r=e.getTitle(),i=e.getColorTheme(),o=i.foreColor||"#666",c={};if(i.name||(c.borderBottom="1px solid lightgray"),"detail"===t){var s,u=e.getProperties();return Object(Ht.jsxs)("div",{className:"item item-card border",style:Object(ue.a)({background:i.bkColor,color:o},c),children:[Object(Ht.jsxs)("div",{children:[Object(Ht.jsx)("span",{className:"item-name",children:"Title"}),Object(Ht.jsx)("span",{children:r||"(untitled)"})]}),null===u||void 0===u?void 0:u.map((function(t,n){return function(e,t,n){return Object(Ht.jsxs)("div",{className:"item-content",style:{color:n},children:[Object(Ht.jsx)("span",{className:"item-name",children:t.name}),t.type===m&&Object(Ht.jsx)("a",{className:"item-link",href:t.value,target:"_blank",rel:"noopener noreferrer",children:t.value}),t.type!==m&&Object(Ht.jsx)("span",{children:t.value})]},e)}("".concat(e.getId(),"-prop-").concat(n),t,o)})),(null===(s=e.tags)||void 0===s?void 0:s.length)>0&&Un(e,n)]},"item#".concat(a))}if(e.isBookmark()){var l=e.getDefaultUrl();return Object(Ht.jsxs)("div",{className:"item",style:Object(ue.a)({background:i.bkColor,color:o},c),children:[Mt(l),Object(Ht.jsx)("a",{className:"item-link",href:l,target:"_blank",rel:"noopener noreferrer",children:r||"(untitled)"})]},"item#".concat(a))}var d=e.getSummary();return Object(Ht.jsxs)("div",{className:"item item-card",style:Object(ue.a)({background:i.bkColor,color:o},c),children:[Object(Ht.jsx)("div",{children:Object(Ht.jsx)("span",{children:r||"(untitled)"})}),Object(Ht.jsx)("div",{className:"item-content",style:{color:o},children:Object(Ht.jsx)(Dt,{lines:2,more:"Show more",children:d||""})})]},"item#".concat(a))}var Gn=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"renderItemsSection",value:function(e,t,n,a){var r=this;return Object(Ht.jsxs)("div",{children:[Object(Ht.jsx)(Nt,{title:n,icon:a,expandable:!0,expanded:!0,backgroundColor:v,foregroundColor:f,children:Object(Ht.jsx)("div",{children:e.map((function(e,n){return r.renderItem(e,t,function(e){return{background:e%2?"whitesmoke":"transparent"}}(n))}))})}),Object(Ht.jsx)(Lt,{height:"8px"})]},n)}},{key:"renderSwipeableItem",value:function(e,t){var n=this,a={display:"flex",overflowX:"scroll",overflowY:"hidden",margin:"4px 0px"},r=Mn.isExpanded(e)?"detail":"simple";return"detail"===r&&(a.borderBottom="1px solid rgba(80, 88, 95, 0.2)"),Object(Ht.jsxs)("div",{style:a,onClick:function(){Mn.toggleState(e),n.forceUpdate()},children:[Object(Ht.jsx)("div",{style:{flex:"none",width:"100%"},children:Bn(e,r,t)}),Object(Ht.jsx)(Ln,{item:e})]},e.getId())}},{key:"renderItem",value:function(e,t){var n=this,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=Mn.isExpanded(e)?"detail":"simple";return Object(Ht.jsxs)("div",{style:a,onClick:function(t){var a=t.target;a.href||"svg"===a.tagName||(Mn.toggleState(e),n.forceUpdate())},children:["detail"===r&&Object(Ht.jsx)(Ln,{item:e}),Bn(e,r,t)]},e.getId())}},{key:"render",value:function(){var e=this.props,t=e.items,n=e.selectedTag;if(!t.length)return"";var a=t.filter((function(e){return e.isPinned()})),r=a.length?t.filter((function(e){return!e.isPinned()})):t;if(n&&t.length>1){var i=r.filter((function(e){return e.tags.includes(n)})),o=r.filter((function(e){return!1===e.tags.includes(n)}));return Object(Ht.jsxs)("div",{children:[a.length>0&&this.renderItemsSection(a,n,"Pinned (".concat(a.length,")"),on.a),i.length>0&&this.renderItemsSection(i,n,'Tag: "'.concat(Xe(n,35),'" (').concat(i.length,")"),fn.a),o.length>0&&this.renderItemsSection(o,n,"".concat(Ze(a.length||i.length?"Other Tags":"Results",o.length)," (").concat(o.length,")"),ft.a)]})}return Object(Ht.jsxs)("div",{children:[a.length>0&&this.renderItemsSection(a,n,"Pinned (".concat(a.length,")"),on.a),r.length>0&&this.renderItemsSection(r,n,"".concat(Ze(a.length?"Others":"Results",r.length)," (").concat(r.length,")"),ft.a)]})}}]),n}(r.a.Component),Fn=Gn,qn=n(576),Kn=n(590),Hn=n(591),Vn=n(592),zn=n(58),Jn=n(593),Yn=n(594),Qn=n(270),Xn=n.n(Qn),Zn=function(){function e(){Object(s.a)(this,e),this.prefs={tagRender:"cloud",tagSort:"alphabetic",showHashtag:!1,showTagCount:!1,showTagScale:!0},this._load()}return Object(u.a)(e,[{key:"_load",value:function(){var e=this;return $("".concat(p,"#prefs")).then((function(t){t&&(e.prefs=t)})).catch((function(e){E("prefs: nothing loaded, ".concat(JSON.stringify(e)))}))}},{key:"_save",value:function(){ee("".concat(p,"#prefs"),this.prefs)}},{key:"get",value:function(){return this.prefs}},{key:"toggle",value:function(e){this.prefs[e]=!this.prefs[e],this._save()}},{key:"update",value:function(e,t){this.prefs[e]=t,this._save()}}]),e}(),$n=new Zn,ea=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"generateIconMenuItem",value:function(e,t,n){return Object(Ht.jsx)(Ft.a.Item,{icon:Object(Ht.jsx)(t,{style:{fontSize:"20px"},className:"icon"}),onClick:function(t){return be(e)},children:n},"menu#".concat(e))}},{key:"generateCheckboxMenuItem",value:function(e,t,n,a){return Object(Ht.jsx)(Ft.a.Item,{children:Object(Ht.jsx)(qn.a,{checked:a,onClick:function(n){return be(e,t)},children:n})},"menu#".concat(e,"-").concat(t))}},{key:"getWorkspaceDropdownMenuItems",value:function(){var e=Xe(this.props.workspace.getName(),35);return[this.generateIconMenuItem("cmd#add-workspace",Re.a,"Add a workspace"),this.generateIconMenuItem("cmd#confirm-and-edit-workspace",mn.a,'Rename "'.concat(e,'"')),this.generateIconMenuItem("cmd#confirm-and-delete-workspace",ht.a,'Remove "'.concat(e,'"'))]}},{key:"getItemsDropdownMenuItems",value:function(e){var t=e.items,n=e.tags,a=e.noTagItemCount,r=e.noThemeItemCount,i=[];if(t.length&&(i.push(this.generateIconMenuItem("cmd#bulk-add-tags",fn.a,"Add tags")),n.length&&i.push(this.generateIconMenuItem("cmd#bulk-delete-tags",ht.a,"Remove tags")),i.push(this.generateIconMenuItem("cmd#confirm-and-delete-items",gn.a,"Delete items"))),i.push(this.generateIconMenuItem("cmd#add-item",Re.a,"Add an item")),t.length&&(a||r)&&(i.push(Object(Ht.jsx)(Ft.a.Divider,{},"menu#separator3")),a>0&&i.push(this.generateIconMenuItem("cmd#show-untagged-items",cn.a,"Show untagged items")),r>0&&i.push(this.generateIconMenuItem("cmd#show-uncolorized-items",Kt.a,"Show uncolorized items"))),null!==n&&void 0!==n&&n.length){var o=$n.get(),c=o.tagSort,s=o.showTagCount,u=o.showTagScale;i.push(Object(Ht.jsx)(Ft.a.Divider,{},"menu#separator#tagcloud")),i.push(Object(Ht.jsxs)(Xn.a,{icon:Object(Ht.jsx)(fn.a,{className:"icon",style:{fontSize:"20px"}}),title:"Tag Cloud Settings",children:[this.generateCheckboxMenuItem("cmd#toggle-pref","tagSort","Show tags in alphabetic order",c),this.generateCheckboxMenuItem("cmd#toggle-pref","showTagCount","Show tag counts",s),this.generateCheckboxMenuItem("cmd#toggle-pref","showTagScale","Show tag scales",u)]},"tag-cloud-settings"))}return i}},{key:"getActionDropdownMenuItems",value:function(){var e=[this.generateIconMenuItem("cmd#import",Kn.a,"Import"),this.generateIconMenuItem("cmd#export",Hn.a,"Export")];return se.ENABLE_SYNC&&e.push(this.generateIconMenuItem("cmd#sync",Vn.a,"Sync")),e}},{key:"getDropdownMenu",value:function(e){var t,n=[];return se.ENABLE_WORKSPACE_MENUITEMS&&(t=this.getWorkspaceDropdownMenuItems()).length&&(n=[].concat(Object(Te.a)(n),Object(Te.a)(t))).push(Object(Ht.jsx)(Ft.a.Divider,{},"menu#separator#workspace")),(t=this.getItemsDropdownMenuItems(e)).length&&(n=[].concat(Object(Te.a)(n),Object(Te.a)(t))).push(Object(Ht.jsx)(Ft.a.Divider,{},"menu#separator#items")),(t=this.getActionDropdownMenuItems()).length&&(n=[].concat(Object(Te.a)(n),Object(Te.a)(t))),Object(Ht.jsx)(Ft.a,{children:n})}},{key:"renderRunningStateMessage",value:function(){var e=this.props,t=e.query,n=e.isSearchCompleted,a=e.isQuickSearch,r=e.dataSource,i=Xe(t,35);if(t&&!n)return Object(Ht.jsxs)(Ht.Fragment,{children:[Object(Ht.jsx)("span",{children:'Searching "'.concat(i,'"')}),Object(Ht.jsx)(zn.a,{style:{marginLeft:"4px"}})]});var o,c=r.items,s=r.total,u=r.isAllData,l=r.tags;if(t)return c.length?a?Object(Ht.jsx)("span",{children:'Still searching "'.concat(i,'"')}):Object(Ht.jsxs)(Ht.Fragment,{children:[Object(Ht.jsx)("span",{children:"".concat(c.length," ").concat(Ze("match",c.length<=1?2:1),' "').concat(i,'"')}),Object(Ht.jsx)(Jn.a,{twoToneColor:"greenyellow",style:{marginLeft:"4px"}})]}):Object(Ht.jsxs)(Ht.Fragment,{children:[Object(Ht.jsx)("span",{children:i.length>2?'Nothing matches "'.concat(i,'"'):'"'.concat(i,'" contains too few characters')}),Object(Ht.jsx)(Yn.a,{style:{marginLeft:"4px"},twoToneColor:"red"})]});if(0===s)o="Oops there is nothing yet";else{var d=u?s:c.length;o="Total ".concat(d," ").concat(Ze("result",d)),l.length&&(o+=", ".concat(l.length," ").concat(Ze("tag",l.length)))}return Object(Ht.jsx)("span",{children:o})}},{key:"render",value:function(){var e=this.props.dataSource;return Object(Ht.jsxs)("div",{className:"item-result-header",children:[this.renderRunningStateMessage(),Object(Ht.jsx)("div",{style:{flex:"auto"}}),Object(Ht.jsx)(qt.a,{overlay:this.getDropdownMenu(e),placement:"bottomRight",trigger:["click"],children:Object(Ht.jsx)("span",{className:"clickable icon",style:{marginLeft:"4px"},children:Object(Ht.jsx)(bn.a,{})})})]})}}]),n}(a.Component),ta=ea,na="workspace",aa=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(e){var a;return Object(s.a)(this,n),a=t.call(this,e),E("".concat(na,": created")),a.onEvent=a.onEvent.bind(Object(l.a)(a)),a.onScroll=a.onScroll.bind(Object(l.a)(a)),a.onRequestSearch=a.onRequestSearch.bind(Object(l.a)(a)),a.onCompleteSearch=a.onCompleteSearch.bind(Object(l.a)(a)),a.onGroupSearchResult=a.onGroupSearchResult.bind(Object(l.a)(a)),ge(na,a.onEvent.bind(Object(l.a)(a))),Ae("//".concat(na," Page")),a}return Object(u.a)(n,[{key:"componentWillUnmount",value:function(){me(na)}},{key:"getWorkspace",value:function(){return this.props.workspace}},{key:"getWorkspaceViewableDataSource",value:function(){return this.props.workspace.getViewableDataSource()}},{key:"getWorkspaceState",value:function(){return this.props.workspace.getState()}},{key:"setWorkspaceState",value:function(e){this.props.workspace.setState(e),this.forceUpdate()}},{key:"enableTagGraph",value:function(){return se.ENABLE_TAG_GRAPH}},{key:"onEvent",value:function(e,t){var n,a=this.getWorkspace();switch(e){case"item#cmd:tag-selected":case"item#cmd:hashtag-selected":var r=t;this.getWorkspaceViewableDataSource().isAllData?this.onCompleteSearch(t,!1):(this.setState({selectedTag:r}),this.onGroupSearchResult(r)),this.forceUpdate();break;case"cmd#show-all-items":this.onCompleteSearch("#all",!1);break;case"cmd#show-untagged-items":this.onCompleteSearch("#notag",!1);break;case"cmd#show-uncolorized-items":this.onCompleteSearch("#nocolor",!1);break;case"item#menu#pinned":this.onCompleteSearch("#pinned",!1);break;case"app#cmd:search":this.onCompleteSearch(t,!1);break;case"app#cmd:quick-search":this.onCompleteSearch(t,!0);break;case"item#updated-hashtag":null===(n=a.getSearchResultDataSource())||void 0===n||n.sync(),this.forceUpdate();break;default:null===a||void 0===a||a.onAction(e,t)}}},{key:"onScroll",value:function(){var e;null===(e=document.activeElement)||void 0===e||e.blur()}},{key:"onRequestSearch",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this.getWorkspace(),a=this.getWorkspaceState(),r=a.lastRequestedQuery;r||n.invalidSearchResultDataSource(),tn(r,e)?(E("".concat(n.getName(),': discarded an already requested search "').concat(e,'"')),this.setWorkspaceState({query:e,isSearchCompleted:!0,isQuickSearch:!1,lastRequestedQuery:e})):(this.setWorkspaceState({query:e,isSearchCompleted:!1,lastRequestedQuery:e}),t?(rn(e,0),rn(e,1)):rn(e,2))}},{key:"onCompleteSearch",value:function(e,t){var n=this.getWorkspace(),a=function(e){var t,n,a=[],r=[],i=[],o=0;return e.toLowerCase().split(" ").forEach((function(e){if((e=e.trim()).length)switch(e[0]){case"+":1===e.length?t="+":(n=e.substr(1)).length>=2&&a.push(n);break;case"-":1===e.length?t="-":(n=e.substr(1)).length>=2&&r.push(n);break;case"#":1===e.length?t="#":(t=void 0,o|=Zt(e));break;default:e.length>=1&&("+"===t?e.length>=2&&a.push(e):"-"===t?e.length>=2&&r.push(e):"#"===t?o|=Zt(e):e.length>=2&&i.push(e)),t=void 0}})),gt(o,Ut)&&(i.length=0,o&=-66),1===i.length&&(a.unshift(i[0]),i.length=0),{must:a,not:r,or:i,hash:o}}(e),r=a.must,i=a.not,o=a.or;if(gt(a.hash,Ut)&&!r.length&&!i.length&&!o.length)return E("".concat(n.getName(),": no query, simply render all tags")),n.invalidSearchResultDataSource(),this.setWorkspaceState({query:e,selectedTag:"",isSearchCompleted:!0,isQuickSearch:t,lastRequestedQuery:e}),void Mn.collapseAll();if(!t){var c,s=null===(c=n.getSearchResultDataSource())||void 0===c?void 0:c.items;if(e===this.getWorkspaceState().lastCompletedQuery&&s&&s.length<3)return E("".concat(n.getName(),': skipped a full search "').concat(e,'", nothing changed since last search')),void this.setWorkspaceState({query:e,selectedTag:"",isSearchCompleted:!0,isQuickSearch:t})}C("".concat(n.getName(),": ").concat(t?"quick":"full",' searching "').concat(e,'"'));for(var u=[],l=n.getItems(),d=0;d<l.length;d++){var h=en(a,l[d]);if(h>0&&(u.push({index:d,score:h}),t>0&&u.length>=3))break}var p=[];u.forEach((function(e){var t=l[e.index];t.score=e.score,p.push(t)})),p.sort((function(e,t){return e.score-t.score})),function(e,t){t.sort((function(e,t){if(e.score===t.score){var n=e.isPinned(),a=t.isPinned();if(n&&!a)return-1;if(!n&&a)return 1}return e.score===t.score?Number(t.add_date||0)-Number(e.add_date||0):t.score-e.score}))}(0,p),n.getSearchResultDataSource().sync(p),E("".concat(n.name,": ").concat(t?"quick":"full"," search results, ").concat(p.length," ").concat(Ze("match",p.length<=1?2:1),' "').concat(e,'"')),Mn.collapseAll(),n.invalidViewableDataSource(),this.setWorkspaceState({query:e,selectedTag:"",isSearchCompleted:!0,isQuickSearch:t,lastCompletedQuery:e})}},{key:"onGroupSearchResult",value:function(e){var t,n=null===(t=this.getWorkspace().getSearchResultDataSource())||void 0===t?void 0:t.items;n&&n.sort((function(t,n){return t.tags.includes(e)?-1:n.tags.includes(e)?1:0}))}},{key:"renderSearchBar",value:function(){var e=this,t=this.getWorkspaceState().query,n=t.length?Object(Ht.jsx)(ht.a,{className:"clickable",onClick:function(){return e.onCompleteSearch("",!1)}}):Object(Ht.jsx)(lt.a,{title:"Search by words; a word starts with '+' must exist, a word starts with '-' must not; example: 'apple android +phone -fruit' means a matched result contains 'apple' or 'android', and must contain 'phone', must not contain 'fruit'",children:Object(Ht.jsx)(pt.a,{className:"clickable"})});return Object(Ht.jsx)("div",{className:"item-toolbar",children:Object(Ht.jsx)(dt.a,{type:"search",placeholder:"Search everything!",prefix:Object(Ht.jsx)(ft.a,{style:{color:"rgba(0,0,0,.25)"}}),suffix:n,value:t,onChange:function(t){return e.onRequestSearch(t.target.value,!0)}},"input#search")})}},{key:"renderTagCloud",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},r=$n.get(),i=t.isAllData,o=t.tags,c=t.themes,s=t.noThemeItemCount;if(!o.length&&s>=c.length&&!r.showHashtag)return"";var u="".concat(i?"All":"Related"," "),l=o.length;l&&(u+="".concat(Ze("Tag",l)," (").concat(l,") ")),null!==c&&void 0!==c&&c.length&&(l=c.length,u+="".concat(Ze("Category",l)," (").concat(l,")"));var d=r.tagRender||"cloud",h={dataSource:t,selectedTag:i?"":e,options:r};return Object(Ht.jsx)(Nt,Object(ue.a)(Object(ue.a)({title:u,icon:vt.a,expandable:!0,backgroundColor:v,foregroundColor:f},n),{},{children:Object(Ht.jsx)("div",Object(ue.a)(Object(ue.a)({},a),{},{children:Object(Ht.jsx)("div",{className:"item-tagcloud",children:Object(Ht.jsxs)("div",{style:{width:"100%",height:"calc(100% - 30px"},children:["cloud"===d&&Object(Ht.jsx)(dn,Object(ue.a)({},h)),this.enableTagGraph()&&"graph"===d&&Object(Ht.jsx)(pn,Object(ue.a)({},h))]})})}))}),"section#tags")}},{key:"renderViewMoreItems",value:function(e){var t=this,n=e.items;return(e.viewedItemCount||25)>n.length?"":Object(Ht.jsxs)("div",{className:"clickable-no-underline",style:{margin:"8px",display:"flex"},onClick:function(n){e.viewedItemCount+=25,t.forceUpdate()},children:[Object(Ht.jsx)("span",{style:{flex:"auto"}}),Object(Ht.jsx)("span",{children:"...view more"})]})}},{key:"renderItems",value:function(e){var t=e.items,n=e.viewedItemCount;if(null===t||void 0===t||!t.length)return"";var a=n||25,r=this.getWorkspace(),i=this.getWorkspaceState(),o=i.selectedTag,c=i.isSearchCompleted,s=i.isQuickSearch;return Object(Ht.jsxs)(Ht.Fragment,{children:[Object(Ht.jsx)(Fn,{isSearchCompleted:c,isQuickSearch:s,items:t.length>a?t.slice(0,a):t,selectedTag:o},"".concat(r.getId(),"#items")),this.renderViewMoreItems(e)]})}},{key:"renderCompactLayout",value:function(){C();var e=this.getWorkspaceState(),t=e.query,n=e.isSearchCompleted,a=e.isQuickSearch,r=e.selectedTag,i=this.getWorkspaceViewableDataSource(),o=i.items,c=i.isAllData;return C("".concat(this.getWorkspace().getName(),": render ").concat(o.length,' items for "').concat(t,'", quick: ').concat(a,", completed: ").concat(n)),Object(Ht.jsxs)("div",{style:{height:"inherit",margin:"8px 8px"},children:[this.renderSearchBar(),Object(Ht.jsx)(ta,Object(ue.a)({query:t,isSearchCompleted:n,isQuickSearch:a,dataSource:i},this.props)),Object(Ht.jsxs)("div",{className:"scrollable item-result-container",onScroll:this.onScroll,children:[this.renderTagCloud(r,i,{expanded:c,expandable:!0}),Object(Ht.jsx)(Lt,{height:"8px"}),this.renderItems(i)]})]})}},{key:"renderFullLayout",value:function(){C();var e=this.getWorkspaceState(),t=e.query,n=e.isSearchCompleted,a=e.isQuickSearch,r=e.selectedTag,i=this.getWorkspaceViewableDataSource(),o=i.items,c=i.isAllData;return C("".concat(this.getWorkspace().getName(),": render ").concat(o.length,' items for "').concat(t,'", quick: ').concat(a,", completed: ").concat(n)),Object(Ht.jsxs)("div",{style:{display:"flex",margin:"8px 8px",height:"inherit"},children:[Object(Ht.jsxs)("div",{style:{width:"60%",height:"100%",margin:"0 8px 0 0"},children:[this.renderSearchBar(),Object(Ht.jsx)(ta,Object(ue.a)({query:t,isSearchCompleted:n,isQuickSearch:a,dataSource:i},this.props)),Object(Ht.jsx)("div",{className:"scrollable item-result-container",onScroll:this.onScroll,children:this.renderItems(i)})]}),Object(Ht.jsx)("div",{style:{width:"40%",height:"100%",margin:"0 0 0 8px"},children:this.renderTagCloud(r,i,{expanded:c,expandable:!1,style:{height:"inherit"}},{style:{height:"calc(100% - 80px)"},className:"scrollable"})})]})}},{key:"render",value:function(){if(!this.getWorkspace().isLoaded())return Object(Ht.jsx)("div",{style:{margin:"8px 8px"},children:"Loading..."});var e="";return e="mini"===se.LAYOUT_STRATEGY?this.renderCompactLayout():"full"===se.LAYOUT_STRATEGY?this.renderFullLayout():Object(Ht.jsxs)(Ht.Fragment,{children:[Object(Ht.jsx)(ut.a,{maxWidth:767,children:this.renderCompactLayout()}),Object(Ht.jsx)(ut.a,{minWidth:768,children:this.renderFullLayout()})]}),Object(Ht.jsx)("div",{className:"no-select",style:{height:"inherit"},children:e})}}]),n}(r.a.Component),ra=aa,ia=n(595),oa=n(596),ca=n(597),sa=n(598),ua=n(599),la=n(600),da=n(601),ha={name:"",icon:ia.a,description:"blank",data:{title:"",props:[]}},pa=[{name:"notes",icon:oa.a,description:"notes, todo",data:{title:"",tags:["note","todo"],props:[{name:"notes",type:g,value:""}]}},{name:"vault",icon:ca.a,description:"secure notes, secret, vault",data:{title:"",tags:["secret","vault"],props:[{name:"notes",type:b,value:""}]}},{name:"bookmark",icon:sa.a,description:"url, bookmark, favorite",data:{title:"",tags:["bookmark"],props:[{name:"url",type:m,value:""}]}},{name:"login",icon:ua.a,description:"login, user, password",data:{title:"",tags:["login","password"],props:[{name:"user",type:g,value:""},{name:"password",type:b,value:""},{name:"url",type:m,value:""},{name:"notes",type:g,value:""}]}},{name:"contact",icon:la.a,description:"contact, id card",data:{title:"",tags:["contact"],props:[{name:"name",type:g,value:""},{name:"email",type:"@",value:""},{name:"phone",type:"p",value:""},{name:"addr",type:"a",value:""},{name:"notes",type:g,value:""}]}},{name:"task",icon:da.a,description:"task, schedule, plan",data:{title:"",tags:["task"],props:[{name:"due date",type:"d",value:""},{name:"status",type:g,value:""},{name:"notes",type:g,value:""}]}},{name:"",icon:ia.a,description:"blank",data:{title:"",props:[]}}],fa=new Map;function va(e){return fa.get(e)}pa.forEach((function(e){return fa.set(e.name,e)}));var ga=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"getMenuItem",value:function(e){var t=this,n=e.name;return Object(Ht.jsx)(Ft.a.Item,{style:{display:"flex",alignItems:"baseline"},onClick:function(e){var a,r;null===(a=(r=t.props).eventHandler)||void 0===a||a.call(r,"item-template#selected",{name:n})},children:this.renderTemplate(e)},"menu#".concat(n))}},{key:"getDropdownMenu",value:function(){var e=this;return Object(Ht.jsx)(Ft.a,{children:pa.map((function(t){return e.getMenuItem(t)}))})}},{key:"renderTemplate",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"detail",n=e.description,a=e.icon;return Object(Ht.jsxs)(Ht.Fragment,{children:[Object(Ht.jsx)(a,{className:"icon clickable",style:{fontSize:"16px"}}),"detail"===t&&Object(Ht.jsx)("span",{style:{marginLeft:"8px"},children:n})]})}},{key:"render",value:function(){var e=va(this.props.template)||ha,t=this.props,n=t.mode,a=t.placement,r={};return"detail"===n&&(r={display:"flex",alignItems:"baseline",width:"100%"}),this.props.style&&(r=Object(ue.a)(Object(ue.a)({},r),this.props.style)),Object(Ht.jsx)(qt.a,{overlay:this.getDropdownMenu(),placement:a||"bottomRight",trigger:["click"],children:this.props.children||Object(Ht.jsx)("div",{style:r,children:this.renderTemplate(e,n)})})}}]),n}(r.a.Component),ma=ga,ba=function(){function e(t){Object(s.a)(this,e),this.id=t.id||nt(),this.title=t.title||"",this.theme=t.theme,this.tags=t.tags||[],this.add_date=t.add_date,this.last_modified=t.last_modified,this.props=t.props}return Object(u.a)(e,[{key:"getId",value:function(){return this.id||""}},{key:"getTags",value:function(){return this.tags||[]}},{key:"getColorTheme",value:function(){return Jt(this.theme)}},{key:"getTitle",value:function(){return this.title||""}},{key:"getProperties",value:function(){return this.props}},{key:"getSummary",value:function(){var e,t="";return null===(e=this.props)||void 0===e||e.forEach((function(e){switch(e.type){case g:case"a":case"p":e.value.length&&(t.length&&(t+=", "),t+=e.value)}})),t}},{key:"getDescription",value:function(){return this.title}},{key:"getSearchableContents",value:function(){var e,t;this._tags||(this._tags=(null===(t=this.tags)||void 0===t?void 0:t.join(","))||"");var n=[this.title,this._tags];return null===(e=this.props)||void 0===e||e.forEach((function(e){switch(e.type){case g:case"a":case"p":n.push(e.value)}})),n}},{key:"getDefaultUrl",value:function(){return ka(this)}},{key:"containsSecret",value:function(){var e;return null===(e=this.props)||void 0===e?void 0:e.some((function(e){return e.type===b}))}},{key:"isPinned",value:function(){return gt(this.hash||0,1)}},{key:"isBookmark",value:function(){var e;return 1===(null===(e=this.props)||void 0===e?void 0:e.length)&&this.props[0].type===m}}]),e}();function ka(e){if(e)for(var t=e.props,n=0;n<(null===t||void 0===t?void 0:t.length);n++){var a=t[n];if(a.type===m)return a.value}}function ya(e){e.sort((function(e,t){var n=e.last_modified||e.add_date||0;return(t.last_modified||t.add_date||0)-n}))}function ja(e,t){var n=Object(Te.a)(new Set([].concat(Object(Te.a)(e.tags),Object(Te.a)(t.tags)))),a=Object(ue.a)({},e);a.tags=n;var r=a,i=t;for(var o in i)"tags"!==o&&(a[o]?r[o]!==i[o]&&(r.last_modified&&i.last_modified?Number(i.last_modified)>Number(r.last_modified)?a[o]=i[o]:a[o]=r[o]:r.last_modified?a[o]=r[o]:(i.last_modified,a[o]=i[o])):a[o]=i[o]);return new ba(a)}function Oa(e,t){for(var n=[],a=new Map,r=0,i=[].concat(Object(Te.a)(e),Object(Te.a)(t));r<i.length;r++){var o=i[r],c=o.id;if(a.has(c)){var s=a.get(c);n[s]=ja(n[s],o)}else n.push(o),a.set(c,n.length-1)}e.splice(0,e.length);for(var u=0,l=n;u<l.length;u++){var d=l[u];e.push(d)}return e}var xa=ba,wa=function(){function e(t){Object(s.a)(this,e),this.items=[],this.pinnedItems=[],this.tags=[],this.themes=[],this.links=[],this.totalItemCount=0,this.noTagItemCount=0,this.noThemeItemCount=0,t&&this.sync(t)}return Object(u.a)(e,[{key:"getItems",value:function(){return this.items}},{key:"isEmpty",value:function(){return!this.items.length}},{key:"sync",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.items=e.map((function(e){return e instanceof xa?e:new xa(e)})),this.pinnedItems=this.items.filter((function(e){return e.isPinned()}));var t=0,n=0,a=new Map,r=new Map,i=new Map;this.items.forEach((function(e){var o=e.tags,c=null===o||void 0===o?void 0:o.length;if(c)for(var s=0;s<c;s++){var u=o[s];a.has(u)?a.set(u,a.get(u)+1):a.set(u,1);for(var l=0;l<c;l++)if(l!==s){var d=o[l],h="".concat(u,",").concat(d);r.has(h)?r.set(h,r.get(h)+1):r.set(h,1)}}else t++;var p=e.theme;void 0!==p?i.has(p)?i.set(p,i.get(p)+1):i.set(p,1):n++}));var o=[];a.forEach((function(e,t){return o.push({name:t,count:e})}));var c=[];r.forEach((function(e,t){var n=t.split(",");c.push({source:n[0],target:n[1],count:e})}));var s=[];i.forEach((function(e,t){return s.push({name:t,count:e})})),this.totalItemCount=e.length,this.noTagItemCount=t,this.noThemeItemCount=n,this.tags=o,this.links=c,this.themes=s}},{key:"_updateOrInsertItem",value:function(e,t,n){if(e&&t){var a=t.getId(),r=e.findIndex((function(e){return e.getId()===a}));if(-1!==r)return e[r]=t,1;if(n)return e.unshift(t),2}return 0}},{key:"updateItem",value:function(e,t){var n=$e();e.add_date||(e.add_date=n),e.last_modified=n;var a=this.items;this._updateOrInsertItem(a,e,t),this.sync(a),this.dirty=!0}},{key:"_deleteItem",value:function(e,t){if(e){var n=e.findIndex((function(e){return e.getId()===t}));-1!==n&&e.splice(n,1)}}},{key:"deleteItems",value:function(e){var t=this,n=this.items;e.forEach((function(e){t._deleteItem(n,e)})),this.sync(n),this.dirty=!0}},{key:"deleteItem",value:function(e){this.deleteItems([e])}}]),e}();function Sa(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=new wa;n.tags=e.tags,n.themes=e.themes,n.links=e.links,n.totalItemCount=e.totalItemCount,n.noTagItemCount=e.noTagItemCount,n.noThemeItemCount=e.noThemeItemCount,n.items=e.items;for(var a=0,r=Object.entries(t);a<r.length;a++){var i=Object(k.a)(r[a],2),o=i[0],c=i[1];n[o]=c}return n}var Ia=wa,Ea=function(){function e(t){var n=t.id,a=t.name;Object(s.a)(this,e),this.id=n,this.name=a,this.dataSource=new Ia,this.searchResultDataSource=new Ia,this.viewableDataSource=void 0,this.loaded=!1,this.state={query:"",lastRequestedQuery:"",lastCompletedQuery:"",isSearchCompleted:!0,isQuickSearch:!1,selectedTag:"",lastItem:void 0}}return Object(u.a)(e,[{key:"getId",value:function(){return this.id}},{key:"getName",value:function(){return this.name}},{key:"getItems",value:function(){return this.dataSource.getItems()}},{key:"isEmpty",value:function(){return this.dataSource.isEmpty()}},{key:"isLoaded",value:function(){return this.loaded}},{key:"getState",value:function(){return this.state}},{key:"setState",value:function(e){this.state=Object(ue.a)(Object(ue.a)({},this.state),e)}},{key:"getSearchResultDataSource",value:function(){return this.searchResultDataSource}},{key:"invalidSearchResultDataSource",value:function(){this.searchResultDataSource.sync([]),this.viewableDataSource=void 0}},{key:"findoutViewableDataSource",value:function(e){var t=e.dataSource,n=e.searchResultDataSource,a=e.query,r=e.lastItem,i=t.getItems().length;if("#all"===a)return C(),Sa(t,{isAllData:!0,total:i});if("#notag"===a||"#nocolor"===a)return C(),Sa(t,{isAllData:!0,total:i,items:null===n||void 0===n?void 0:n.getItems()});if(a)return(null===n||void 0===n?void 0:n.getItems().length)>0?(C("viewable: ".concat(null===n||void 0===n?void 0:n.getItems().length,' results for "').concat(a,'"')),Sa(n,{isAllData:!1,total:i})):(C('viewable: 0 result for "'.concat(a,'"')),Sa(t,{isAlData:!0,total:i,items:[]}));if(t.pinnedItems.length){C();var o=t.pinnedItems;return Sa(t,{isAllData:!0,total:i,items:r?[].concat(Object(Te.a)(o),[r]):o})}return C(),Sa(t,{isAllData:!0,total:i})}},{key:"getViewableDataSource",value:function(){var e=this.state,t=e.query,n=e.lastItem,a=this.dataSource,r=this.searchResultDataSource,i=this.viewableDataSource;return(null===i||void 0===i?void 0:i.query)===t?i:(this.viewableDataSource=this.findoutViewableDataSource({dataSource:a,searchResultDataSource:r,query:t,lastItem:n}),this.viewableDataSource.viewedItemCount=25,this.viewableDataSource.query=t,this.viewableDataSource)}},{key:"invalidViewableDataSource",value:function(){this.viewableDataSource=void 0}},{key:"_getPersistNameOfItems",value:function(){return"".concat(p,"#workspace#").concat(this.id)}},{key:"loadItems",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.dataSource.sync(e),ya(this.dataSource.items),this.invalidSearchResultDataSource(),this.invalidViewableDataSource(),this.loaded=!0,be("workspace#loaded")}},{key:"load",value:function(){var e=this;return this.loaded?Promise.resolve(be("workspace#loaded")):(this.loaded=!0,$(this._getPersistNameOfItems()).then((function(t){e.loadItems(null===t||void 0===t?void 0:t.items)})))}},{key:"save",value:function(){ee(this._getPersistNameOfItems(),{items:this.getItems()}),this.loaded=!0}},{key:"remove",value:function(){!function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:K;if(q())return new Promise((function(t){window.chrome.storage.local.remove([e],(function(){E('storage: removed "'.concat(e,'" from extension')),t()}))}));"indexedDB"===(t=Z(t))?U(e):Y(t,e)}(this._getPersistNameOfItems())}},{key:"_actionWillPerform",value:function(e,t){switch(e){case"item#will-update-hashtag":case"item#will-delete":default:break;case"item#will-update":case"item#will-update-tag":var n=t.item,a=t.items;a&&a.forEach((function(e){return e._tags=void 0})),n&&(n._tags=void 0)}}},{key:"_actionDidPerform",value:function(e,t){this.invalidSearchResultDataSource(),this.invalidViewableDataSource(),be(e,t)}},{key:"_onBulkDeleteItems",value:function(e){var t=this.dataSource;this._actionWillPerform("item#will-delete",{ids:e}),t.deleteItems(e);var n=this.state.lastItem;n&&e.includes(n.id)&&(this.state.lastItem=void 0),this._actionDidPerform("item#deleted")}},{key:"_onBulkToggleItemHashTag",value:function(e,t){var n=this.getViewableDataSource().items;this._actionWillPerform("item#will-update-hashtag",{items:n,ids:e,tags:t,action:"toggle"}),e.forEach((function(e){var a,r,i=n.findIndex((function(t){return t.getId()===e}));if(-1!==i){var o=n[i];o.hash=gt(a=o.hash,r=t)?function(e,t){return(e||0)&~t}(a,r):function(e,t){return(e||0)|t}(a,r)}})),this._actionDidPerform("item#updated-hashtag")}},{key:"_onBulkAddTags",value:function(){var e=this;(function(){return Wn.apply(this,arguments)})().then((function(t){var n=t,a=e.getViewableDataSource().items;e._actionWillPerform("item#will-update-tag",{items:a,tags:n,action:"add"}),a.forEach((function(e){var t=e.tags;n.forEach((function(e){t.includes(e)||t.push(e)}))})),e._actionDidPerform("item#updated-tag")})).catch((function(e){}))}},{key:"_onBulkDeleteTags",value:function(){var e=this,t=this.getViewableDataSource()(),n=t.items;(function(e){return Rn.apply(this,arguments)})(t.tags).then((function(t){var a=t;e._actionWillPerform("item#will-update-tag",{items:n,tags:a,action:"delete"}),n.forEach((function(e){var t=e.tags;a.forEach((function(e){var n=t.indexOf(e);-1!==n&&t.splice(n,1)}))})),e._actionDidPerform("item#updated-tag")})).catch((function(e){}))}},{key:"_onBulkChangeItemProp",value:function(e,t,n){var a=this.dataSource.items;this._actionWillPerform("item#will-update-prop",{items:a,ids:e,propName:t,propValue:n}),e.forEach((function(e){var r=a.findIndex((function(t){return t.getId()===e}));-1!==r&&(a[r][t]=n)})),this._actionDidPerform("item#updated-prop")}},{key:"_onUpdateItem",value:function(e){this._onItemUpdated(e,!0),be("item#added",e)}},{key:"_onItemUpdated",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.dataSource;this._actionWillPerform("item#will-update",{dataSource:n,item:e}),n.updateItem(e,t),this.state.lastItem=e,this.invalidViewableDataSource()}},{key:"_onAddItem",value:function(e){var t=this,n=va(e);Mn.setEditingItem(new xa(n.data)),function(e){return Dn.apply(this,arguments)}({title:"Create",item:Mn.getEditingItem()}).then((function(e){return t._onUpdateItem(e)})).catch((function(e){}))}},{key:"_onEditItem",value:function(e){var t=this,n=this.getItems(),a=n.findIndex((function(t){return t.getId()===e}));if(-1!==a){var r=n[a];Mn.setEditingItem(new xa(r)),function(e){return Pn.apply(this,arguments)}({title:"Edit",item:Mn.getEditingItem()}).then((function(e){return t._onUpdateItem(e)})).catch((function(e){}))}}},{key:"onAction",value:function(e,t){C("".concat(this.getName(),": ").concat(e));var n=this.getViewableDataSource();switch(e){case"cmd#bulk-add-tags":this._onBulkAddTags();break;case"cmd#bulk-delete-tags":this._onBulkDeleteTags();break;case"cmd#bulk-delete-items":this._onBulkDeleteItems(n.getVisibleItemIds());break;case"cmd#bulk-toggle-pinned-items":this._onBulkToggleItemHashTag(n.getVisibleItemIds(),1);break;case"item#cmd:action":var a=t.action,r=t.id,i=t.ids;"edit"===a?this._onEditItem(r):"delete"===a?this._onBulkDeleteItems(i):"toggle-pin"===a?this._onBulkToggleItemHashTag(r,1):"change-prop"===a?this._onBulkChangeItemProp(i,t.propName,t.propValue):E("".concat(this.getName(),": discarded unknown action ").concat(a));break;case"cmd#add-item":this._onAddItem(t);break;case"item#updated":this._onItemUpdated(t)}}}]),e}(),Ca=Ea,_a=new(function(){function e(){Object(s.a)(this,e),this.workspaces=[],this.activeWorkspaceIndex=0,this._load()}return Object(u.a)(e,[{key:"_workspaceId2Index",value:function(e){return this.workspaces.findIndex((function(t){return t.getId()===e}))}},{key:"_addWorkspace",value:function(e){var t=e.name,n=e.id,a=this.workspaces,r=new Ca({id:n||nt(),name:t});return a.push(r),r}},{key:"_autoSelectActiveWorkspace",value:function(){var e=this.workspaces,t=this.activeWorkspaceIndex;return e.length||(this._addWorkspace({name:"workspace"}),e[0].loaded=!0,t=0),t>e.length-1&&(t=e.length-1),this._setActiveWorkspaceByIndex(t),e[this.activeWorkspaceIndex]}},{key:"_getPersisNameOfWorkspaces",value:function(){return"".concat(p,"#workspaces")}},{key:"_load",value:function(){var e=this;return this.workspaces=[],$(this._getPersisNameOfWorkspaces()).then((function(t){if(t){var n=t.workspaces,a=t.activeWorkspaceIndex;null===n||void 0===n||n.forEach((function(t){return e._addWorkspace(t)})),e._setActiveWorkspaceByIndex(a||0)}})).catch((function(e){E("workspaces: nothing loaded, ".concat(JSON.stringify(e)))})).finally((function(){e.workspaces.length||(e.activeWorkspaceIndex=0,e._addWorkspace({name:"workspace"})),be("workspaces#loaded")}))}},{key:"_save",value:function(){var e=this.workspaces.map((function(e){return{id:e.id,name:e.name}}));ee(this._getPersisNameOfWorkspaces(),{workspaces:e,activeWorkspaceIndex:this.activeWorkspaceIndex})}},{key:"getAllWorkspaces",value:function(){return this.workspaces}},{key:"getActiveWorkspace",value:function(){var e=this.workspaces,t=this.activeWorkspaceIndex;return(t<0||t>=e.length)&&this._setActiveWorkspaceByIndex(0),e[this.activeWorkspaceIndex]}},{key:"_setActiveWorkspaceByIndex",value:function(e){if(e>=0&&e<=this.workspaces.length-1)return this.activeWorkspaceIndex=e,be("workspace#changed"),!0}},{key:"setActiveWorkspaceById",value:function(e){this._setActiveWorkspaceByIndex(this._workspaceId2Index(e)),this._save()}},{key:"renameActiveWorkspace",value:function(e){var t=this.getActiveWorkspace();t.name=e,this._save(),be("workspace#updated",t)}},{key:"addWorkspace",value:function(e){var t=this._addWorkspace({name:e});return this._save(),t.save(),be("workspace#added",t),t}},{key:"bulkRemoveWorkspacesByIds",value:function(e){var t=this,n=this.workspaces;return e.forEach((function(e){var a=t._workspaceId2Index(e);-1!==a&&(n[a].remove(),n.splice(a,1))})),this._save(),be("workspace#deleted"),this._autoSelectActiveWorkspace()}},{key:"removeWorkspaceById",value:function(e){this.bulkRemoveWorkspacesByIds([e])}}]),e}());function Aa(e,t){e.endsWith(".git")&&(e=e.substr(0,e.length-4));var n=e.lastIndexOf("/"),a=e.lastIndexOf("/",n-1),r=e.substr(a+1,n-a-1);return t="".concat(r,":").concat(t),{owner:r,repo:e.substr(n+1),path:e.substr(a+1),token:"Basic ".concat(kt.a.encode(t))}}function Ta(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=e.owner,r=e.token;if(!a||!r)return Promise.reject("github: bad request");var i=t.startsWith("/")?"":"/";return fetch("https://api.github.com".concat(i).concat(t),Object(ue.a)({method:"GET",headers:{Accept:"application/vnd.github.v3+json",Authorization:r,Host:"api.github.com","User-Agent":a}},n)).then((function(e){return e.json()}))}function Da(e,t){return Pa.apply(this,arguments)}function Pa(){return(Pa=Object(j.a)(w.a.mark((function e(t,n){var a;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Aa(t,n),e.abrupt("return",Ta(a,"/repos/".concat(a.path,"/contents")).then((function(e){return e.map((function(e){return{name:e.name,path:e.path,sha:e.sha}}))})).catch((function(e){E(e)})));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Wa(e,t,n){return Ra.apply(this,arguments)}function Ra(){return(Ra=Object(j.a)(w.a.mark((function e(t,n,a){var r;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a||a.path){e.next=2;break}return e.abrupt("return",Promise.reject("github: path not specified"));case 2:return r=Aa(t,n),e.abrupt("return",Ta(r,"/repos/".concat(r.path,"/contents/").concat(a.path)).then((function(e){return E("github: downloaded ".concat(a.path)),kt.a.decode(e.content)})).catch((function(e){return E(e),[]})));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Na(e,t,n,a){return La.apply(this,arguments)}function La(){return(La=Object(j.a)(w.a.mark((function e(t,n,a,r){var i,o,c;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a){e.next=2;break}return e.abrupt("return",Promise.reject("github: path not specified"));case 2:return i=Aa(t,n),"string"===typeof a?o=a:(o=a.path,c=a.sha),"string"!==typeof r&&(r=JSON.stringify(r)),r=kt.a.encode(r),e.abrupt("return",Ta(i,"/repos/".concat(i.path,"/contents/").concat(o),{method:"PUT",body:JSON.stringify({message:"".concat(c?"updated":"added"," "),content:r,sha:c})}).then((function(e){var t=e.content;return E("github: ".concat(c?"updated":"created"," ").concat(o)),{path:o,sha:t.sha}})).catch((function(e){E(e)})));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ma(e,t,n){return Ua.apply(this,arguments)}function Ua(){return(Ua=Object(j.a)(w.a.mark((function e(t,n,a){var r;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a||a.path){e.next=2;break}return e.abrupt("return",Promise.reject("github: path not specified"));case 2:return r=Aa(t,n),e.abrupt("return",Ta(r,"/repos/".concat(r.path,"/contents/").concat(a.path),{method:"DELETE",body:JSON.stringify({message:"delete",sha:a.sha})}).then((function(e){return E("github: deleted ".concat(a.path)),!0})).catch((function(e){return E(e),!1})));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ba(e,t){var n=oe("lastSyncTime")||0,a={localAdded:0,localDeleted:0,localUpdated:0,remoteAdded:0,remoteDeleted:0,remoteUpdated:0};return e.forEach((function(e){return e.sync=""})),t.forEach((function(t){t.sync="";var r=function(e,t,n){var a={localAdded:0,localDeleted:0,localUpdated:0,remoteAdded:0,remoteDeleted:0,remoteUpdated:0},r=n.items;if(null===r||void 0===r||!r.length)return n.sync="discarded",a;var i=function(e){var t=e.lastUpdated;if(!t){var n=e.items;t=0,n.forEach((function(e){var n=e.last_modified;t?n>t&&(t=n):t=n}))}return t}(n),o=t.find((function(e){return e.getId()===n.id}));if(!o){if(i<e)return E("sync: discarded ".concat(n.id," - already deleted locally")),n.sync="discarded",a.remoteDeleted=r.length,a;var c=new Ca(n);return c.loadItems(r),t.push(c),E("sync: added ".concat(n.id)),c.sync="added",a.localAdded=r.length,a}var s=o.items;r.forEach((function(t){var n=s.findIndex((function(e){return e.id===t.id}));if(-1===n){if(t.last_modified<e)return void a.remoteDelete++;s.push(t),a.localAdded++}else{var r=s[n];r.last_modified<t.last_modified?(s[n]=new xa(t),a.localUpdated++):r.last_modified>t.last_modified&&a.remoteUpdated++}}));for(var u=function(t){var n=s[t];-1===r.findIndex((function(e){return e.id===n.id}))&&(n.last_modified<e?(s.splice(t,1),a.localDeleted++):(n.last_modified=$e(),a.localUpdated++,a.remoteAdded++))},l=s.length-1;l>=0;l--)u(l);var d=a.localAdded,h=a.localDeleted,p=a.localUpdated,f=a.remoteAdded,v=a.remoteDeleted,g=a.remoteUpdated;return(d||h||p)&&(o.sync="updated"),(f||v||g)&&(n.sync="updated"),a}(n,e,t);Object.keys(a).forEach((function(e){return a[e]+=r[e]}))})),e.forEach((function(e){"updated"===e.sync&&e.getDataSource().generateItemSnopsis("all")})),ce("lastSyncTime",$e()),a}function Ga(){return(Ga=Object(j.a)(w.a.mark((function e(t,n,a){var r,i,o,c;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=[],i=[],c={created:[],deleted:[],updated:[]},e.abrupt("return",Da(n,a).then((function(e){return Promise.all(e.map((function(e){return Wa(n,a,e)})))})).then((function(e){return e.forEach((function(e){try{var t=JSON.parse(e);i.push(t)}catch(n){return E("sync/github: caught an exception"),Promise.reject(n)}})),Ba(t,i)})).then((function(e){o=e;var n=new Map;r.forEach((function(e){n.set(e.path,e)})),i.forEach((function(e){var t=e.id,a=e.sync;if("discarded"===a||"updated"===a){var r=n.get(t);r.decision="discarded"===a?"delete":"update",n.set(t,r)}})),t.forEach((function(e){var t=e.getId(),a=e.sync;if(n.has(t)){var r=n.get(t);a&&"added"!==a&&(r.decision="update",n.set(t,r))}else e.isEmpty()||n.set(t,{path:t,decision:"create"})})),n.forEach((function(e){"delete"===e.decision?c.deleted.push(e):"update"===e.decision?c.updated.push(e):"create"===e.decision&&c.created.push(e)}))})).then((function(e){return Promise.all(c.deleted.map((function(e){return Ma(n,a,e)})))})).then((function(e){return Promise.all([].concat(Object(Te.a)(c.updated),Object(Te.a)(c.created)).map((function(e){var r=e.path,i=t.find((function(e){return e.getId()===r})),o={id:i.getId(),name:i.getName(),lastUpdated:$e(),items:i.getItems()};return Na(n,a,e.sha?e:r,o)})))})).then((function(e){return o})));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Fa=n(574),qa=n(271),Ka=n.n(qa),Ha=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(e){var a;return Object(s.a)(this,n),(a=t.call(this,e)).state={visible:!0,disabled:!0,bounds:{left:0,top:0,bottom:0,right:0}},a.draggleRef=r.a.createRef(),a.onButtonClicked=a.onButtonClicked.bind(Object(l.a)(a)),a}return Object(u.a)(n,[{key:"onButtonClicked",value:function(e){if(!be(e))return!0;this.setState({visible:!1})}},{key:"onStart",value:function(e,t){var n,a,r,i,o=null===(n=window)||void 0===n||null===(a=n.document)||void 0===a?void 0:a.documentElement,c=o.clientWidth,s=o.clientHeight,u=null===(r=this.draggleRef)||void 0===r||null===(i=r.current)||void 0===i?void 0:i.getBoundingClientRect();this.setState({bounds:{left:-(null===u||void 0===u?void 0:u.left)+(null===t||void 0===t?void 0:t.x),right:c-((null===u||void 0===u?void 0:u.right)-(null===t||void 0===t?void 0:t.x)),top:-(null===u||void 0===u?void 0:u.top)+(null===t||void 0===t?void 0:t.y),bottom:s-((null===u||void 0===u?void 0:u.bottom)-(null===t||void 0===t?void 0:t.y))}})}},{key:"render",value:function(){var e=this,t=this.state,n=t.bounds,a=t.disabled,r=t.visible,i=this.props,o=i.title,c=i.children,s=i.cancelButtonProps,u=void 0===s?{}:s,l=i.okButtonProps,d=void 0===l?{}:l,h=i.okText,p=void 0===h?"OK":h;return Object(Ht.jsx)(Fa.a,{title:Object(Ht.jsx)("div",{style:{width:"100%",cursor:"move"},onMouseOver:function(){a&&e.setState({disabled:!1})},onMouseOut:function(){e.setState({disabled:!0})},onFocus:function(){},onBlur:function(){},children:o}),visible:r,closable:!1,bodyStyle:{padding:"4px 24px 16px 24px"},okButtonProps:d,okText:p,cancelButtonProps:u,onOk:function(){return e.onButtonClicked("dialogue#ok")},onCancel:function(){return e.onButtonClicked("dialogue#cancel")},modalRender:function(t){return Object(Ht.jsx)(Ka.a,{disabled:a,bounds:n,onStart:function(t,n){return e.onStart(t,n)},children:Object(Ht.jsx)("div",{ref:e.draggleRef,children:t})})},children:c})}}]),n}(r.a.Component),Va=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){var e=this.props.context,t=e.title,n=e.text;return Object(Ht.jsx)(Fa.a,{title:t,visible:!0,closable:!1,onOk:function(e){return be("dlg#confirm#OK")},onCancel:function(e){return be("dlg#confirm#cancelled")},children:n})}}]),n}(r.a.Component),za=Va,Ja=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(e){var a;return Object(s.a)(this,n),(a=t.call(this,e)).handleOk=function(e){var t=a.state.text;t?be("dlg#getText#OK",{text:t}):be("dlg#getText#cancelled")},a.handleCancel=function(e){be("dlg#getText#cancelled")},a.handleChange=function(e){a.setState({text:e.target.value})},a.handleKeyDown=function(e){13===e.keyCode&&be("dlg#getText#OK",{text:a.state.value})},a.state={text:a.props.context.text||""},a}return Object(u.a)(n,[{key:"render",value:function(){var e=this.props.context,t=e.type,n=e.title,a=e.text,r=e.placeholder;return Object(Ht.jsxs)(Fa.a,{title:n,visible:!0,closable:!1,onOk:this.handleOk,onCancel:this.handleCancel,children:["password"===t&&Object(Ht.jsx)(dt.a.Password,{defaultValue:a,placeholder:r||"Enter password here!",autoFocus:!0,onChange:this.handleChange,onKeyDown:this.handleKeyDown},"input#password"),"password"!==t&&Object(Ht.jsx)(dt.a,{defaultValue:a,placeholder:r||"Enter value here!",autoFocus:!0,onChange:this.handleChange,onKeyDown:this.handleKeyDown},"input#text")]})}}]),n}(r.a.Component),Ya=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(e){var a;return Object(s.a)(this,n),(a=t.call(this,e)).state={name:""},a}return Object(u.a)(n,[{key:"render",value:function(){var e=this;return Object(Ht.jsxs)(Fa.a,{title:"Create a workspace",visible:!0,closable:!1,onOk:function(){var t=e.state.name;t&&be("dlg#getWorkspace#OK",{name:t})},onCancel:function(){return be("dlg#getWorkspace#cancelled")},children:[Object(Ht.jsx)("div",{children:"Workspace Name"}),Object(Ht.jsx)(dt.a,{defaultValue:this.state.name,placeholder:"Enter workspace name here!",autoFocus:!0,onChange:function(t){return e.setState({name:t.target.value})}},"input#name")]})}}]),n}(r.a.Component),Qa=n(580),Xa=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(e){var a;return Object(s.a)(this,n),(a=t.call(this,e)).state={isEditing:!1,tagValue:""},a.tags=e.tags,a.validateTags(),a.onDeleteTag=a.onDeleteTag.bind(Object(l.a)(a)),a.onStartEditTag=a.onStartEditTag.bind(Object(l.a)(a)),a.onChangeTag=a.onChangeTag.bind(Object(l.a)(a)),a.onEndEditTag=a.onEndEditTag.bind(Object(l.a)(a)),a}return Object(u.a)(n,[{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.tags=e.tags,this.validateTags()}},{key:"validateTags",value:function(){var e=this.tags,t=Object(Te.a)(new Set(e.map((function(e){return(e=e.trim().toLowerCase()).startsWith("#")&&(e=e.substr(1)),e}))));e.splice(0,e.length),t.forEach((function(t){t.length&&e.push(t)}))}},{key:"onDeleteTag",value:function(e){e=e.trim().toLowerCase();var t=this.tags.findIndex((function(t){return t===e}));-1!==t&&(this.tags.splice(t,1),this.forceUpdate())}},{key:"onStartEditTag",value:function(){var e=this;this.setState({isEditing:!0},(function(){return e.tagInput.focus()}))}},{key:"onChangeTag",value:function(e){this.setState({tagValue:e.target.value})}},{key:"onEndEditTag",value:function(){this.tags.push(this.state.tagValue.trim().toLowerCase()),this.validateTags(),this.setState({isEditing:!1,tagValue:""})}},{key:"render",value:function(){var e=this,t=this.props,n=t.title,a=t.buttonTitle,r=this.state,i=r.isEditing,o=r.tagValue;return Object(Ht.jsxs)("div",{style:{lineHeight:2},children:[n&&Object(Ht.jsx)("span",{style:{marginRight:"8px"},children:n}),this.tags.map((function(t,n){var a=t.length>20,r=Object(Ht.jsx)(Qa.a,{color:"green",closable:!0,onClose:function(){return e.onDeleteTag(t)},children:a?"".concat(t.slice(0,20),"..."):t},t);return a?Object(Ht.jsx)(lt.a,{title:t,children:r},t):r})),i&&Object(Ht.jsx)(dt.a,{ref:function(t){return e.tagInput=t},type:"text",size:"small",style:{width:78},value:o,onChange:this.onChangeTag,onBlur:this.onEndEditTag,onPressEnter:this.onEndEditTag},"input#tag-editor"),!i&&Object(Ht.jsxs)(Qa.a,{onClick:this.onStartEditTag,style:{background:"#fff",borderStyle:"dashed"},children:[Object(Ht.jsx)(Re.a,{})," ",a||"New Tag"]})]})}}]),n}(a.Component),Za=Xa,$a=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(e){var a;return Object(s.a)(this,n),(a=t.call(this,e)).tags=[],ge("addTags",a.onEvent.bind(Object(l.a)(a))),a}return Object(u.a)(n,[{key:"componentWillUnmount",value:function(){me("addTags")}},{key:"onEvent",value:function(e,t){return"dialogue#cancel"===e?(be("dlg#addTags#cancelled"),!0):"dialogue#ok"===e?(be("dlg#addTags#OK",this.tags),!0):void 0}},{key:"render",value:function(){return Object(Ht.jsxs)("div",{children:[Object(Ht.jsx)("div",{style:{marginBottom:"16px"},children:"Enter tags to add"}),Object(Ht.jsx)(Za,{tags:this.tags,buttonTitle:"Add Tag"})]})}}]),n}(r.a.Component),er=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(e){var a;return Object(s.a)(this,n),(a=t.call(this,e)).tags=e.tags,a.state={selectedTags:[]},ge("deleteTags",a.onEvent.bind(Object(l.a)(a))),a}return Object(u.a)(n,[{key:"componentWillUnmount",value:function(){me("deleteTags")}},{key:"onEvent",value:function(e,t){return"dialogue#cancel"===e?(be("dlg#deleteTags#cancelled"),!0):"dialogue#ok"===e?(be("dlg#deleteTags#OK",this.state.selectedTags),!0):void 0}},{key:"onTagSelected",value:function(e){var t=this.state.selectedTags;-1!==t.indexOf(e)?this.setState({selectedTags:t.filter((function(t){return t!==e}))}):this.setState({selectedTags:[].concat(Object(Te.a)(t),[e])})}},{key:"render",value:function(){var e=this,t=this.tags,n=this.state.selectedTags;return Object(Ht.jsxs)("div",{children:[Object(Ht.jsx)("div",{style:{marginBottom:"16px"},children:"Select tags to remove"}),Object(Ht.jsx)("div",{style:{lineHeight:2},children:t.map((function(t){var a=t.name;return Object(Ht.jsx)(Qa.a,{color:n.indexOf(a)>-1?"red":"",onClick:function(){return e.onTagSelected(a)},children:a},a)}))})]})}}]),n}(r.a.Component),tr=n(579),nr=dt.a.TextArea,ar=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(e){var a;return Object(s.a)(this,n),(a=t.call(this,e)).item=new xa(e.item),a.state={errorMessage:""},a.onAttrChanged=a.onAttrChanged.bind(Object(l.a)(a)),a.onPropChanged=a.onPropChanged.bind(Object(l.a)(a)),ge("memoEditor",a.onEvent.bind(Object(l.a)(a))),a}return Object(u.a)(n,[{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=e.item;t&&(this.item=new xa(t),this.setState({errorMessage:""}))}},{key:"componentWillUnmount",value:function(){me("memoEditor")}},{key:"onAttrChanged",value:function(e,t){this.item[e]=t,this.setState({errorMessage:""})}},{key:"onPropChanged",value:function(e,t){this.item.props[e].value=t,this.setState({errorMessage:""})}},{key:"onEvent",value:function(e,t){if("dialogue#cancel"===e)return be("dlg#editItem#cancelled"),!0;if("dialogue#ok"===e){var n=this.item,a="";return n.title.trim().length||(a+="Title cannot be empty"),a?(this.setState({errorMessage:a}),!1):(be("dlg#editItem#OK",n),!0)}}},{key:"renderItemProp",value:function(e,t){var n=this,a=e.name,r=e.type,i=e.value;return r===m?Object(Ht.jsxs)("div",{style:{margin:"16px 0 0 0"},children:[Object(Ht.jsx)("div",{className:"itemedit-name",children:a}),Object(Ht.jsx)(dt.a,{type:"url",value:i,placeholder:"URL",onChange:function(e){return n.onPropChanged(t,e.target.value)}},"input#url")]}):r===b?Object(Ht.jsxs)("div",{style:{margin:"16px 0 0 0"},children:[Object(Ht.jsx)("div",{className:"itemedit-name",children:a}),Object(Ht.jsx)(dt.a.Password,{value:i,placeholder:"Password/credential",onChange:function(e){return n.onPropChanged(t,e.target.value)}},"input#password")]}):Object(Ht.jsxs)("div",{style:{margin:"16px 0 0 0"},children:[Object(Ht.jsx)("div",{className:"itemedit-name",children:a}),Object(Ht.jsx)(nr,{value:i,onChange:function(e){return n.onPropChanged(t,e.target.value)},placeholder:"Enter text here",autoSize:{minRows:1,maxRows:10}})]})}},{key:"render",value:function(){var e,t=this,n=this.item,a=this.state.errorMessage;return Object(Ht.jsxs)("div",{children:[a&&Object(Ht.jsx)(tr.a,{message:a,banner:!0,closable:!0}),Object(Ht.jsx)("div",{style:{margin:"8px 0",display:"flex"},children:Object(Ht.jsx)(Xt,{mode:"detail",theme:n.getColorTheme(),style:{margin:"0 16px"},eventHandler:function(e,n){t.onAttrChanged("theme",n.name)}})}),Object(Ht.jsx)("div",{className:"itemedit-name",children:"Tags"}),Object(Ht.jsx)(Za,{tags:n.getTags()}),Object(Ht.jsx)("div",{className:"itemedit-name",children:"Title"}),Object(Ht.jsx)(dt.a,{value:n.getTitle(),placeholder:"Title",onChange:function(e){return t.onAttrChanged("title",e.target.value)}},"input#title"),null===(e=n.getProperties())||void 0===e?void 0:e.map((function(e,n){return t.renderItemProp(e,n)}))]})}}]),n}(r.a.Component);function rr(e){return ir.apply(this,arguments)}function ir(){return(ir=Object(j.a)(w.a.mark((function e(t){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("object"===typeof t){e.next=2;break}return e.abrupt("return",Promise.reject("readTextFileObj: invalid arg"));case 2:return e.abrupt("return",new Promise((function(e){var n=new FileReader;n.readAsText(t),n.onload=function(){e(n.result)}})));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function or(e){if("object"===typeof e&&null!==e){Array.isArray(e)||(e=e.items||[]);var t=[],n=$e();return e.forEach((function(e){var a={props:[]};for(var r in e){var i=e[r];switch(typeof i){case"string":break;case"number":case"boolean":i=String(i);break;case"object":i=i instanceof Date?String(i):void 0;break;default:i=void 0}if(!i)return;switch(r.toLowerCase()){case"id":case"title":case"theme":case"add_date":case"last_modified":case"tags":a[r]=i;break;default:var o=fe(i)?m:g;a.props.push({name:r,type:o,value:i})}a.id||(a.id=nt()),!a.title&&a.props.length&&(a.title=a.props[0].value,a.props.shift()),a.add_date||(a.add_date=n)}a.title&&t.push(a)})),{items:t}}}var cr=n(272),sr=n.n(cr);function ur(e){var t=sr.a.parse(e,{delimiter:",",header:!0,newline:"\r\n",skipEmptyLines:!0}),n=t.data,a=t.errors,r=t.meta,i=null===r||void 0===r?void 0:r.fields;if(!(null!==a&&void 0!==a&&a.length||null===i||void 0===i)&&i.length)return function(e,t){if(null!==e&&void 0!==e&&e.length&&null!==t&&void 0!==t&&t.length){for(var n,a=[],r=[],i=0;i<e.length;i++)e[i]?(n||(n=e[i]),r.push(g)):r.push(0);if(n){var o=Array.isArray(t[0]);return t.forEach((function(t){for(var i={props:[]},c=!1,s=0;s<e.length;s++)if(r[s]){var u=e[s],l=o?t[s]:t[u];if(u!==n){var d=fe(l)?m:g;d!==g&&(r[s]=d),c||(c=!!l),i.props.push({name:u,type:d,value:l})}else i.title=l,c=!!l}c&&a.push(i)})),a.forEach((function(e){for(var t=0;t<r.length;t++){var n=e.props[t];n&&(n.type=r[t])}})),a}}}(i,n)}var lr=n(188);function dr(e){return hr.apply(this,arguments)}function hr(){return(hr=Object(j.a)(w.a.mark((function e(t){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){var a=new FileReader;a.onload=function(t){var n=t.target.result,a=Object(lr.a)(n,{type:"array"}),r=[];return a.SheetNames.forEach((function(e){var t=a.Sheets[e],n=lr.b.sheet_to_json(t);null!==n&&void 0!==n&&n.length&&r.push.apply(r,Object(Te.a)(n))})),e(or(r))},a.onerror=function(e){n()},a.readAsArrayBuffer(t)})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function pr(e){var t=[],n=e.split("\n\n");return n.length>1?n.forEach((function(e){var n={};e.split("\n").map((function(e){return e.strim()})).filter((function(e){return e.length})).forEach((function(e){if(n.title){var t="",a=e.indexOf(":");-1!==a&&(t=e.substr(0,a).trim(),e=e.substr(a+1).trimt()),n.props.push({name:t,type:fe(e)?m:g,value:e})}else n.title=e})),t.push(n)})):(n=e.split("\n").map((function(e){return e.trim()})).filter((function(e){return e.length}))).forEach((function(e){var n={title:e};t.push(n)})),t}var fr=n(273),vr=n.n(fr);function gr(e,t){var n=e.attr("href"),a=null===n||void 0===n?void 0:n.toLowerCase(),r=e.text();if(null!==a&&void 0!==a&&a.startsWith("http://")||null!==a&&void 0!==a&&a.startsWith("https://"))return{url:n,title:r,tags:Object(Te.a)(t),add_date:Number(e.attr("add_date"))};E("parser: discarded bookmark ".concat(r," (").concat(n,")"))}function mr(e){var t;switch(e=null===(t=e)||void 0===t?void 0:t.trim().toLowerCase()){case"bookmarks bar":case"bookmarks":case"favorites":case"favorites bar":case"new folder":return;default:return e}}function br(e){for(;e&&"dl"!==e.name;)e=e.next;return e}function kr(e){for(var t,n,a=[],r=[],i=[],o=0,c=0,s=vr.a.load(e),u=s("dt"),l=0;l<u.length;l++){var d=u[l],h=s(d).find("> h3");if(null!==h&&void 0!==h&&h.length){var p=mr(s(h[0]).text());if(!p)continue;var f=br(h[0]);if(!f)continue;for(var v=r.length-1;v>=0;v--)if(t=f,n=r[v],t&&n&&t.parent.parent===n.parent.parent){r.length=v,i.length=v;break}r.push(f),i.push(p)}else{var g=s(d).find("> a").first();if(null!==g&&void 0!==g&&g.length){var m=gr(g,i);m?(a.push(m),o++):c++}}}return a.forEach((function(e){e.tags=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return"string"===typeof e?e=e.split(","):Array.isArray(e)||(E("parser: invalid tags- ".concat(JSON.stringify(e))),e=""),e=e.map((function(e){return e.trim().toLowerCase()})),Object(Te.a)(new Set(e))}(e.tags)})),E("parser: parsed ".concat(o,", discarded ").concat(c)),a}function yr(e){var t;return null===(t=kr(e))||void 0===t?void 0:t.map((function(e){var t=e.id,n=e.title,a=e.url,r=e.tags,i=e.add_date;return r&&r.push("bookmark"),{id:t,title:n,tags:r||["bookmark"],add_date:i,props:[{name:"URL",type:m,value:a}]}}))}function jr(e){return Or.apply(this,arguments)}function Or(){return(Or=Object(j.a)(w.a.mark((function e(t){var n,a,r,i,o;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{o=JSON.parse(t),i=or(o)}catch(c){}return i&&(Array.isArray(i)||(i=i.items)),null!==(n=i)&&void 0!==n&&n.length||(i=yr(t)),null!==(a=i)&&void 0!==a&&a.length||(i=ur(t)),null!==(r=i)&&void 0!==r&&r.length||(i=pr(t)),e.abrupt("return",i);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function xr(){for(var e=new Map,t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];n.forEach((function(t){var n,a=Object(O.a)(t);try{for(a.s();!(n=a.n()).done;){var r,i=n.value,o=null===(r=ka(i))||void 0===r?void 0:r.trim().toLowerCase();if(o){try{o=decodeURIComponent(o)}catch(c){E("import: detected invalid URL ".concat(o))}e.has(o)?i.id=e.get(o):e.set(o,i.id)}}}catch(s){a.e(s)}finally{a.f()}}))}function wr(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";if(t.items){t.items=t.items.map((function(e){return new xa(e)})),xr(e.getItems(),t.items);var a=$e();t.items.forEach((function(e){var t;(e.add_date||(e.add_date=a),n)&&(null===(t=e.props)||void 0===t||t.forEach((function(e){e.type===b&&(e.value=ct(e.value,n))})))})),e.dataSource.sync(Oa(e.getItems(),t.items)),ya(e.dataSource.items)}}function Sr(){return(Sr=Object(j.a)(w.a.mark((function e(t){var n;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n=t.name).endsWith(".xls")&&!n.endsWith(".xlsx")){e.next=5;break}return e.abrupt("return",dr(t));case 5:return e.abrupt("return",rr(t).then((function(e){return n.endsWith(".csv")?ur(e):n.endsWith(".txt")?pr(e):e})));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ir(e,t){return Er.apply(this,arguments)}function Er(){return(Er=Object(j.a)(w.a.mark((function e(t,n){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,a){if(Array.isArray(n)){var r=new Ia(n);n={items:r.items}}if(n.key)return wn({type:"password",title:"Need a password to decrypt",placeholder:"Enter password here!",text:""}).then((function(r){var i=r.text;return it(i)!==n.key.passwordHash?a("invalid password"):it(ct(n.key.encryptedKey,i))!==n.key.keyHash?a("invalid key"):void e(wr(t,n,i))}));e(wr(t,n))})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Cr(){return(Cr=Object(j.a)(w.a.mark((function e(t,n){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",jr(n).then((function(e){return Ir(t,e)})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _r(e,t){var n=t?nt()+nt()+nt()+nt():"",a=[];e.forEach((function(e){var t=e.id,r=e.title,i=e.theme,o=e.tags,c=e.add_date,s=e.last_modified,u=Object(Te.a)(e.props);u.forEach((function(e){e.type===b&&(e.value=ot(e.value,n))})),a.push({id:t,title:r,theme:i,tags:o,add_date:c,last_modified:s,props:u})}));var r={items:a};return n&&(r.key={passwordHash:it(t),keyHash:it(n),encryptedKey:ot(n,t,"AES")}),JSON.stringify(r)}function Ar(){return(Ar=Object(j.a)(w.a.mark((function e(t){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.some((function(e){return e.containsSecret()}))){e.next=5;break}return e.abrupt("return",wn({type:"password",title:"Need a password to encrypt",placeholder:"Enter password here!",text:""}).then((function(e){return _r(t,e.text)})));case 5:return e.abrupt("return",_r(t));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Tr=n(570),Dr=n(602),Pr=n(285),Wr=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(e){var a;return Object(s.a)(this,n),(a=t.call(this,e)).state={password:"",ipfsCid:"",fileList:[],file:void 0},ge("importDlg",a.onEvent.bind(Object(l.a)(a))),a}return Object(u.a)(n,[{key:"componentWillUnmount",value:function(){me("importDlg")}},{key:"onEvent",value:function(e,t){return"dialogue#cancel"===e?(be("dlg#import#cancelled"),!0):"dialogue#ok"===e||void 0}},{key:"getDescription",value:function(){return this.props.description?this.props.description:Object(Ht.jsx)("p",{className:"ant-upload-text",children:"You can click or drag the file to this area to import"})}},{key:"render",value:function(){var e=this,t={onRemove:function(t){e.setState((function(e){var n=e.fileList.indexOf(t),a=e.fileList.slice();return a.splice(n,1),{fileList:a}}))},beforeUpload:function(t){return e.setState((function(e){return{fileList:[].concat(Object(Te.a)(e.fileList),[t])}})),be("dlg#import#OK",Object(ue.a)(Object(ue.a)({type:"file"},e.state),{},{file:t})),!1},fileList:this.state.fileList};return Object(Ht.jsxs)("div",{children:[Object(Ht.jsx)("div",{style:{margin:"4px 8px 8px 0"},children:"Imported content is protected by password"}),Object(Ht.jsx)(dt.a,{type:"password",style:{flex:"auto"},placeholder:"Enter password (optional)",value:this.state.password,onChange:function(t){e.setState({password:t.target.value})}},"input#password"),Object(Ht.jsx)("div",{style:{margin:"16px 8px 8px 0"},children:"Import from a local file"}),Object(Ht.jsx)("div",{children:Object(Ht.jsxs)(Tr.a.Dragger,Object(ue.a)(Object(ue.a)({},t),{},{children:[Object(Ht.jsx)("p",{className:"ant-upload-drag-icon",children:Object(Ht.jsx)(Dr.a,{})}),this.getDescription()]}))}),Object(Ht.jsx)("div",{style:{margin:"16px 8px 8px 0"},children:"Download from cloud"}),Object(Ht.jsxs)("div",{style:{display:"flex"},children:[Object(Ht.jsx)(dt.a,{style:{flex:"auto"},placeholder:"IPFS cid",value:this.state.ipfsCid,onChange:function(t){e.setState({ipfsCid:t.target.value})}},"input#ipfs-cid"),Object(Ht.jsx)(Pe.a,{style:{margin:"0 0 0 16px"},type:"primary",icon:Object(Ht.jsx)(Pr.a,{}),onClick:function(){return be("dlg#import#OK",Object(ue.a)({type:"ipfs"},e.state))},children:"IPFS"})]})]})}}]),n}(r.a.Component),Rr=n(577),Nr=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(e){var a;return Object(s.a)(this,n),(a=t.call(this,e)).state={type:"file",format:"json",protect:!1,passssword:"",email:"",errorMessage:""},ge("exportDlg",a.onEvent.bind(Object(l.a)(a))),a}return Object(u.a)(n,[{key:"componentWillUnmount",value:function(){me("exportDlg")}},{key:"onEvent",value:function(e,t){if("dialogue#cancel"===e)return be("dlg#export#cancelled"),!0;if("dialogue#ok"===e){var n=this.state,a=n.type,r=n.email,i=n.password,o="";return n.protect&&!i&&(o+="Password is empty"),"email"!==a||pe(r)||(o+="".concat(o.length?", ":"","invalid email")),o?(this.setState({errorMessage:o}),!1):(be("dlg#export#OK",this.state),!0)}}},{key:"render",value:function(){var e=this,t=this.state,n=t.errorMessage,a=t.type,r=t.protect,i=t.format;return Object(Ht.jsxs)("div",{children:[n&&Object(Ht.jsx)(tr.a,{message:n,banner:!0,closable:!0}),Object(Ht.jsxs)("div",{style:{margin:"16px 8px 8px 0"},children:["Data format",Object(Ht.jsxs)(Rr.a,{defaultValue:i,style:{margin:"0 0 0 16px",width:"200px"},onChange:function(t){e.setState({errorMessage:"",format:t})},children:[Object(Ht.jsx)(Rr.a.Option,{value:"json",children:"JSON"}),Object(Ht.jsx)(Rr.a.Option,{value:"csv",children:"CSV"})]})]}),Object(Ht.jsxs)("div",{style:{margin:"16px 8px 8px 0"},children:["Destination",Object(Ht.jsxs)(Rr.a,{defaultValue:a,style:{margin:"0 0 0 16px",width:"200px"},onChange:function(t){e.setState({errorMessage:"",type:t})},children:[Object(Ht.jsx)(Rr.a.Option,{value:"file",children:"Local file"}),Object(Ht.jsx)(Rr.a.Option,{value:"ipfs",children:"IPFS"}),Object(Ht.jsx)(Rr.a.Option,{value:"gdrive",children:"Google Drive"}),Object(Ht.jsx)(Rr.a.Option,{value:"email",children:"Email"})]}),"email"===a&&Object(Ht.jsx)(dt.a,{type:"email",style:{flex:"auto",margin:"8px 0 0 0"},placeholder:"Enter reciepent's email",value:this.state.email,onChange:function(t){return e.setState({errorMessage:"",email:t.target.value})}},"input#email")]}),Object(Ht.jsxs)("div",{style:{margin:"16px 8px 8px 0"},children:[Object(Ht.jsx)(qn.a,{onChange:function(t){e.setState({errorMessage:"",protect:t.target.checked})},children:"Protect data by password"}),r&&Object(Ht.jsx)(dt.a,{type:"password",style:{flex:"auto",margin:"8px 0 0 0"},placeholder:"Enter password",value:this.state.password,onChange:function(t){e.setState({errorMessage:"",password:t.target.value})}},"input#password")]})]})}}]),n}(r.a.Component),Lr=n(603),Mr=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(e){var a;return Object(s.a)(this,n),(a=t.call(this,e)).state={githubrepo:e.githubrepo||"",githubtoken:e.githubtoken||""},ge("syncDlg",a.onEvent.bind(Object(l.a)(a))),a}return Object(u.a)(n,[{key:"componentWillUnmount",value:function(){me("syncDlg")}},{key:"onEvent",value:function(e,t){return"dialogue#cancel"===e?(be("dlg#sync#cancelled"),!0):"dialogue#ok"===e||void 0}},{key:"render",value:function(){var e=this;return Object(Ht.jsxs)("div",{children:[Object(Ht.jsx)("div",{style:{margin:"16px 8px 8px 0"},children:"Sync with Github repository"}),Object(Ht.jsx)("div",{children:Object(Ht.jsx)(dt.a,{type:"url",placeholder:"Repository URL",value:this.state.githubrepo,onChange:function(t){return e.setState({githubrepo:t.target.value})}},"input#url")}),Object(Ht.jsx)("div",{style:{margin:"8px 0"},children:Object(Ht.jsx)(dt.a.Password,{placeholder:"Personal Access Token",value:this.state.githubtoken,onChange:function(t){return e.setState({githubtoken:t.target.value})}},"input#password")}),Object(Ht.jsx)(Pe.a,{type:"primary",icon:Object(Ht.jsx)(Lr.a,{}),onClick:function(){return be("dlg#sync#OK",{type:"github",url:e.state.githubrepo,token:e.state.githubtoken})},children:"Sync"})]})}}]),n}(r.a.Component),Ur=p,Br=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).id="".concat(Ur,".").concat(nt()),n.state={mode:"default",evtObj:void 0},n.onCloseDrawer=n.onCloseDrawer.bind(Object(l.a)(n)),n.onEvent=n.onEvent.bind(Object(l.a)(n)),n.onChangeWorkspace=n.onChangeWorkspace.bind(Object(l.a)(n)),n.onEditWorkspace=n.onEditWorkspace.bind(Object(l.a)(n)),n.onClickWorkspace=n.onClickWorkspace.bind(Object(l.a)(n)),n.onImportFile=n.onImportFile.bind(Object(l.a)(n)),n.onImport=n.onImport.bind(Object(l.a)(n)),n.onExport=n.onExport.bind(Object(l.a)(n)),n.onDropFile=n.onDropFile.bind(Object(l.a)(n)),Ae("//".concat(Ur," Page")),n}return Object(u.a)(a,[{key:"componentDidMount",value:function(){ge("".concat(Ur,"-").concat(this.id),this.onEvent)}},{key:"componentWillUnmount",value:function(){me("".concat(Ur,"-").concat(this.id))}},{key:"getWorkspace",value:function(){return _a.getActiveWorkspace()}},{key:"getAllWorkspaces",value:function(){return _a.getAllWorkspaces()}},{key:"invalidateUI",value:function(){this.forceUpdate()}},{key:"bulkLoadWorkspaceData",value:function(){var e=this.getAllWorkspaces(),t=e.filter((function(e){return!e.loaded}));return t.length?Promise.all(t.map((function(e){return e.load()})).then((function(n){for(var a=0;a<t.length;a++){var r;t[a].loadItems(null===(r=n[a])||void 0===r?void 0:r.items)}return e}))):Promise.resolve(e)}},{key:"bulkSaveWorkspaceData",value:function(e){var t=this.getAllWorkspaces();null===e||void 0===e||e.forEach((function(e){t.find((function(t){return t.getId()===e})).save()}))}},{key:"bulkRemoveWorkspaceData",value:function(e){var t=this,n=this.getAllWorkspaces();null===e||void 0===e||e.forEach((function(e){t.removeWorkspace(n.find((function(t){return t.getId()===e})))}))}},{key:"removeWorkspace",value:function(e){var t=_a.removeWorkspaceById(e);t?(_a.setActiveWorkspaceById(t.getId()),be("workspace#changed")):be("req@toast",{title:"Workspace",message:"Unable to remove the workspace"})}},{key:"onCloseDrawer",value:function(){this.setState({mode:"default"})}},{key:"onChangeWorkspace",value:function(e){_a.setActiveWorkspaceById(e),this.onCloseDrawer(),be("workspace#changed")}},{key:"onAddWorkspace",value:function(){(function(){return Cn.apply(this,arguments)})().then((function(e){var t=e.name,n=_a.addWorkspace(t);n.loaded=!0,_a.setActiveWorkspaceById(n.getId()),be("workspace#changed")})).catch((function(e){}))}},{key:"onRenameWorkspace",value:function(){wn({title:"Rename workspace",placeholder:"Enter workspace name here!",text:this.getWorkspace().getName()}).then((function(e){_a.renameActiveWorkspace(e.text)}))}},{key:"onConfirmAndDeleteWorkspace",value:function(e){_a.setActiveWorkspaceById(e);var t=this.getWorkspace();t.isEmpty()?be("workspace#remove"):In({title:"Remove workspace",text:'Are you sure to delete workspace "'.concat(t.getName(),'" , all data will be lost')}).then((function(e){be("workspace#remove")}))}},{key:"onClickWorkspace",value:function(e){this.getWorkspace().getId()===e&&this.onRenameWorkspace()}},{key:"onEditWorkspace",value:function(e,t){"add"===t?this.onAddWorkspace():"remove"===t&&this.onConfirmAndDeleteWorkspace(e)}},{key:"onConfirmAndDeleteItems",value:function(){var e=this.getWorkspace().getViewableDataSource().items;In({title:"Remove items",text:"Are you sure to delete ".concat(e.length," items")}).then((function(e){return be("cmd#bulk-delete-items")})).catch((function(e){}))}},{key:"importImpl",value:function(e,t){var n=this;if(e){var a=this.getWorkspace();return t&&(e=ct(e,t)),function(e,t){return Cr.apply(this,arguments)}(a,e).then((function(e){a.save(),a.invalidViewableDataSource(),n.invalidateUI()})).catch((function(e){var t,n;le.a.open({message:"Import",description:"".concat(JSON.stringify((null===(t=e.err)||void 0===t?void 0:t.message)||e.message||(null===(n=e.err)||void 0===n?void 0:n.stack)||e.stack||"Failed to import, possibly incorrect format file"))})}))}}},{key:"onImportFile",value:function(e,t){var n=this;try{return function(e){return Sr.apply(this,arguments)}(e).then((function(e){if("string"===typeof e)return n.importImpl(e,t);if("object"===typeof e){var a=n.getWorkspace();return Ir(a,e),a.save(),a.invalidViewableDataSource(),void n.invalidateUI()}}))}catch(a){console.log(a)}}},{key:"onImport",value:function(){var e=this;(function(){return _n.apply(this,arguments)})().then((function(t){var n=t.type,a=t.password,r=t.file,i=t.ipfsCid;"file"===n&&r?e.onImportFile(r,a):"ipfs"===n&&i&&function(e){return Ge.apply(this,arguments)}(i).then((function(t){return e.importImpl(t,a)}))})).catch((function(e){}))}},{key:"onDropFile",value:function(e){var t=this,n=this.getWorkspace();if(!n.isEmpty()){var a=_a.addWorkspace(e.name);_a.setActiveWorkspaceById(a.getId())}this.onImportFile(e).then((function(a){var r=t.getWorkspace();n.id===r.id?r.isEmpty()||_a.renameActiveWorkspace(e.name):r.isEmpty()&&(_a.removeWorkspaceById(r.id),_a.setActiveWorkspaceById(n.id))}))}},{key:"onExport",value:function(){var e=this;(function(){return An.apply(this,arguments)})().then((function(t){var a=t.type,r=t.password,i=t.email,o=e.getWorkspace();(function(e){return Ar.apply(this,arguments)})(o.getItems()).then((function(e){if(r&&(e=ot(e,r)),"file"===a){var t=n(568),c=new Blob([e],{type:"application/json;charset=utf-8"});t.saveAs(c,"".concat(o.name,".json"))}else"ipfs"===a?function(e){return Ue.apply(this,arguments)}(e).then((function(e){!function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=document.createElement("textarea");t.value=e,t.setAttribute("readonly",""),t.style.position="absolute",t.style.left="-9999px",document.body.appendChild(t);var n=document.getSelection().rangeCount>0&&document.getSelection().getRangeAt(0);t.select(),document.execCommand("copy"),document.body.removeChild(t),n&&(document.getSelection().removeAllRanges(),document.getSelection().addRange(n))}(e),le.a.open({message:"Export",description:"Saved to IPFS: ".concat(e,", also copied the cid to clipboard")})})):"email"===a?function(e,t,n,a){var r,i=e.EMAILJS_USER_ID,o=e.EMAILJS_SERVICE_ID,c=e.EMAILJS_TEMPLATE_ID;window.email.init(i),window.emailjs.send(o,c,{content:(r=n,he.encode(r))})}(se,0,e).then((function(e){le.a.open({message:"Export",description:"Exported to ".concat(i)})})).catch((function(e){var t,n;le.a.open({message:"Export",description:"".concat(JSON.stringify((null===(t=e.err)||void 0===t?void 0:t.message)||(null===(n=e.err)||void 0===n?void 0:n.stack)||"Failed to send email"))})})):"gdrive"===a&&function(e){return Je.apply(this,arguments)}(se).then((function(t){return function(e,t){return ze.apply(this,arguments)}("awesome",e)}))}))})).catch((function(e){}))}},{key:"syncGithub",value:function(e,t){var n,a,r=this,i={added:[],deleted:[],updated:[]};this.bulkLoadWorkspaceData().then((function(e){return n=e})).then((function(a){return function(e,t,n){return Ga.apply(this,arguments)}(n,e,t)})).then((function(e){a=e,n.forEach((function(e){var t=e.id,n=e.sync;"added"===n?i.added.push(t):"updated"===n&&i.updated.push(t)}))})).then((function(e){return r.bulkSaveWorkspaceData([].concat(Object(Te.a)(i.updated),Object(Te.a)(i.added)))})).then((function(t){var n=a,i=n.localAdded,o=n.localDeleted,c=n.localUpdated,s=n.remoteAdded,u=n.remoteDeleted,l=n.remoteUpdated;le.a.open({message:"Sync",description:Object(Ht.jsxs)(Ht.Fragment,{children:[Object(Ht.jsx)("div",{children:"Synced ".concat(e)}),Object(Ht.jsx)("div",{children:"local: added ".concat(i,", deleted ").concat(o,", updated ").concat(c)}),Object(Ht.jsx)("div",{children:"remote: created ".concat(s,", deleted ").concat(u,", updated ").concat(l)})]})}),r.invalidateUI()})).catch((function(e){le.a.open({message:"Sync",description:Object(Ht.jsx)("div",{children:"Please try it later, caught an error ".concat(e)})})}))}},{key:"onSync",value:function(){var e=this;(function(e){return Tn.apply(this,arguments)})({githubrepo:oe("githubrepo"),githubtoken:oe("githubtoken")}).then((function(t){var n=t.type,a=t.url,r=t.token;"github"===n&&a&&r&&(!function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=0,n=Object.entries(e);t<n.length;t++){var a=Object(k.a)(n[t],2);ce(a[0],a[1])}}({githubrepo:a,githubtoken:r}),e.syncGithub(a,r))})).catch((function(e){}))}},{key:"onEvent",value:function(e,t){var n=this.getWorkspace();switch(C("".concat(n.getName(),": ").concat(e)),(e.endsWith("#cancelled")||e.endsWith("#OK"))&&this.onCloseDrawer(),e){case"dlg#confirm":case"dlg#getText":case"dlg#getWorkspace":case"dlg#import":case"dlg#export":case"dlg#sync":case"dlg#editItem":case"dlg#addTags":case"dlg#deleteTags":this.setState({mode:e,evtObj:t});break;case"cmd#drop-file":this.onDropFile(e.arg);break;case"cmd#import":this.onImport();break;case"cmd#export":this.onExport();break;case"cmd#sync":this.onSync();break;case"cmd#add-workspace":this.onAddWorkspace();break;case"cmd#confirm-and-edit-workspace":this.onRenameWorkspace();break;case"cmd#confirm-and-delete-workspace":this.onConfirmAndDeleteWorkspace(n.getId());break;case"workspace#remove":this.removeWorkspace(n.getId());break;case"workspace#changed":n.load();break;case"workspace#added":case"workspace#updated":case"workspace#deleted":default:break;case"cmd#confirm-and-delete-items":this.onConfirmAndDeleteItems();break;case"item#added":case"item#updated":case"item#deleted":case"item#updated-hashtag":case"item#updated-tag":case"item#updated-prop":n.save(),this.invalidateUI();break;case"cmd#toggle-pref":$n.toggle(t),this.invalidateUI()}switch(e){case"workspaces#loaded":n.load();break;case"workspace#added":case"workspace#updated":case"workspace#deleted":case"workspace#loaded":case"workspace#changed":this.invalidateUI()}}},{key:"renderDrawers",value:function(){var e=this.state,t=e.mode,n=e.evtObj;switch(t){case"dlg#confirm":return Object(Ht.jsx)(za,{context:n});case"dlg#getText":return Object(Ht.jsx)(Ja,{context:n});case"dlg#getWorkspace":return Object(Ht.jsx)(Ya,{});case"dlg#import":return Object(Ht.jsx)(Ha,{title:"Import",okButtonProps:{style:{display:"none"}},children:Object(Ht.jsx)(Wr,{})});case"dlg#export":return Object(Ht.jsx)(Ha,{title:"Export",okText:"Export",children:Object(Ht.jsx)(Nr,{})});case"dlg#sync":return Object(Ht.jsx)(Ha,{title:"Sync",okButtonProps:{style:{display:"none"}},children:Object(Ht.jsx)(Mr,Object(ue.a)({},n))});case"dlg#editItem":return Object(Ht.jsx)(Ha,{title:null===n||void 0===n?void 0:n.title,children:Object(Ht.jsx)(ar,Object(ue.a)({},n))});case"dlg#addTags":return Object(Ht.jsx)(Ha,{title:"Add Tags",children:Object(Ht.jsx)($a,{})});case"dlg#deleteTags":return Object(Ht.jsx)(Ha,{title:"Remove Tags",children:Object(Ht.jsx)(er,{tags:n})})}return""}},{key:"renderFAB",value:function(){return Object(Ht.jsx)(ma,{placement:"topRight",eventHandler:function(e,t){"item-template#selected"===e&&be("cmd#add-item",null===t||void 0===t?void 0:t.name)},children:Object(Ht.jsx)(Pe.a,{type:"primary",shape:"circle",size:"large",style:{position:"fixed",bottom:"48px",right:"16px",outline:"none",border:"none",background:"greenyellow",color:"black"},children:Object(Ht.jsx)(Re.a,{style:{position:"relative",top:"-4px"}})})})}},{key:"renderTabs",value:function(e){var t=this.getAllWorkspaces(),n=this.getWorkspace();return Object(Ht.jsx)(We.a,{activeKey:n.getId(),type:e,onChange:this.onChangeWorkspace,onEdit:this.onEditWorkspace,onTabClick:this.onClickWorkspace,style:{margin:"4px 8px -16px 8px"},children:t.map((function(e,t){return Object(Ht.jsx)(We.a.TabPane,{tab:Object(Ht.jsxs)("span",{style:{display:"flex",alignItems:"baseline"},children:[Object(Ht.jsx)(Ne.a,{}),Xe(e.getName(),35)]}),closable:!0},e.getId())}))})}},{key:"render",value:function(){var e=this;return this.getAllWorkspaces().length?"Loading..."===this.name?Object(Ht.jsx)("div",{className:"no-select",children:this.renderTabs()}):Object(Ht.jsx)(De.FileDrop,{onFrameDrop:function(t){var n,a=null===(n=t.dataTransfer)||void 0===n?void 0:n.files;null!==a&&void 0!==a&&a.length&&e.onDropFile(a[0])},onDrop:function(t,n){t.length&&(e.onDropFile(t[0]),n.stopPropagation(),n.preventDefault())},children:Object(Ht.jsxs)("div",{className:"no-select",children:[this.renderTabs("editable-card"),Object(Ht.jsx)(ra,Object(ue.a)({workspace:this.getWorkspace()},this.props)),this.renderDrawers(),this.renderFAB()]})}):Object(Ht.jsx)(Le.a,{spin:!0,style:{margin:"16px"}})}}]),a}(r.a.Component),Gr=Br,Fr=Gr,qr=[{path:"/",component:Gr}];function Kr(e){var t,n,a=e,r=Object(O.a)(qr);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i.path===e){t=i.component;break}e.startsWith(i.path)&&a.length<i.path&&(a=i.path,t=i.component)}}catch(o){r.e(o)}finally{r.f()}return t||Fr}var Hr=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){var e=Kr(this.props.route);return Object(Ht.jsx)(e,Object(ue.a)(Object(ue.a)({},this.props),{},{referred:Fr===Gr}))}}]),n}(r.a.Component),Vr=Hr,zr=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(e){var a;return Object(s.a)(this,n),a=t.call(this,e),I("app: starting..."),a.state={},a.backButtonPressedTime=new Date,a.finishApp=!1,window.addEventListener("beforeunload",a.onBeforeUnload.bind(Object(l.a)(a))),ge("app",a.onEvent.bind(Object(l.a)(a))),a}return Object(u.a)(n,[{key:"componentDidMount",value:function(){this.onDeserialize(),function(){var e,t;return!(null===(e=window.Android)||void 0===e||!e.eventHandler)||!(null===(t=window.webkit)||void 0===t||!t.messageHandlers)}()||_e(se)}},{key:"componentWillUnmount",value:function(){me("app")}},{key:"onSerialize",value:function(){I("app: serialized")}},{key:"onDeserialize",value:function(){I("app: deserialized")}},{key:"onBeforeUnload",value:function(){this.onSerialize()}},{key:"onEvent",value:function(e,t){if(C("app: ".concat(e)),e.startsWith("route:")){var n=e.substr(6);return window.history.replaceState&&window.history.replaceState("",window.location.title,n),void this.setState({route:n})}switch(e){case"notify@refresh":case"notify@nav-back":case"resp@get-pref":this.forceUpdate();break;case"resp@get-env":t&&(se.DEVICE_TYPE=3,this.forceUpdate());break;case"notify@state":if(!t)break;if(t.network&&(we("connected"===t.network),this.forceUpdate()),"loaded"===t.web&&(se.DEVICE_TYPE=3,ie([t]),je("req@get-env"),je("req@get-pref"),_e()),"pressed"===t.backButton){if(3===ae.OS_TYPE){var a=new Date;if(a.getTime()-this.backButtonPressedTime.getTime()<2e3&&this.finishApp){je("req@kill-app");break}this.finishApp=!0,je("req@toast",{msg:Ie("Please tap BACK again to exit")}),this.backButtonPressedTime=a}be("notify@nav-back")}}}},{key:"render",value:function(){return Object(Ht.jsx)(Vr,{route:this.state.route||window.location.pathname,location:window.location})}}]),n}(r.a.Component);o.a.render(Object(Ht.jsx)(c.a,{children:Object(Ht.jsx)(zr,{})}),document.getElementById("root"))},73:function(e,t,n){}},[[569,1,2]]]);
//# sourceMappingURL=main.76abe253.chunk.js.map