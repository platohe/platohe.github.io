(this.webpackJsonpawesomeidea=this.webpackJsonpawesomeidea||[]).push([[3],{125:function(e,t,n){"use strict";function a(e){return/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(e).toLowerCase())}function r(e){return/^[(]{0,1}[0-9]{3}[)]{0,1}[-\s\.]{0,1}[0-9]{3}[-\s\.]{0,1}[0-9]{4}$/.test(e)}function i(e){return/((([A-Za-z]{3,9}:(?:\/\/)?)(?:[-;:&=+$,\w]+@)?[A-Za-z0-9.-]+|(?:www\.|[-;:&=+$,\w]+@)[A-Za-z0-9.-]+)((?:\/[+~%/.\w\-_]*)?\??(?:[-+=&;%@.\w_]*)#?(?:[.!/\\\w]*))?)/.test(e)}n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return r})),n.d(t,"c",(function(){return i}))},13:function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"d",(function(){return c})),n.d(t,"c",(function(){return o}));var a=n(9),r=[];function i(e,t){Object(a.a)("observer: added ".concat(e)),r.unshift({name:e,notify:t})}function c(e){var t=r.findIndex((function(t){return t.name===e}));t>-1&&(Object(a.a)("observer: removed ".concat(e)),r.splice(t,1))}function o(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;setTimeout((function(){for(var n=0;n<r.length&&!r[n].notify(e,t);n++);}),n)}t.b={addObserver:i,removeObserver:c,postEvent:o}},134:function(e,t,n){"use strict";n.d(t,"c",(function(){return v})),n.d(t,"b",(function(){return b}));var a=n(11),r=n(24),i=n(25),c=n(41),o=n(40),s=n(2),u=n(0),l=(n(65),n(165)),d=n(306),h=n(199),p=(n(69),n(156)),f=[{name:"",icon:"appstore",description:"uniconized",default:!0},{name:"bug",icon:"bug",description:"bug, issue, problem, trouble"},{name:"todo",icon:"ordered-list",description:"todo list"},{name:"idea",icon:"bulb",description:"idea, innovation"},{name:"alert",icon:"alert",description:"hack, warning, alert"},{name:"schedule",icon:"schedule",description:"schedule, plan, vacation"},{name:"log",icon:"history",description:"journal, diary, log, backlog"},{name:"life",icon:"coffee",description:"life style, leisure"},{name:"wishlist",icon:"shopping-cart",description:"wish list"},{name:"trophy",icon:"trophy",description:"trophy, award, prize"},{name:"id",icon:"idcard",description:"contact, id card"},{name:"favorite",icon:"like",description:"favorite"},{name:"link",icon:"link",description:"link, web page, shortcut"},{name:"read",icon:"read",description:"read, article, book"}],m=Object(p.a)(f);function v(){return m}function b(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e&&m.has(e)?m.get(e):f[0]}var g=function(e){Object(c.a)(n,e);var t=Object(o.a)(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"getMenuItem",value:function(e){var t=this,n=e.name,a=e.icon,r=e.description;return Object(s.jsxs)(l.a.Item,{style:{display:"flex",alignItems:"baseline"},onClick:function(e){var a,r;null===(a=(r=t.props).eventHandler)||void 0===a||a.call(r,"icon#changed",{name:n})},children:[Object(s.jsx)(h.a,{type:a,className:"icon"}),Object(s.jsx)("span",{style:{marginLeft:"8px"},children:r})]},"menu#".concat(n))}},{key:"getDropdownMenu",value:function(){var e=this;return Object(s.jsx)(l.a,{children:f.map((function(t){return e.getMenuItem(t)}))})}},{key:"render",value:function(){var e=b(this.props.category)||f[0],t=this.props.mode,n={};return"detail"===t&&(n={display:"flex",alignItems:"baseline",width:"100%"}),this.props.style&&(n=Object(a.a)(Object(a.a)({},n),this.props.style)),Object(s.jsx)(d.a,{overlay:this.getDropdownMenu(),placement:"bottomRight",trigger:["click"],children:Object(s.jsxs)("span",{style:n,className:"clickable",children:[Object(s.jsx)(h.a,{type:e.icon,className:"icon"}),"detail"===t&&Object(s.jsx)("span",{style:{marginLeft:"8px"},children:e.description})]})})}}]),n}(u.Component);t.a=g},14:function(e,t,n){"use strict";n.d(t,"f",(function(){return h})),n.d(t,"b",(function(){return p})),n.d(t,"g",(function(){return f})),n.d(t,"h",(function(){return m})),n.d(t,"c",(function(){return v})),n.d(t,"e",(function(){return b})),n.d(t,"d",(function(){return g}));var a=n(7),r=n.n(a),i=n(12),c=n(87),o=n(77),s={},u=n(68),l="pref#",d={APP_BUILD:"1.0.201221",USER:"",LANGUAGE:"en",BIOMETRICS_TYPE:o.a,BIOMETRICS_ENABLED:!1,BIOMETRICS_ENROLLED:!1,OS_TYPE:o.f,DEVICE_TYPE:o.b,PROXY_SERVER:"",GA_TRACKING_CODE:Object({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_EMAILJS_ACCESS_TOKEN:"767696e1c9e5f17c6176f5afd97619cb",REACT_APP_EMAILJS_SERVICE_ID:"awesome",REACT_APP_EMAILJS_TEMPLATE_ID:"template_zwftzps",REACT_APP_EMAILJS_USER_ID:"user_uplKuSONfJpHb5r2AnXOw",REACT_APP_GITHUB_TOKEN:"d6bd776907b463300c84c2f91c313ccbe226c8ff",REACT_APP_GOOGLE_API_KEY:"AIzaSyC3CQs9LPdJN7GX4RRZ9toHytgMtRBfDdI",REACT_APP_GOOGLE_CLIENT_ID:"586821861057-7b66mi1pr3cr7rf14c4livnvhbsnu2b9.apps.googleusercontent.com",REACT_APP_GOOGLE_CLIENT_SECRET:"_o26TCpjPOCBFXWd4FBj2EWL",REACT_APP_SENDGRID_API_KEY:"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",REACT_APP_SENDGRID_FROM:"plato.he.2000@gmail.com"}).REACT_APP_GA_TRACKING_CODE,GA_LANDING_PAGE_TRIGGERED:!1,QUICK_SEARCH_DEBOUNCE_MILLISECONDS:150,FULL_SEARCH_DEBOUNCE_MILLISECONDS:600,QUICK_SEARCH_COUNT:25,TASK_DEBOUNCE_WAIT_MILLISECONDS:100,AVATAR_CACHE_FETCHING_TIME:12e3,AVATAR_CACHE_EXPIRATION_SECONDS:86400,AVATAR_CACHE_MAX_ITEMS:500,EMAILJS_USER_ID:"user_uplKuSONfJpHb5r2AnXOw",EMAILJS_ACCESS_TOKEN:"767696e1c9e5f17c6176f5afd97619cb",EMAILJS_SERVICE_ID:"awesome",EMAILJS_TEMPLATE_ID:"template_zwftzps",SENDGRID_FROM:"plato.he.2000@gmail.com",SENDGRID_API_KEY:"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",GOOGLE_API_KEY:"AIzaSyC3CQs9LPdJN7GX4RRZ9toHytgMtRBfDdI",GOOGLE_CLIENT_ID:"586821861057-7b66mi1pr3cr7rf14c4livnvhbsnu2b9.apps.googleusercontent.com",GOOGLE_CLIENT_SECRET:"_o26TCpjPOCBFXWd4FBj2EWL"};function h(e){if(Array.isArray(e))e.forEach((function(e){return h(e)}));else for(var t=Object.keys(d),n=0,a=Object.entries(e);n<a.length;n++){var r=Object(c.a)(a[n],2),i=r[0],o=r[1];t.includes(i)&&(d[i]="BIOMETRICS_ENABLED"===i||"BIOMETRICS_ENROLLED"===i?"true"===o:o)}}function p(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=d[e];return void 0!==n?n:t}function f(e,t){d[e]=t,Object(u.d)("".concat(l).concat(e),t)}function m(e){for(var t=0,n=Object.entries(e);t<n.length;t++){var a=Object(c.a)(n[t],2);f(a[0],a[1])}}function v(){return d.OS_TYPE===o.e}function b(){return d.OS_TYPE===o.g}function g(){return!(!window.Android||!window.Android.eventHandler)||!(!window.webkit||!window.webkit.messageHandlers)}function j(){return(j=Object(i.a)(r.a.mark((function e(){var t,n,a,i;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(u.b)(l);case 2:return t=e.sent,e.next=5,Promise.all(t.map((function(e){return Object(u.a)(e)})));case 5:for(n=e.sent,a=0;a<t.length;a++)i=t[a].substr(l.length),d[i]=n[a];case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}h([s,window._env_||{}]),function(){j.apply(this,arguments)}();t.a=d},156:function(e,t,n){"use strict";function a(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:256,n=new Map,a=t;return e.forEach((function(e){e.default?e.hash=0:(e.hash=a,a<<=1),n.set(e.name,e)})),n}n.d(t,"a",(function(){return a}))},16:function(e,t,n){"use strict";n.d(t,"f",(function(){return r})),n.d(t,"g",(function(){return i})),n.d(t,"a",(function(){return c})),n.d(t,"e",(function(){return o})),n.d(t,"d",(function(){return s})),n.d(t,"c",(function(){return u})),n.d(t,"b",(function(){return l})),n.d(t,"i",(function(){return d})),n.d(t,"h",(function(){return h})),n.d(t,"j",(function(){return p})),n.d(t,"k",(function(){return f}));var a=n(54),r=1,i=2,c=128,o=64,s=32,u=16,l=1;function d(e){switch(e){case"#all":return c;case"#notag":return o;case"#noicon":return s;case"#nocolor":return u;case"#deleted":return 2;case"#pinned":return l;default:return 0}}function h(e){var t=0;return e.forEach((function(e){return t|=d(e)})),t}function p(e){var t=[];return Object(a.b)(e,l)&&t.push("#pinned"),t}function f(e,t){return Object(a.b)(e,t)?function(e,t){return Object(a.a)(e||0,t)}(e,t):function(e,t){return Object(a.c)(e||0,t)}(e,t)}},214:function(e,t,n){},23:function(e,t,n){"use strict";n.d(t,"f",(function(){return k})),n.d(t,"g",(function(){return y})),n.d(t,"d",(function(){return x})),n.d(t,"a",(function(){return w})),n.d(t,"c",(function(){return I})),n.d(t,"b",(function(){return E}));var a=n(7),r=n.n(a),i=n(12),c=n(11),o=n(24),s=n(25),u=n(28),l=n(87),d=n(2),h=n(0),p=n.n(h),f=(n(65),n(13)),m=n(70),v=n(16),b=(n(69),n(95)),g=p.a.lazy((function(){return Promise.all([n.e(1),n.e(2)]).then(n.bind(null,520))})),j=p.a.lazy((function(){return n.e(17).then(n.bind(null,521))})),O=p.a.lazy((function(){return n.e(18).then(n.bind(null,522))}));function k(){return Object(m.a)()}function y(e){return e.id}function x(e){for(var t={},n=0,a=Object.entries(e);n<a.length;n++){var r=Object(l.a)(a[n],2),i=r[0],c=r[1];Array.isArray(c)?t[i]=Object(u.a)(c):t[i]=c}return t}var w=1,I=2,E=4,S=function(){function e(t){Object(o.a)(this,e),this.name=t||"idea",this.features=0}return Object(s.a)(e,[{key:"categoryEnabled",value:function(){return 0!==(this.features&w)}},{key:"themeEnabled",value:function(){return 0!==(this.features&I)}},{key:"getProp",value:function(e,t){if("@search"===t){var n;if(!e._tags)e._tags=(null===(n=e.tags)||void 0===n?void 0:n.join(","))||"";return[e.title,e._tags]}return"@description"===t?e.title:e[t]}},{key:"hasher",value:function(e){if(e===v.g&&this.themeEnabled())return Object(b.getThemeMap)()}},{key:"creator",value:function(){return{id:Object(m.a)(),category:this.categoryEnabled()?"":void 0,theme:this.themeEnabled()?"":void 0}}},{key:"drawer",value:function(e,t){switch(e){case"import":return Object(d.jsx)(h.Suspense,{fallback:Object(d.jsx)("div",{children:"Loading..."}),children:Object(d.jsx)(g,{})});case"export":return Object(d.jsx)(h.Suspense,{fallback:Object(d.jsx)("div",{children:"Loading..."}),children:Object(d.jsx)(j,{})});case"sync":return Object(d.jsx)(h.Suspense,{fallback:Object(d.jsx)("div",{children:"Loading..."}),children:Object(d.jsx)(O,Object(c.a)({},t))});default:return""}}},{key:"render",value:function(e,t,n){throw new Error(":render unimplemented")}},{key:"editor",value:function(e){throw new Error(":editor unimplemented")}},{key:"actioner",value:function(e){return this.themeEnabled()?Object(d.jsx)(b.default,{style:{margin:"0 12px"},mode:"simple",theme:e.theme,eventHandler:function(t,n){f.b.postEvent("item#cmd:action",{action:"change-prop",ids:[e.id],propName:"theme",propValue:n.name})}}):""}},{key:"importText",value:function(){var e=Object(i.a)(r.a.mark((function e(t,n){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error(":importText unimplemented");case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"exportText",value:function(){var e=Object(i.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error(":exportText unimplemented");case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),e}();t.e=S},318:function(e,t,n){},402:function(e,t){},404:function(e,t){},414:function(e,t){},416:function(e,t){},442:function(e,t){},444:function(e,t){},445:function(e,t){},450:function(e,t){},452:function(e,t){},471:function(e,t){},483:function(e,t){},486:function(e,t){},512:function(e,t,n){},519:function(e,t,n){"use strict";n.r(t);var a=n(2),r=n(0),i=n.n(r),c=n(37),o=n.n(c),s=n(301);n(317),n(318),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var u=n(24),l=n(25),d=n(44),h=n(41),p=n(40),f=(n(214),n(77)),m=n(14),v=n(83),b={"state#network":!0};var g=n(13),j=n(139),O=n.n(j),k=n(118),y=n(9),x=new Map,w=function(e,t){var n,a=t.req;if(a){var r=a.seed;if(x.has(r)){var i=x.get(r);x.delete(r),null===(n=i.resolve)||void 0===n||n.call(i,t)}else Object(y.a)('task: discarded orphan task "'.concat(r,'"'))}else Object(y.a)("task: invalid req ".concat(t))};O()((function(e){Object(v.a)(e.url,e)}),m.a.TASK_DEBOUNCE_WAIT_MILLISECONDS);Object(g.a)("task",(function(e,t){if("resp@fetch-url"===e){var n=t.req,a=t.resp,r=t.error;if(r)return w(0,{req:n,resp:a,error:r});if(function(e){return!!e.startsWith("data:application/octet-tream;base64,")||!!e.startsWith("data:image/")}(a))return w(0,{req:n,resp:{blob:a}});var i=n.contentType;if("blob"===i)return w(0,{req:n,resp:{blob:"data:application/octet-stream;base64,"+a}});var c=a;if(a.startsWith("data:")){var o=a.indexOf("base64,");-1!==o&&(c=a.substring(o+7))}return c=k.a.decode(c),w(0,"json)"===i?{req:n,resp:{json:JSON.parse(c)}}:{req:n,resp:{text:c}})}}));var I=n(11),E=n(113),S=n(28),C=n(119),D=n.n(C),A=(n(65),n(304)),_=n(526),T=n(109),W=n(524),N=n(286);var P,R,L=n(7),M=n.n(L),B=n(12),U="https://www.googleapis.com/auth/drive.file";function G(){var e;return P?null===(e=P)||void 0===e?void 0:e.signIn():Promise.reject()}function q(){var e,t,n=null===(e=P)||void 0===e||null===(t=e.currentUser)||void 0===t?void 0:t.get();if(null==(null===n||void 0===n?void 0:n.wc))R="";else if(null===n||void 0===n?void 0:n.hasGrantedScopes(U))return R=n.Ot.Cd,Object(y.a)("gapi: authorized ".concat(R)),!0;return!1}function H(){return(H=Object(B.a)(M.a.mark((function e(t,n){return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){var a="awesome_awesome",r="\r\n--"+a+"\r\n",i="text/plain",c={name:t,mimeType:i},o=r+"Content-Type: application/json; charset=UTF-8\r\n\r\n"+JSON.stringify(c)+r+"Content-Type: "+"text/plain\r\n\r\n"+n+"\r\n\r\n--awesome_awesome--";window.gapi.client.request({path:"https://www.googleapis.com/upload/drive/v3/files",method:"POST",params:{uploadType:"multipart"},headers:{"Content-Type":"multipart/related; boundary="+a},body:o}).execute((function(t){e(t)}))})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function z(){return(z=Object(B.a)(M.a.mark((function e(){return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!P||!R){e.next=2;break}return e.abrupt("return",Promise.resolve(P));case 2:if(!P){e.next=4;break}return e.abrupt("return",G().then((function(e){return q()?Promise.resolve(P):Promise.reject()})));case 4:return e.abrupt("return",new Promise((function(e,t){var n=document.createElement("script");n.onload=function(){window.gapi.load("client:auth2",(function(){window.gapi.client.init({apiKey:m.a.GOOGLE_API_KEY,clientId:m.a.GOOGLE_CLIENT_ID,scope:U,discoveryDocs:["https://www.googleapis.com/discovery/v1/apis/drive/v3/rest"]}).then((function(){return(P=window.gapi.auth2.getAuthInstance()).isSignedIn.listen(q),G()})).then((function(n){return q()?e(P):t()}))}))},n.src="https://apis.google.com/js/api.js",document.body.appendChild(n)})));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var K={};function J(e,t){return V.apply(this,arguments)}function V(){return(V=Object(B.a)(M.a.mark((function e(t,n){return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,a){K={name:t,resolve:e,reject:a},g.b.postEvent(t,n)})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function F(e){return Q.apply(this,arguments)}function Q(){return(Q=Object(B.a)(M.a.mark((function e(t){return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",J("dlg#getText",t));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Y(e){return Z.apply(this,arguments)}function Z(){return(Z=Object(B.a)(M.a.mark((function e(t){return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",J("dlg#confirm",t));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function X(){return(X=Object(B.a)(M.a.mark((function e(){return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",J("dlg#getWorkspace"));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function $(){return($=Object(B.a)(M.a.mark((function e(){return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",J("dlg#import"));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ee(){return(ee=Object(B.a)(M.a.mark((function e(){return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",J("dlg#export"));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function te(){return(te=Object(B.a)(M.a.mark((function e(t){return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",J("dlg#sync",t));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ne(){return(ne=Object(B.a)(M.a.mark((function e(t){return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",J("dlg#editItem",t));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ae(){return(ae=Object(B.a)(M.a.mark((function e(t){return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",J("dlg#editItem",t));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function re(){return(re=Object(B.a)(M.a.mark((function e(){return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",J("dlg#addTags"));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ie(){return(ie=Object(B.a)(M.a.mark((function e(t){return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",J("dlg#deleteTags",t));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}Object(g.a)("dlg",(function(e,t){var n;if(e.startsWith("dlg#")&&(e.endsWith("#OK")||e.endsWith("#cancelled"))&&e.startsWith(null===(n=K)||void 0===n?void 0:n.name)){var a=K,r=a.resolve,i=a.reject;K={},e.endsWith("#OK")?r(t):i(t)}}));var ce=n(68),oe=n(84),se=(window.console,{log:function(e,t){return Object(y.d)("".concat(e," ").concat(t||""))},info:function(e,t){return Object(y.d)("".concat(e," ").concat(t||""))},warn:function(e,t){return Object(y.e)("".concat(e," ").concat(t||""))},error:function(e,t){return Object(y.c)("".concat(e," ").concat(t||""))}});function ue(e){return!!m.a.GA_TRACKING_CODE&&((void 0===window.GA_INITIALIZED||e)&&((Object(m.c)()||Object(m.e)())&&(window.console=se),oe.a.initialize(m.a.GA_TRACKING_CODE,{debug:!0}),window.GA_INITIALIZED=!0,oe.a.ga("set","appName","LeoPages"),oe.a.ga("set","appVersion",m.a.APP_BUILD),oe.a.ga("set","checkProtocolTask",null),oe.a.ga("set","checkStorageTask",null),oe.a.ga("set","historyImportTask",null),Object(y.a)("ga: ".concat(e?"force":""," initialized with tracking code ").concat(m.a.GA_TRACKING_CODE))),!0)}function le(e){ue(e)&&!m.a.GA_LANDING_PAGE_TRIGGERED&&window.GA_INITIALIZED&&(Object(y.a)("ga: tracking code: ".concat(m.a.GA_TRACKING_CODE)),Object(y.a)("ga: initialized: ".concat(window.GA_INITIALIZED)),de("//Landing Page"),m.a.GA_LANDING_PAGE_TRIGGERED=!0)}function de(e){e&&(ue(!1)?(oe.a.set({page:e}),oe.a.pageview(e)):Object(y.a)("ga: ".concat(e)))}function he(){return(he=Object(B.a)(M.a.mark((function e(t){return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("object"===typeof t){e.next=2;break}return e.abrupt("return",Promise.reject("readTextFileObj: invalid arg"));case 2:return e.abrupt("return",new Promise((function(e){var n=new FileReader;n.readAsText(t),n.onload=function(){e(n.result)}})));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var pe=n(287),fe=n.n(pe);function me(e,t){if(e&&e.length>t){var n=(t-3)/2;return e.substr(0,n)+"..."+e.substr(e.length-n)}return e}function ve(e,t){return t?fe()(e,t):e}function be(){var e=Date.now()/1e3;return e=~~e}var ge=n(70),je=(n(69),n(135)),Oe=n(528),ke=n(199),ye=n(54),xe=n(16),we=n(87),Ie=function(e){var t=Object(r.useState)(e.expanded),n=Object(we.a)(t,2),i=n[0],c=n[1],o=e.icon,s=e.title,u=e.expandable;return Object(a.jsxs)("div",{style:Object(I.a)({},e.style||{}),children:[Object(a.jsxs)("div",{style:{display:"flex",alignItems:"baseline",padding:"4px 0",background:"DodgerBlue",color:"white",borderBottom:"1px solid lightgray"},onClick:function(){u&&c(!i)},children:[o&&Object(a.jsx)(ke.a,{type:o,style:{margin:"0 0 0 4px"}}),Object(a.jsx)("span",{style:{margin:"0 0 0 8px"},children:s||""}),Object(a.jsx)("span",{style:{flex:"auto"}}),u&&Object(a.jsx)(ke.a,{type:i?"caret-up":"caret-down",style:{margin:"0 8px 0 0"}})]}),i&&Object(I.a)({},e.children)]})},Ee=function(e){return Object(a.jsx)("div",{style:{height:"".concat(e.height)}})};function Se(e,t,n){var a,r,i,c,o="#"===n[0]?n:"#".concat(n),s=Object(xe.i)(o);if(s)s===xe.d?t.iconHash|=xe.d:s===xe.c?t.themeHash|=xe.c:t.systemHash|=s;else{var u="#"===n[0]?n.substr(1):n;(s=null===(a=e.hasher(xe.f))||void 0===a||null===(r=a.get(u))||void 0===r?void 0:r.hash)?t.iconHash|=s:t.themeHash|=null===(i=e.hasher(xe.g))||void 0===i||null===(c=i.get(u))||void 0===c?void 0:c.hash}}var Ce=function(e,t){for(var n=0;n<e.length;n++){var a=e[n];if(a&&a.includes(t))return!0}return!1};function De(e,t,n){var a=n.hash,r=n.category,i=n.theme,c=t.must,o=t.not,s=t.or,u=t.systemHash,l=t.iconHash,d=t.themeHash,h=n.tags,p=0;if(u&&(Object(ye.b)(u,xe.e)&&!h.length&&p++,Object(ye.b)(u,xe.b)&&Object(ye.b)(a,xe.b)&&p++,Object(ye.b)(u,xe.a)&&p++),l&&void 0!==r){var f,m=null===(f=e.hasher(xe.f).get(r))||void 0===f?void 0:f.hash;(0!==(l&m)||!m&&Object(ye.b)(l,xe.d))&&p++}if(d&&void 0!==i){var v,b=null===(v=e.hasher(xe.g).get(i))||void 0===v?void 0:v.hash;(0!==(d&b)||!b&&Object(ye.b)(d,xe.c))&&p++}var g=e.getProp(n,"@search");g&&(g=g.map((function(e){return e?e.toLowerCase():e}))),h=",".concat(h.join(","));for(var j=0;j<c.length;j++){var O=c[j];if(h.includes(",".concat(O)))p+=3;else{if(!g||!Ce(g,O))return 0;p++}}for(var k=0;k<o.length;k++){var y=o[k];if(h.includes(",".concat(y)))return 0;if(g&&Ce(g,y))return 0}for(var x=0;x<s.length;x++){var w=s[x];h.includes(",".concat(w))&&(p+=3),g&&Ce(g,w)&&p++}return p}function Ae(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:["+","-","#"];if(e===t)return!0;var a=e.length>t.length?e.substr(t.length).trim():t.substr(e.length).trim();return!(a.length&&!n.includes(a))||void 0}var _e=O()((function(e){g.b.postEvent("app#cmd:quick-search",e)}),m.a.QUICK_SEARCH_DEBOUNCE_MILLISECONDS),Te=O()((function(e){g.b.postEvent("app#cmd:search",e)}),m.a.FULL_SEARCH_DEBOUNCE_MILLISECONDS);function We(e,t){switch(t){case 0:_e(e);break;case 1:Te(e);break;case 2:g.b.postEvent("app#cmd:search",e)}}var Ne=n(527),Pe=n(289),Re=[{icon:"pushpin",tag:"#pinned",description:"#pinned"},{icon:"exclamation",tag:"#notag",description:"#notag"},{icon:"appstore",tag:"#noicon",description:"#noicon"},{icon:"bg-colors",tag:"#nocolor",description:"#nocolor"},{icon:"tags",tag:"#all",description:"#all"}];function Le(e,t){"popularity"===t?null===e||void 0===e||e.sort((function(e,t){return t.count-e.count})):"alphabetic"===t&&(null===e||void 0===e||e.sort((function(e,t){return e.value.localeCompare(t.value)})))}var Me=function(e){Object(h.a)(n,e);var t=Object(p.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"shouldComponentUpdate",value:function(e,t){var n,a,r,i;if(this.props.descriptor!==e.descriptor)return this.data=void 0,!0;var c=this.props.data,o=e.data;if(c.tags.length!==o.tags.length||c.noTagCount!==o.noTagCount||c.noIconCount!==o.noIconCount||c.noThemeCount!==o.noTagCount||(null===(n=c.icons)||void 0===n?void 0:n.length)!==(null===(a=o.icons)||void 0===a?void 0:a.length)||(null===(r=c.themes)||void 0===r?void 0:r.length)!==(null===(i=o.themes)||void 0===i?void 0:i.length))return this.data=void 0,!0;var s=this.options;if(!s)return this.data=void 0,!0;var u=e.options;return s.showCount!==u.showCount||s.showScale!==u.showScale||s.sortBy!==u.sortBy}},{key:"sort",value:function(){var e=this.props.options.sortBy,t=this.data,n=t.hashTags,a=t.iconTags,r=t.themeTags,i=t.tagTags;Le(n,e),Le(a,e),Le(r,e),Le(i,e),this.options=this.props.options}},{key:"generateCloudData",value:function(e,t){var n=t.tags,a=t.noTagCount,r=t.icons,i=t.noIconCount,c=t.themes,o=t.noThemeCount,s=[];a>0&&s.push({value:"#notag",count:a}),i>0&&s.push({value:"#noicon",count:i}),o>0&&s.push({value:"#nocolor",count:o});var u=[],l=e.hasher(xe.f);r.forEach((function(e){var t,n=e.name,a=e.count;n&&u.push({value:n,count:a,icon:null===(t=l.get(n))||void 0===t?void 0:t.icon,isHashTag:!0})}));var d=[];l=e.hasher(xe.g),c.forEach((function(e){var t=e.name,n=e.count;if(t){var a=l.get(t);d.push({value:t,count:n,background:null===a||void 0===a?void 0:a.bkColor,color:(null===a||void 0===a?void 0:a.foreColor)||"black",isHashTag:!0})}}));var h=n.map((function(e){return{value:e.name,count:e.count}}));return{hashTags:s,iconTags:u,themeTags:d,tagTags:h}}},{key:"renderClickableIcon",value:function(e,t,n,r){return Object(a.jsxs)("div",{className:"clickable-no-underline",style:{marginRight:"16px",display:"flex",alignItems:"baseline"},onClick:r,children:[Object(a.jsx)(ke.a,{type:t,className:"icon",style:{marginRight:"8px"}}),n]},e)}},{key:"renderHashTags",value:function(){var e=this;return Object(a.jsx)("div",{style:{display:"flex"},children:Re.map((function(t){return e.renderClickableIcon(t.tag,t.icon,t.description,(function(){return g.b.postEvent("item#cmd:hashtag-selected",t.tag)}))}))})}},{key:"renderClickableOption",value:function(e,t,n,r,i){var c=this;return Object(a.jsxs)("span",{className:"clickable",style:{margin:"0 16px 0 0",color:n,display:"flex",alignItems:"center"},onClick:function(){c.props.options[r]=i,c.sort(),c.forceUpdate()},children:[Object(a.jsx)(ke.a,{type:e,style:{marginRight:"4px"}}),t]})}},{key:"renderCheckableOption",value:function(e,t,n){var r=this;return Object(a.jsx)(Ne.a,{checked:n,style:{margin:"0 4px"},onClick:function(){r.props.options[t]=!n,r.options=r.props.options,r.forceUpdate()},children:e})}},{key:"renderToolbar",value:function(){var e=this.props.options,t=e.showCount,n=e.showScale,r=e.sortBy;return Object(a.jsxs)("div",{style:{display:"flex",paddingBottom:"4px",borderBottom:"1px solid lightgray"},children:[this.renderClickableOption("sort-ascending","alphabetic","alphabetic"===r?"green":void 0,"sortBy","alphabetic"),this.renderClickableOption("dot-chart","popularity","popularity"===r?"green":void 0,"sortBy","popularity"),Object(a.jsx)("span",{style:{flex:"auto"}}),this.renderCheckableOption("Count","showCount",t),this.renderCheckableOption("Scale","showScale",n)]})}},{key:"renderTag",value:function(e,t,n){var r=this.props,i=r.selectedTag,c=r.options,o=c.showCount,s=c.showScale,u=e.value,l=e.count,d=e.icon,h=u;-1!==h.indexOf(" ")&&(h='"'.concat(h,'"')),h=me(h,35).toLowerCase(),o&&(h="".concat(h,"(").concat(l,")"));var p={margin:"3px",padding:"3px",display:"inline-block"};u===i&&(n="green",p.textDecoration="underline"),p.background=e.background,p.color=e.color;var f=h;return d&&(f=Object(a.jsxs)("span",{style:{display:"flex",alignItems:"center"},children:[Object(a.jsx)(ke.a,{type:d,style:{marginRight:"4px"}}),h]})),s?Object(a.jsx)("span",{style:Object(I.a)({fontSize:"".concat(t/2,"em"),color:n},p),className:"clickable-no-underline",children:f},u):Object(a.jsx)("span",{style:Object(I.a)({fontSize:"1.2em",color:n},p),className:"clickable-no-underline",children:f},u)}},{key:"renderTagCloud",value:function(e){var t=this;return Object(a.jsx)(Pe.TagCloud,{minSize:3,maxSize:10,shuffle:!1,tags:e,disableRandomColor:!0,renderer:function(e,n,a){return t.renderTag(e,n,a)},onClick:function(e){return g.b.postEvent("item#cmd:tag-selected","".concat(e.isHashTag?"#":"").concat(e.value))}})}},{key:"render",value:function(){this.data||(this.data=this.generateCloudData(this.props.descriptor,this.props.data),this.sort());var e=this.data,t=e.hashTags,n=e.iconTags,r=e.themeTags,i=e.tagTags;return Object(a.jsxs)("div",{className:"item-tagcloud",children:[this.renderToolbar(),this.options.showHashtag&&Object(a.jsx)("div",{className:"item-tagcloud-toolbar",children:this.renderHashTags()}),this.renderTagCloud([].concat(Object(S.a)(t),Object(S.a)(n),Object(S.a)(r),Object(S.a)(i)))]})}}]),n}(r.Component),Be=n(67),Ue=n(292),Ge=n.n(Ue),qe=n(23);function He(e){return Object(a.jsx)("span",{onClick:function(t){e.evt&&(t.preventDefault(),t.stopPropagation(),e.evt.confirm?Y(e.evt.confirm).then((function(t){return g.b.postEvent("item#cmd:action",e.evt)})).catch((function(e){})):g.b.postEvent("item#cmd:action",e.evt))},className:"clickable icon",style:{margin:"0 12px"},children:e.title||e.icon})}function ze(e){var t=e.add_date,n=e.last_modified;if(t||n){var r=new Date;return r.setTime(Number(1e3*(n||t))),Object(a.jsx)("div",{children:"".concat(Ge()(r).fromNow())})}return""}function Ke(e,t){var n,r=Object(qe.g)(e),i=Ve(e),c=t.getProp(e,"@description")||e.title;return Object(a.jsxs)("div",{className:"item-actionbar",children:[ze(e),Object(a.jsx)("div",{style:{flex:"auto"}}),null===(n=t.actioner)||void 0===n?void 0:n.call(t,e),He({evt:{action:"toggle-pin",id:[r]},icon:Object(a.jsx)(ke.a,{className:"icon",type:"pushpin",theme:i?"filled":"outlined"})}),He({evt:{action:"delete",ids:[r],confirm:{title:"Delete",text:'Are you sure to delete "'.concat(c,'"')}},icon:Object(a.jsx)(ke.a,{type:"delete",className:"icon"})}),He({evt:{action:"edit",id:r},icon:Object(a.jsx)(ke.a,{type:"edit",className:"icon"})})]})}function Je(e,t){var n=e.tags,r=e.id||e.url;return Object(a.jsxs)("div",{className:"item-tags",children:[Object(a.jsx)(ke.a,{type:"tag",style:{marginRight:"8px"}}),Object(a.jsx)("div",{style:{flex:"auto",display:"flex",flexWrap:"wrap"},children:n.length>0&&n.map((function(e){return e=e.toLowerCase(),function(e,t,n){return Object(a.jsx)("span",{style:{color:n,padding:"0 4px"},className:"clickable-no-underline",onClick:function(e){e.preventDefault(),e.stopPropagation(),g.b.postEvent("item#cmd:tag-selected",t)},children:me(t,35)},"item#".concat(e,"#").concat(t))}(r,e,e===t?"green":"#1890ff")}))})]})}function Ve(e){return Object(ye.b)(e.hash||0,xe.b)}var Fe=new Set;function Qe(e){return Fe.has(Object(qe.g)(e))}function Ye(e){var t=Object(qe.g)(e);Fe.has(t)?Fe.delete(t):(Ze(),Fe.add(t))}function Ze(){Fe.clear()}var Xe=function(e){Object(h.a)(n,e);var t=Object(p.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"renderItemsSection",value:function(e,t,n,r,i){var c=this;return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(Ie,{title:r,icon:i,expandable:!0,expanded:!0,children:Object(a.jsx)("div",{children:t.map((function(t,a){return c.renderItem(e,t,n,function(e){return e%2?{background:"GhostWhite"}:{}}(a))}))})}),Object(a.jsx)(Ee,{height:"8px"})]})}},{key:"renderSwipeableItem",value:function(e,t,n){var r=this,i={display:"flex",overflowX:"scroll",overflowY:"hidden",margin:"4px 0px"},c=Qe(t)?"detail":"simple";return"detail"===c&&(i.borderBottom="1px solid rgba(80, 88, 95, 0.2)"),Object(a.jsxs)("div",{style:i,onClick:function(){Ye(t),r.forceUpdate()},children:[Object(a.jsx)("div",{style:{flex:"none",width:"100%"},children:e.render(t,c,n)}),Object(a.jsx)("div",{children:Ke(t,c)})]},Object(qe.g)(t))}},{key:"renderItem",value:function(e,t,n){var r=this,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},c=Qe(t)?"detail":"simple";return Object(a.jsxs)("div",{style:i,onClick:function(e){var n=e.target;n.href||"svg"===n.tagName||(Ye(t),r.forceUpdate())},children:["detail"===c&&Ke(t,e),e.render(t,c,n)]},Object(qe.g)(t))}},{key:"render",value:function(){var e=this.props,t=e.descriptor,n=e.items,r=e.selectedTag;if(!n.length)return"";var i=n.filter((function(e){return Ve(e)})),c=i.length?n.filter((function(e){return!Ve(e)})):n;if(r&&n.length>1){var o=c.filter((function(e){return e.tags.includes(r)})),s=c.filter((function(e){return!1===e.tags.includes(r)}));return Object(a.jsxs)("div",{children:[i.length>0&&this.renderItemsSection(t,i,r,"Pinned (".concat(i.length,")"),"pushpin"),o.length>0&&this.renderItemsSection(t,o,r,'Tag: "'.concat(me(r,35),'" (').concat(o.length,")"),"tag"),s.length>0&&this.renderItemsSection(t,s,r,"".concat(ve(i.length||o.length?"Others":"Results",s.length)," (").concat(s.length,")"),"search")]})}return Object(a.jsxs)("div",{children:[i.length>0&&this.renderItemsSection(t,i,r,"Pinned (".concat(i.length,")"),"pushpin"),c.length>0&&this.renderItemsSection(t,c,r,"".concat(ve(i.length?"Others":"Results",c.length)," (").concat(c.length,")"),"search")]})}}]),n}(r.Component),$e=n(165),et=n(306),tt=n(285),nt=function(e){Object(h.a)(n,e);var t=Object(p.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"getMenuItem",value:function(e,t,n){return Object(a.jsxs)($e.a.Item,{style:{display:"flex",alignItems:"baseline"},onClick:function(t){return g.b.postEvent(e)},children:[Object(a.jsx)(ke.a,{type:t,className:"icon"}),Object(a.jsx)("span",{children:n})]},"menu#".concat(e))}},{key:"getWorkspaceDropdownMenu",value:function(){var e=me(this.props.workspace.getName(),35);return Object(a.jsxs)($e.a,{children:[this.getMenuItem("cmd#add-workspace","plus","Add a workspace"),this.getMenuItem("cmd#confirm-and-edit-workspace","edit",'Rename "'.concat(e,'"')),this.getMenuItem("cmd#confirm-and-delete-workspace","close",'Remove "'.concat(e,'"')),Object(a.jsx)($e.a.Divider,{},"menu#separator"),this.getMenuItem("cmd#import","import","Import"),this.getMenuItem("cmd#export","export","Export"),this.getMenuItem("cmd#sync","cloud-sync","Sync")]})}},{key:"getItemsDropdownMenu",value:function(e){var t=e.items,n=e.metaData,r=n.tags,i=n.noTagCount,c=n.noIconCount,o=n.noThemeCount,s=[];return t.length&&(s.push(this.getMenuItem("cmd#bulk-add-tags","tag","Bulk add tags")),r.length&&s.push(this.getMenuItem("cmd#bulk-delete-tags","close","Bulk remove tags")),s.push(this.getMenuItem("cmd#confirm-and-delete-items","delete","Bulk delete items")),s.push(Object(a.jsx)($e.a.Divider,{},"menu#separator")),i>0&&s.push(this.getMenuItem("cmd#show-untagged-items","exclamation","Show #notag items")),c>0&&s.push(this.getMenuItem("cmd#show-uniconized-items","appstore","Show #noicon items")),o>0&&s.push(this.getMenuItem("cmd#show-uncolorized-items","bg-colors","Show #nocolor items"))),s.push(this.getMenuItem("cmd#add-item","plus","Add an item")),Object(a.jsx)($e.a,{children:s})}},{key:"renderDefaultActionBar",value:function(e){var t,n=e.items,r=e.total,i=e.isAllData,c=e.metaData.tags;if(0===r)t="Oops there is nothing yet";else{var o=i?r:n.length;t="Total ".concat(o," ").concat(ve(this.props.name,o)),c.length&&(t+=", ".concat(c.length," ").concat(ve("tag",c.length)))}return Object(a.jsxs)("div",{className:"item-result-header",children:[Object(a.jsx)("span",{children:t}),Object(a.jsx)("div",{style:{flex:"auto"}}),Object(a.jsx)(et.a,{overlay:this.getItemsDropdownMenu(e),placement:"bottomRight",trigger:["click"],children:Object(a.jsx)("div",{style:{display:"flex",alignItems:"baseline"},className:"clickable",children:Object(a.jsx)("span",{style:{margin:"0 8px"},children:"Actions"})})}),Object(a.jsx)(et.a,{overlay:this.getWorkspaceDropdownMenu(),placement:"bottomRight",trigger:["click"],children:Object(a.jsx)("span",{className:"clickable icon",style:{marginLeft:"4px"},children:Object(a.jsx)(tt.a,{})})})]})}},{key:"renderQuickSearchActionBar",value:function(e){return Object(a.jsxs)("div",{className:"item-result-header",children:[Object(a.jsx)("span",{children:'Searching "'.concat(me(e,35),'"')}),Object(a.jsx)(ke.a,{type:"loading",style:{marginLeft:"4px"}})]})}},{key:"renderResultText",value:function(e,t){return e=me(e,35),t.length?Object(a.jsx)("span",{children:"".concat(t.length," ").concat(ve("match",t.length),' "').concat(e,'"')}):Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsx)("span",{children:'Nothing matches "'.concat(e,'"')}),Object(a.jsx)(ke.a,{type:"meh",style:{marginLeft:"4px"}})]})}},{key:"renderFullSearchActionBar",value:function(e,t){var n=t.items;return Object(a.jsxs)("div",{className:"item-result-header",children:[this.renderResultText(e,n),Object(a.jsx)("div",{style:{flex:"auto"}}),Object(a.jsx)(et.a,{overlay:this.getItemsDropdownMenu(t),placement:"bottomRight",trigger:["click"],children:Object(a.jsx)("div",{style:{display:"flex",alignItems:"baseline"},className:"clickable",children:Object(a.jsx)("span",{style:{margin:"0 8px"},children:"Actions"})})}),Object(a.jsx)(et.a,{overlay:this.getWorkspaceDropdownMenu(),placement:"bottomRight",trigger:["click"],children:Object(a.jsx)("span",{className:"clickable icon",style:{marginLeft:"4px"},children:Object(a.jsx)(tt.a,{})})})]})}},{key:"render",value:function(){var e=this.props,t=e.query,n=e.isSearchCompleted,a=e.visibleData;return t&&!n?this.renderQuickSearchActionBar(t):t?this.renderFullSearchActionBar(t,a):this.renderDefaultActionBar(a)}}]),n}(r.Component),at="workspace",rt=function(e){Object(h.a)(n,e);var t=Object(p.a)(n);function n(e){var a;return Object(u.a)(this,n),a=t.call(this,e),Object(y.b)("".concat(at,": created")),a.state={dummy:!0},a.lastRequstedQuery="",a.lastCompletedQuery="",a.workspace=e.workspace,a.onEvent=a.onEvent.bind(Object(d.a)(a)),a.onScroll=a.onScroll.bind(Object(d.a)(a)),a.onRequestSearch=a.onRequestSearch.bind(Object(d.a)(a)),a.onCompleteSearch=a.onCompleteSearch.bind(Object(d.a)(a)),a.onGroupSearchResult=a.onGroupSearchResult.bind(Object(d.a)(a)),Object(g.a)(at,a.onEvent.bind(Object(d.a)(a))),de("//".concat(at," Page")),a}return Object(l.a)(n,[{key:"componentWillUnmount",value:function(){Object(g.d)(at)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.lastRequstedQuery="",this.lastCompletedQuery=""}},{key:"getWorkspace",value:function(){return this.props.workspace}},{key:"getWorkspaceState",value:function(){return this.getWorkspace().getWorkingState()}},{key:"setWorkspaceState",value:function(e){this.getWorkspace().setWorkingState(e),this.setState({dummy:this.state.dummy})}},{key:"getDescriptor",value:function(){return this.getWorkspace().descriptor}},{key:"getDataSource",value:function(){return this.getWorkspace().dataSource}},{key:"onEvent",value:function(e,t){var n;switch(e){case"item#cmd:tag-selected":case"item#cmd:hashtag-selected":var a=t;this.getWorkspace().getVisibleData().isAllData?this.onRequestSearch(a,!1):(this.setWorkspaceState({selectedTag:a}),this.onGroupSearchResult(a)),this.forceUpdate();break;case"cmd#show-all-items":this.onRequestSearch("#all",!1);break;case"cmd#show-untagged-items":this.onRequestSearch("#notag",!1);break;case"cmd#show-uniconized-items":this.onRequestSearch("#noicon",!1);break;case"cmd#show-uncolorized-items":this.onRequestSearch("#nocolor",!1);break;case"item#menu#pinned":this.onRequestSearch("#pinned",!1);break;case"app#cmd:search":this.onCompleteSearch(t,!1);break;case"app#cmd:quick-search":this.onCompleteSearch(t,!0);break;case"item#updated-hashtag":var r,i=this.getDataSource();i.pinnedItems=null===(r=i.items)||void 0===r?void 0:r.filter((function(e){return Object(ye.b)(e.hash,xe.b)})),this.forceUpdate();break;default:null===(n=this.getWorkspace())||void 0===n||n.onEvent(e,t)}}},{key:"onScroll",value:function(){var e;null===(e=document.activeElement)||void 0===e||e.blur()}},{key:"onRequestSearch",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this.lastRequstedQuery;if(!n){var a=this.getDataSource();a.searchedItems=void 0,a.searchedTags=void 0}this.lastRequstedQuery=e.trim(),this.setWorkspaceState({query:e,isSearchCompleted:!1}),Ae(n,this.lastRequstedQuery)?Object(y.a)("items: discarded an already requested search ".concat(e)):(t?(We(e,0),We(e,1)):We(e,2),Object(y.a)("".concat(this.getWorkspace().name,': searching "').concat(e,'"')))}},{key:"onCompleteSearch",value:function(e,t){if(Ae(this.lastCompletedQuery,e))return Object(y.a)("items: discarded an already completed search ".concat(e)),void this.setWorkspaceState({query:e});var n=this.getDataSource(),a=function(e,t){var n,a=[],r=[],i=[],c={systemHash:0,iconHash:0,themeHash:0};return t.toLowerCase().split(" ").forEach((function(t){if((t=t.trim()).length)switch(t[0]){case"+":1===t.length?n="+":a.push(t.substr(1));break;case"-":1===t.length?n="-":r.push(t.substr(1));break;case"#":1===t.length?n="#":(n=void 0,Se(e,c,t));break;default:t.length>=1&&("+"===n?a.push(t):"-"===n?r.push(t):"#"===n?Se(e,c,t):i.push(t)),n=void 0}})),Object(ye.b)(c.systemHash,xe.a)&&(i.length=0,c.systemHash&=~(xe.e|xe.b)),Object(I.a)({must:a,not:r,or:i},c)}(this.getDescriptor(),e),r=a.must,i=a.not,c=a.or,o=a.hash;if(Object(ye.b)(o,xe.a)&&!r.length&&!i.length&&!c.length)return n.searchedItems=void 0,n.searchedTags=void 0,this.lastCompletedQuery=e,this.setWorkspaceState({query:e,selectedTag:"",isSearchCompleted:!0}),void Ze();if(!t){var s=n.searchedItems;if(e===this.lastCompletedQuery&&s&&s.length<m.a.QUICK_SEARCH_COUNT)return Object(y.a)('item: skipped a full search, "'.concat(e,'"')),void this.setWorkspaceState({query:e,selectedTag:"",isSearchCompleted:!0})}for(var u=[],l=n.items,d=this.getDescriptor(),h=0;h<l.length;h++){var p=De(d,a,l[h]);if(p>0&&(u.push({index:h,score:p}),t>0&&u.length>=m.a.QUICK_SEARCH_COUNT))break}var f=[];u.forEach((function(e){var t=l[e.index];t.score=e.score,f.push(t)})),function(e,t){t.sort((function(e,t){if(e.score===t.score){var n=Ve(e),a=Ve(t);if(n&&!a)return-1;if(!n&&a)return 1}return e.score===t.score?Number(t.add_date||0)-Number(e.add_date||0):t.score-e.score}))}(0,f),n.searchedItems=f,this.getDataSource().syncMetaData("searched"),this.lastCompletedQuery=e,this.setWorkspaceState({query:e,selectedTag:"",isSearchCompleted:!0,visibleData:void 0}),Ze(),Object(y.a)("".concat(this.getWorkspace().name,": ").concat(f.length," ").concat(ve("match",f.length),' "').concat(e,'"'))}},{key:"onGroupSearchResult",value:function(e){var t=this.getDataSource(),n=t.searchedItems;n&&(n.sort((function(t,n){return t.tags.includes(e)?-1:n.tags.includes(e)?1:0})),t.searchedMetaData=Object(Be.b)(n))}},{key:"renderSearchBar",value:function(){var e=this,t=this.getWorkspaceState().query,n=t.length?Object(a.jsx)(ke.a,{type:"close",className:"clickable",onClick:function(){return e.onRequestSearch("",!1)}}):Object(a.jsx)(je.a,{title:"Search by words; a word starts with '+' must exist, a word starts with '-' must not; example: 'apple android +phone -fruit' means a matched result contains 'apple' or 'android', and must contain 'phone', must not contain 'fruit'",children:Object(a.jsx)(ke.a,{type:"info-circle",className:"clickable"})});return Object(a.jsx)("div",{className:"item-toolbar",children:Object(a.jsx)(Oe.a,{type:"search",placeholder:"Search everything!",prefix:Object(a.jsx)(ke.a,{type:"search",style:{color:"rgba(0,0,0,.25)"}}),suffix:n,value:t,onChange:function(t){return e.onRequestSearch(t.target.value,!0)}})})}},{key:"renderTagCloud",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=e.isAllData,i=e.metaData,c=i.tags,o=i.icons,s=i.themes,u=i.noTagCount,l=i.noIconCount,d=i.noThemeCount;if(!(c.length||u||s.length||d||o.length||l))return"";var h="".concat(r?"All":"Related"," "),p=c.length;p&&(h+="".concat(ve("Tag",p)," (").concat(p,") ")),((null===o||void 0===o?void 0:o.length)||(null===s||void 0===s?void 0:s.length))&&(p=o.length+s.length,h+="".concat(ve("Category",p)," (").concat(p,")"));var f=this.getWorkspaceState(),m=f.selectedTag;return Object(a.jsx)(Ie,Object(I.a)(Object(I.a)({title:h,icon:"tags",expandable:!0},t),{},{children:Object(a.jsx)("div",Object(I.a)(Object(I.a)({},n),{},{children:Object(a.jsx)(Me,{descriptor:this.getDescriptor(),data:i,selectedTag:r?"":m,options:this.getWorkspace().options})}))}),"section#tags")}},{key:"renderItems",value:function(e){if(!(null===e||void 0===e?void 0:e.length))return"";var t=this.getWorkspace(),n=this.getWorkspaceState().selectedTag;return Object(a.jsx)(Xe,{descriptor:this.getDescriptor(),items:e,selectedTag:n},"".concat(t.getId(),"#items"))}},{key:"renderCompactLayout",value:function(e,t){var n=e.query,r=e.isSearchCompleted,i=this.getDescriptor().name,c=t.items,o=t.isAllData;return Object(a.jsxs)("div",{style:{height:"inherit",margin:"8px 8px"},children:[this.renderSearchBar(),Object(a.jsx)(nt,Object(I.a)({name:i,query:n,isSearchCompleted:r,visibleData:t},this.props)),Object(a.jsxs)("div",{className:"scrollable item-result-container",onScroll:this.onScroll,children:[this.renderTagCloud(t,{expanded:o}),Object(a.jsx)(Ee,{height:"8px"}),this.renderItems(c)]})]})}},{key:"renderFullLayout",value:function(e,t){var n=e.query,r=e.isSearchCompleted,i=this.getDescriptor().name,c=t.items,o=t.isAllData;return Object(a.jsxs)("div",{style:{display:"flex",margin:"8px 8px",height:"inherit"},children:[Object(a.jsxs)("div",{style:{width:"60%",height:"100%",margin:"0 8px 0 0"},children:[this.renderSearchBar(),Object(a.jsx)(nt,Object(I.a)({name:i,query:n,isSearchCompleted:r,visibleData:t},this.props)),Object(a.jsx)("div",{className:"scrollable item-result-container",onScroll:this.onScroll,children:this.renderItems(c)})]}),Object(a.jsx)("div",{style:{width:"40%",height:"100%",margin:"0 0 0 8px"},children:this.renderTagCloud(t,{expanded:o,style:{height:"inherit"}},{style:{height:"calc(100% - 80px)"},className:"scrollable"})})]})}},{key:"render",value:function(){var e=this.getWorkspaceState();if(!e.loaded)return Object(a.jsx)("div",{style:{margin:"8px 8px"},children:"Loading..."});var t=this.props.workspace;t!==this.workspace&&(this.workspace=t,t.query&&this.onRequestSearch(t.query,!0));var n=this.getWorkspace().getVisibleData();return Object(a.jsxs)("div",{className:"no-select",style:{height:"inherit"},children:[Object(a.jsx)(D.a,{maxWidth:767,children:this.renderCompactLayout(e,n)}),Object(a.jsx)(D.a,{minWidth:768,children:this.renderFullLayout(e,n)})]})}}]),n}(r.Component);var it=n(76),ct=n(59),ot=n(280);function st(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{className:"item-favicon"};if(!e)return"";try{var n=new URL(e).hostname;return Object(a.jsx)("img",Object(I.a)({src:"https://s2.googleusercontent.com/s2/favicons?domain=".concat(n),alt:""},t))}catch(c){var r,i;return Object(y.a)("".concat(JSON.stringify((null===(r=c.err)||void 0===r?void 0:r.message)||(null===(i=c.err)||void 0===i?void 0:i.stack)))),""}}var ut=n(125);function lt(){for(var e=new Map,t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];n.forEach((function(t){var n,a=Object(E.a)(t);try{for(a.s();!(n=a.n()).done;){var r,i=n.value,c=null===(r=i.url)||void 0===r?void 0:r.trim().toLowerCase();if(c){try{c=decodeURIComponent(c)}catch(o){Object(y.a)("bookmark: detected invalid URL ".concat(c))}e.has(c)?i.id=e.get(c):e.set(c,i.id)}}}catch(s){a.e(s)}finally{a.f()}}))}function dt(e,t){return ht.apply(this,arguments)}function ht(){return(ht=Object(B.a)(M.a.mark((function e(t,a){return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.all([n.e(5),n.e(8)]).then(n.bind(null,1454)).then((function(e){return e.default(a).then((function(e){var n=e.items||e.bookmarks||[];return n.forEach((function(e){var t=e.hash;delete e.hash,t&&Array.isArray(t)&&(e.hash=Object(xe.h)(t))})),(n=n.filter((function(e){return!!Object(ut.c)(e.url)||(Object(y.a)("bookmark: discarded ".concat(e.url)),!1)}))).forEach((function(e){e.id||(e.id=Object(qe.f)())})),lt(t.items,n),t.items=Object(Be.a)(t.items,n),t.metaData=Object(Be.b)(t.items),t}))})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function pt(e){var t=[];return e.items.forEach((function(e){t.push({url:e.url,title:e.title,tags:e.tags,add_date:e.add_date,last_modified:e.last_modified,hash:e.hash?Object(xe.j)(e.hash):void 0,path:e.path})})),JSON.stringify({items:t})}function ft(e){return mt.apply(this,arguments)}function mt(){return(mt=Object(B.a)(M.a.mark((function e(t){return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.resolve(pt(t)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var vt=i.a.lazy((function(){return n.e(9).then(n.bind(null,1448))})),bt=i.a.lazy((function(){return Promise.all([n.e(1),n.e(2)]).then(n.bind(null,520))})),gt=Object(a.jsx)(r.Suspense,{fallback:Object(a.jsx)("div",{children:"Loading..."}),children:Object(a.jsx)(bt,{description:Object(a.jsxs)("p",{className:"ant-upload-text",children:["You can export your browser's bookmarks to a HTML file",Object(a.jsx)("a",{href:"https://support.emerson.edu/hc/en-us/articles/115002413966-Exporting-and-Importing-Browser-Bookmarks",target:"_blank",rel:"noopener noreferrer",children:"(learn how here!)"}),", and then click or drag the file to this area to import"]})})}),jt=function(e){Object(h.a)(n,e);var t=Object(p.a)(n);function n(){var e;return Object(u.a)(this,n),(e=t.call(this,"bookmark")).icon=Object(a.jsx)(ot.a,{}),e}return Object(l.a)(n,[{key:"creator",value:function(){return Object(I.a)(Object(I.a)({},Object(it.a)(Object(ct.a)(n.prototype),"creator",this).call(this)),{},{title:"",url:"",tags:[]})}},{key:"render",value:function(e,t,n){return function(e,t,n){var r,i=e.url,c=e.title,o=i;return"detail"===t?Object(a.jsxs)("div",{className:"item item-card border",children:[Object(a.jsxs)("div",{children:[st(i),Object(a.jsx)("span",{children:c||"(untitled)"})]}),Object(a.jsx)("div",{children:(null===(r=e.tags)||void 0===r?void 0:r.length)>0&&Je(e,n)})]},"item#".concat(o)):Object(a.jsxs)("div",{className:"item",children:[st(i),Object(a.jsx)("a",{className:"item-title",href:i,target:"_blank",rel:"noopener noreferrer",children:c||"(untitled)"})]},"item#".concat(o))}(e,t,n)}},{key:"editor",value:function(e){return Object(a.jsx)(r.Suspense,{fallback:Object(a.jsx)("div",{children:"Loading..."}),children:Object(a.jsx)(vt,Object(I.a)({},e))})}},{key:"drawer",value:function(e,t){return"import"===e?gt:Object(it.a)(Object(ct.a)(n.prototype),"drawer",this).call(this,e,t)}},{key:"notifier",value:function(e,t){if("item#will-update"===e){var n,a=t.dataSource,r=t.item,i=r.id,c=null===(n=r.url)||void 0===n?void 0:n.trim().toLowerCase();if(c){var o=a.items.filter((function(e){var t;return e.id!==i&&(null===(t=e.url)||void 0===t?void 0:t.trim().toLowerCase())===c})).map((function(e){return e.id}));a.deleteItems(o)}}}},{key:"importText",value:function(){var e=Object(B.a)(M.a.mark((function e(t,n){return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",dt(t,n));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"exportText",value:function(){var e=Object(B.a)(M.a.mark((function e(t){return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ft(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),n}(qe.e),Ot=n(283),kt=n(281),yt=n(525),xt=(yt.a.Title,yt.a.Paragraph);yt.a.Text,yt.a.Link;var wt=function(e,t){var n=e.split("\n");return Object(a.jsx)(a.Fragment,{children:n.map((function(e){return Object(a.jsx)(xt,{style:{marginBottom:"2px",color:t},children:e})}))})};var It=n(95);function Et(e,t,n){var r=e.id,i=e.theme,c=e.title,o=e.url,s=e.name,u=e.secret,l=e.notes,d=Object(It.getTheme)(i),h=d.foreColor||"#666",p={};if(d.name||(p.borderBottom="1px solid lightgray"),"detail"===t){var f,m={margin:"4px 0"};return Object(a.jsxs)("div",{className:"item item-card border",style:Object(I.a)({background:d.bkColor,color:h},p),children:[Object(a.jsxs)("div",{children:[st(o),Object(a.jsx)("span",{children:c||"(untitled)"})]}),(null===s||void 0===s?void 0:s.length)>0&&Object(a.jsx)("div",{style:m,children:s}),(null===u||void 0===u?void 0:u.length)>0&&Object(a.jsxs)("div",{style:m,children:[Object(a.jsx)("span",{className:"item-highlight",children:u}),u&&Object(a.jsx)("span",{className:"clickable",style:{margin:"0 0 0 8px"},onClick:function(e){e.preventDefault(),e.stopPropagation(),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=document.createElement("textarea");t.value=e,t.setAttribute("readonly",""),t.style.position="absolute",t.style.left="-9999px",document.body.appendChild(t);var n=document.getSelection().rangeCount>0&&document.getSelection().getRangeAt(0);t.select(),document.execCommand("copy"),document.body.removeChild(t),n&&(document.getSelection().removeAllRanges(),document.getSelection().addRange(n))}(u),A.a.open({message:"Secret",description:'Copied "'.concat(u,'" to clipboard')})},children:Object(a.jsx)(kt.a,{})})]}),(null===o||void 0===o?void 0:o.length)>0&&Object(a.jsx)("div",{style:m,children:Object(a.jsx)("a",{className:"item-title clickable",href:o,target:"_blank",rel:"noopener noreferrer",children:o})}),wt(l||"",h),(null===(f=e.tags)||void 0===f?void 0:f.length)>0&&Je(e,n)]},"item#".concat(r))}return Object(a.jsx)("div",{className:"item item-card",style:Object(I.a)({background:d.bkColor,color:h},p),children:Object(a.jsxs)("div",{children:[st(o),Object(a.jsx)("span",{children:c||"(untitled)"})]})},"item#".concat(r))}var St=n(121),Ct=n.n(St);function Dt(e){var t=Ct.a.MD5(e);return t.toString(Ct.a.enc.utf8)}function At(e,t){return Ct.a.AES.encrypt(e,t).toString()}function _t(e,t){var n=Ct.a.AES.decrypt(e,t);return n.toString(Ct.a.enc.Utf8)}function Tt(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",a=t.items||t.vaults||[];a.forEach((function(e){var t=e.hash;delete e.hash,t&&Array.isArray(t)&&(e.hash=Object(xe.h)(t)),n&&(e.name=_t(e.name,n),e.secret=_t(e.secret,n))})),e.items=Object(Be.a)(e.items,a),e.metaData=Object(Be.b)(e.items)}function Wt(e,t){return Nt.apply(this,arguments)}function Nt(){return(Nt=Object(B.a)(M.a.mark((function e(t,n){return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,a){var r=JSON.parse(n);r.key?F({type:"password",title:"Need a password to decrypt",placeholder:"Enter password here!",text:""}).then((function(n){var i=n.text;if(Dt(i)===r.key.passwordHash){var c=_t(r.key.encryptedKey,i);Dt(c)===r.key.keyHash?(Tt(t,r,c),e(t)):a("invalid key")}else a("invalid password")})):(Tt(t,r),e(t))})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Pt(e,t){var n=t?Object(ge.a)()+Object(ge.a)()+Object(ge.a)()+Object(ge.a)():"",a=[];e.items.forEach((function(e){var t=e.id,r=e.theme,i=e.title,c=e.tags,o=e.add_date,s=e.last_modified,u=e.name,l=e.secret,d=e.url,h=e.notes;a.push({id:t,theme:r,title:i,tags:c,add_date:o,last_modified:s,hash:e.hash?Object(xe.j)(e.hash):void 0,name:n?At(u,n):u,secret:n?At(l,n):l,url:d,notes:h})}));var r={items:a};return n&&(r.key={passwordHash:Dt(t),keyHash:Dt(n),encryptedKey:At(n,t,"AES")}),JSON.stringify(r)}function Rt(e){return Lt.apply(this,arguments)}function Lt(){return(Lt=Object(B.a)(M.a.mark((function e(t){return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",F({type:"password",title:"Need a password to encrypt",placeholder:"Enter password here!",text:""}).then((function(e){return Pt(t,e.text)})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Mt=i.a.lazy((function(){return n.e(11).then(n.bind(null,1449))})),Bt=function(e){Object(h.a)(n,e);var t=Object(p.a)(n);function n(){var e;return Object(u.a)(this,n),(e=t.call(this,"vault")).features=qe.c|qe.b,e.icon=Object(a.jsx)(Ot.a,{}),e}return Object(l.a)(n,[{key:"creator",value:function(){return Object(I.a)(Object(I.a)({},Object(it.a)(Object(ct.a)(n.prototype),"creator",this).call(this)),{},{tags:[],title:"",name:"",secret:"",url:"",notes:""})}},{key:"getProp",value:function(e,t){if("@search"===t){var a;if(!e._tags)e._tags=(null===(a=e.tags)||void 0===a?void 0:a.join(","))||"";return[e.title||"",e._tags,e.notes||""]}return Object(it.a)(Object(ct.a)(n.prototype),"getProp",this).call(this,e,t)}},{key:"render",value:function(e,t,n){return Et(e,t,n)}},{key:"editor",value:function(e){return Object(a.jsx)(r.Suspense,{fallback:Object(a.jsx)("div",{children:"Loading..."}),children:Object(a.jsx)(Mt,Object(I.a)({},e))})}},{key:"importText",value:function(){var e=Object(B.a)(M.a.mark((function e(t,n){return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Wt(t,n));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"exportText",value:function(){var e=Object(B.a)(M.a.mark((function e(t){return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Rt(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),n}(qe.e),Ut=n(279),Gt=n(299),qt=(n(512),function(e){Object(h.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(u.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={expanded:!1,truncated:!1},e.handleTruncate=e.handleTruncate.bind(Object(d.a)(e)),e.toggleLines=e.toggleLines.bind(Object(d.a)(e)),e}return Object(l.a)(n,[{key:"handleTruncate",value:function(e){this.state.truncated!==e&&this.setState({truncated:e})}},{key:"toggleLines",value:function(e){e.preventDefault(),e.stopPropagation(),this.setState({expanded:!this.state.expanded})}},{key:"render",value:function(){var e=this.props,t=e.children,n=e.more,r=e.less,i=e.lines,c=this.state,o=c.expanded,s=c.truncated;return Object(a.jsxs)("div",{children:[Object(a.jsx)(Gt.a,{lines:!o&&i,ellipsis:Object(a.jsxs)("span",{onClick:this.toggleLines,children:["... ",Object(a.jsx)("span",{className:"clickable",children:n})]}),onTruncate:this.handleTruncate,children:t}),!s&&o&&Object(a.jsx)("span",{onClick:this.toggleLines,className:"clickable",style:{margin:"0 0 0 8px"},children:r})]})}}]),n}(r.Component));qt.defaultProps={lines:3,more:"Read more",less:"Show less"};var Ht=qt,zt=n(134);function Kt(e,t){var n=t.items||t.memos||[];n.forEach((function(e){var t=e.hash;delete e.hash,t&&Array.isArray(t)&&(e.hash=Object(xe.h)(t))})),e.items=Object(Be.a)(e.items,n),e.metaData=Object(Be.b)(e.items)}function Jt(e,t){return Vt.apply(this,arguments)}function Vt(){return(Vt=Object(B.a)(M.a.mark((function e(t,n){return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){var a=JSON.parse(n);Kt(t,a),e(t)})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ft(e){return Promise.resolve(function(e){var t=[];return e.items.forEach((function(e){t.push({id:e.id,category:e.category,title:e.title,tags:e.tags,add_date:e.add_date,last_modified:e.last_modified,hash:e.hash?Object(xe.j)(e.hash):void 0,theme:e.theme,content:e.content})})),JSON.stringify({items:t})}(e))}var Qt=i.a.lazy((function(){return n.e(10).then(n.bind(null,1450))})),Yt=function(e){Object(h.a)(n,e);var t=Object(p.a)(n);function n(){var e;return Object(u.a)(this,n),(e=t.call(this,"memo")).features=qe.a|qe.c,e.icon=Object(a.jsx)(Ut.a,{}),e}return Object(l.a)(n,[{key:"creator",value:function(){return Object(I.a)(Object(I.a)({},Object(it.a)(Object(ct.a)(n.prototype),"creator",this).call(this)),{},{title:"",content:"",tags:[]})}},{key:"getProp",value:function(e,t){if("@search"===t){var a;if(!e._tags)e._tags=(null===(a=e.tags)||void 0===a?void 0:a.join(","))||"";return[e.title||"",e._tags,e.content||""]}return Object(it.a)(Object(ct.a)(n.prototype),"getProp",this).call(this,e,t)}},{key:"hasher",value:function(e){return e===xe.f?Object(zt.c)():Object(it.a)(Object(ct.a)(n.prototype),"hasher",this).call(this,e)}},{key:"render",value:function(e,t,n){return function(e,t,n){var r,i=e.id,c=e.category,o=e.theme,s=e.title,u=e.content,l=Object(zt.b)(c),d=Object(It.getTheme)(o),h=d.foreColor||"#666",p={};return d.name||(p.borderBottom="1px solid lightgray"),"detail"===t?Object(a.jsxs)("div",{className:"item item-card border",style:Object(I.a)({background:d.bkColor,color:h},p),children:[Object(a.jsxs)("div",{children:[l.name&&Object(a.jsx)(ke.a,{type:l.icon,style:{margin:"0 8px 0 0"}}),Object(a.jsx)("span",{children:s||"(untitled)"})]}),Object(a.jsx)("div",{className:"item-content",style:{color:h},children:wt(u||"",h)}),(null===(r=e.tags)||void 0===r?void 0:r.length)>0&&Je(e,n)]},"item#".concat(i)):Object(a.jsxs)("div",{className:"item item-card",style:Object(I.a)({background:d.bkColor,color:h},p),children:[Object(a.jsxs)("div",{children:[l.name&&Object(a.jsx)(ke.a,{type:l.icon,style:{margin:"0 8px 0 0"}}),Object(a.jsx)("span",{children:s||"(untitled)"})]}),Object(a.jsx)("div",{className:"item-content",style:{color:h},children:Object(a.jsx)(Ht,{lines:2,more:"Show more",children:u||""})})]},"item#".concat(i))}(e,t,n)}},{key:"editor",value:function(e){return Object(a.jsx)(r.Suspense,{fallback:Object(a.jsx)("div",{children:"Loading..."}),children:Object(a.jsx)(Qt,Object(I.a)({},e))})}},{key:"actioner",value:function(e){return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(zt.a,{style:{margin:"0 12px"},mode:"simple",category:e.category,eventHandler:function(t,n){g.b.postEvent("item#cmd:action",{action:"change-prop",ids:[e.id],propName:"category",propValue:n.name})}}),Object(it.a)(Object(ct.a)(n.prototype),"actioner",this).call(this,e)]})}},{key:"importText",value:function(){var e=Object(B.a)(M.a.mark((function e(t,n){return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Jt(t,n));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"exportText",value:function(){var e=Object(B.a)(M.a.mark((function e(t){return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ft(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),n}(qe.e),Zt=[];function Xt(e){for(var t=0;t<Zt.length;t++){var n=Zt[t];if(e.startsWith(n.name+"."))return!0}return!1}function $t(e,t,n){if(e&&t){var a=Object(qe.g)(t),r=e.findIndex((function(e){return Object(qe.g)(e)===a}));if(-1!==r)return e[r]=t,1;if(n)return e.unshift(t),2}return 0}function en(e,t){if(e){var n=e.findIndex((function(e){return Object(qe.g)(e)===t}));-1!==n&&e.splice(n,1)}}Zt.push(new jt),Zt.push(new Yt),Zt.push(new Bt);var tn=function(){function e(){Object(u.a)(this,e),this.reset()}return Object(l.a)(e,[{key:"reset",value:function(){this.items=[],this.metaData={tags:[],icons:[],themes:[],noTagCount:0,noIconCount:0,noThemeCount:0},this.pinnedItems=[],this.searchedItems=void 0,this.searchedMetaData=void 0,this.dirty=!1}},{key:"load",value:function(e){this.reset(),e&&(this.items=e,this.pinnedItems=this.items.filter((function(e){return Ve(e)})),this.syncMetaData("all"))}},{key:"updateItem",value:function(e,t){var n=be();e.add_date||(e.add_date=n),e.last_modified=n;var a=this.items,r=this.searchedItems,i=this.pinnedItems;$t(a,e,t),$t(i,e,!1),$t(r,e,t),this.syncMetaData("all")}},{key:"deleteItems",value:function(e){var t=this.items,n=this.searchedItems,a=this.pinnedItems;e.forEach((function(e){en(t,e),en(n,e),en(a,e)})),this.syncMetaData("all")}},{key:"syncMetaData",value:function(e){"all"===e&&(this.metaData=Object(Be.b)(this.items)),this.searchedItems&&(this.searchedMetaData=Object(Be.b)(this.searchedItems))}}]),e}();function nn(e){return{id:e.id,name:e.name,options:e.options}}var an=function(){function e(t){var n=t.id,a=t.type,r=t.name,i=t.options;Object(u.a)(this,e),this.id=a?"".concat(a,".").concat(n):n,this.name=r,this.descriptor=function(e){for(var t=0;t<Zt.length;t++){var n=Zt[t];if(e.startsWith(n.name))return n}}(this.id),this.dataSource=new tn,this.options=i||{showHashtag:!1,showCount:!1,showScale:!1,sortBy:"alphabetic"},this.loaded=!1,this.query="",this.isSearchCompleted=!0,this.selectedTag="",this.currentItem={},this.invalidateVisibleData()}return Object(l.a)(e,[{key:"getId",value:function(){return this.id}},{key:"getName",value:function(){return this.name}},{key:"getMetaData",value:function(){return nn(this)}},{key:"setWorkingState",value:function(e){var t=this;Object.entries(e).forEach((function(e){var n=Object(we.a)(e,2),a=n[0],r=n[1];"query"===a&&t.query!==r&&t.invalidateVisibleData(),t[a]=r}))}},{key:"getWorkingState",value:function(){var e=this.name,t=this.loaded,n=this.query,a=this.isSearchCompleted,r=this.selectedTag;return{name:e,loaded:t,query:n,isSearchCompleted:a,selectedTag:null===r||void 0===r?void 0:r.trim().toLowerCase()}}},{key:"getDescriptor",value:function(){return this.descriptor}},{key:"getDataSource",value:function(){return this.dataSource}},{key:"isEmpty",value:function(){return 0===this.getDataSource().items.length}},{key:"loadData",value:function(e){this.getDataSource().load(e),this.loaded=!0}},{key:"invalidateVisibleData",value:function(){this.visibleData=void 0}},{key:"getVisibleData",value:function(){var e=this.query,t=this.visibleKey,n=this.visibleData;return t===e&&n?n:(this.visibleData=function(e){var t=e.query,n=e.lastItem,a=e.dataSource,r=a.items,i=a.metaData,c=a.pinnedItems,o=a.searchedItems,s=a.searchedMetaData,u=r.length;return"#all"===t?{total:u,items:r,metaData:i,isAllData:!0}:"#notag"===t||"#noicon"===t||"#nocolor"===t?{total:u,items:o||[],metaData:{tags:i.tags,noTagCount:i.noTagCount,icons:(null===s||void 0===s?void 0:s.icons)||[],noIconCount:(null===s||void 0===s?void 0:s.noIconCount)||0,themes:(null===s||void 0===s?void 0:s.themes)||[],noThemeCount:(null===s||void 0===s?void 0:s.noThemeCount)||0},isAllData:!0}:t?(null===o||void 0===o?void 0:o.length)>0?{total:u,items:o,metaData:s,isAllData:!1}:{total:u,items:[],metaData:i,isAllData:!0}:r.length<25?{total:u,items:r,metaData:i,isAllData:!0}:c.length?{total:u,items:n?[].concat(Object(S.a)(c),[n]):c,metaData:i,isAllData:!0}:{total:u,items:n?[n]:[],metaData:i,isAllData:!0}}(this),this.visibleKey=e,this.visibleData)}},{key:"getVisibleItemIds",value:function(){return this.getVisibleData().items.map((function(e){return Object(qe.g)(e)}))}},{key:"actionWillPerform",value:function(e,t){var n,a;switch(e){case"item#will-update":case"item#will-update-tag":var r=t.item,i=t.items;i&&i.forEach((function(e){return e._tags=void 0})),r&&(r._tags=void 0)}null===(n=(a=this.getDescriptor()).notifier)||void 0===n||n.call(a,e,t)}},{key:"actionDidPerform",value:function(e,t){this.getDataSource().syncMetaData("all"),this.invalidateVisibleData(),g.b.postEvent(e,t)}},{key:"onBulkDeleteItems",value:function(e){var t=this.getDataSource();this.actionWillPerform("item#will-delete",{dataSource:t,ids:e}),t.deleteItems(e),this.lastItem&&e.includes(this.lastItem.id)&&(this.lastItem=void 0),this.invalidateVisibleData(),t.searchedItems&&t.searchedItems.length||(this.query=""),this.actionDidPerform("item#deleted")}},{key:"onBulkToggleItemHashTag",value:function(e,t){var n=this.getDataSource();this.actionWillPerform("item#will-update-hashtag",{dataSource:n,ids:e,tags:t,action:"toggle"});var a=n.items;e.forEach((function(e){var n=a.findIndex((function(t){return Object(qe.g)(t)===e}));if(-1!==n){var r=a[n];r.hash=Object(xe.k)(r.hash,t)}})),this.actionDidPerform("item#updated-hashtag")}},{key:"onBulkAddTags",value:function(){var e=this;(function(){return re.apply(this,arguments)})().then((function(t){var n=t,a=e.getVisibleData().items;e.actionWillPerform("item#will-update-tag",{dataSource:e.getDataSource(),items:a,tags:n,action:"add"}),a.forEach((function(e){var t=e.tags;n.forEach((function(e){t.includes(e)||t.push(e)}))})),e.actionDidPerform("item#updated-tag")})).catch((function(e){}))}},{key:"onBulkDeleteTags",value:function(){var e,t,n=this;(function(e){return ie.apply(this,arguments)})(null===(e=this.getVisibleData())||void 0===e||null===(t=e.metaData)||void 0===t?void 0:t.tags).then((function(e){var t=e,a=n.getVisibleData().items;n.actionWillPerform("item#will-update-tag",{dataSource:n.getDataSource(),items:a,tags:t,action:"delete"}),a.forEach((function(e){var n=e.tags;t.forEach((function(e){var t=n.indexOf(e);-1!==t&&n.splice(t,1)}))})),n.actionDidPerform("item#updated-tag")})).catch((function(e){}))}},{key:"onBulkChangeItemProp",value:function(e,t,n){var a=this.getDataSource();this.actionWillPerform("item#will-update-prop",{dataSource:a,ids:e,propName:t,propValue:n});var r=a.items;e.forEach((function(e){var a=r.findIndex((function(t){return Object(qe.g)(t)===e}));-1!==a&&(r[a][t]=n)})),this.actionDidPerform("item#updated-prop")}},{key:"onUpdateItem",value:function(e){this.onItemUpdated(e,!0),g.b.postEvent("item#added",e)}},{key:"onItemUpdated",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.getDataSource();this.actionWillPerform("item#will-update",{dataSource:n,item:e}),n.updateItem(e,t),this.lastItem=e,this.invalidateVisibleData()}},{key:"onAddItem",value:function(){var e=this;this.currentItem=this.getDescriptor().creator(),function(e){return ne.apply(this,arguments)}({title:"Create",item:this.currentItem}).then((function(t){return e.onUpdateItem(t)})).catch((function(e){}))}},{key:"onEditItem",value:function(e){var t=this,n=this.getDataSource().items,a=n.findIndex((function(t){return Object(qe.g)(t)===e}));if(-1!==a){var r=n[a];this.currentItem=Object(I.a)({},r),function(e){return ae.apply(this,arguments)}({title:"Edit",item:this.currentItem}).then((function(e){return t.onUpdateItem(e)})).catch((function(e){}))}}},{key:"onEvent",value:function(e,t){switch(e){case"cmd#bulk-add-tags":this.onBulkAddTags();break;case"cmd#bulk-delete-tags":this.onBulkDeleteTags();break;case"cmd#bulk-delete-items":this.onBulkDeleteItems(this.getVisibleItemIds());break;case"cmd#bulk-toggle-pinned-items":this.onBulkToggleItemHashTag(this.getVisibleItemIds(),xe.b);break;case"item#cmd:action":var n=t.action,a=t.id,r=t.ids;"edit"===n?this.onEditItem(a):"delete"===n?this.onBulkDeleteItems(r):"toggle-pin"===n?this.onBulkToggleItemHashTag(a,xe.b):"change-prop"===n?this.onBulkChangeItemProp(r,t.propName,t.propValue):Object(y.a)("item: discarded unknown action ".concat(n));break;case"cmd#add-item":this.onAddItem();break;case"item#updated":this.onItemUpdated(t)}}}]),e}(),rn=function(){function e(){Object(u.a)(this,e),this.workspaces=[{id:"1",name:"Loading..."}],this.activeWorkspaceIndex=0}return Object(l.a)(e,[{key:"getAllWorkspaces",value:function(){return this.workspaces}},{key:"createWorkspaces",value:function(e){var t=this;this.workspaces=e.map((function(e){var n=new an(e);return t._resetWorkspace(n),n}))}},{key:"_resetWorkspace",value:function(e){var t,n;e||(e=this.getActiveWorkspace()),null===(t=e)||void 0===t||null===(n=t.dataSource)||void 0===n||n.reset()}},{key:"getActiveWorkspace",value:function(){var e=this.workspaces;return(this.activeWorkspaceIndex<0||this.activeWorkspaceIndex>=e.length)&&(this.activeWorkspaceIndex=0),this.workspaces[this.activeWorkspaceIndex]}},{key:"_getWorkspaceIndex",value:function(e){return this.workspaces.findIndex((function(t){return t.getId()===e}))}},{key:"getWorkspace",value:function(e){var t=this._getWorkspaceIndex(e);return-1!==t?this.workspaces[t]:void 0}},{key:"setActiveWorkspace",value:function(e){var t=this._getWorkspaceIndex(e);if(-1!==t&&t!==this.activeWorkspaceIndex)return this.activeWorkspaceIndex=t,!0}},{key:"renameActiveWorkspace",value:function(e){var t=this.getActiveWorkspace();t.name=e,g.b.postEvent("workspace#updated",t)}},{key:"_addWorkspace",value:function(e,t){var n=new an({id:"".concat(t,".").concat(Object(ge.a)()),name:e});return this._resetWorkspace(n),this.workspaces.push(n),n}},{key:"addWorkspace",value:function(e,t){var n=this._addWorkspace(e,t);return g.b.postEvent("workspace#added",n),n}},{key:"removeWorkspace",value:function(e){var t=this.workspaces,n=this._getWorkspaceIndex(e);if(-1!==n){var a=t[n];return t.splice(n,1),a.getDataSource().reset(),g.b.postEvent("workspace#deleted",a),this.autoSelectWorkspace()}}},{key:"bulkRemoveWorkspaces",value:function(e){var t=this,n=this.workspaces;return e.forEach((function(e){var a=t._getWorkspaceIndex(e);if(-1!==a){var r=n[a];n.splice(a,1),r.getDataSource().reset()}})),this.autoSelectWorkspace()}},{key:"autoSelectWorkspace",value:function(){var e=this.workspaces;if(!e.length)return this._addWorkspace("memo","memo");var t=this.activeWorkspaceIndex;return e[t<e.length?t:e-1]}}]),e}();function cn(e,t){e.endsWith(".git")&&(e=e.substr(0,e.length-4));var n=e.lastIndexOf("/"),a=e.lastIndexOf("/",n-1),r=e.substr(a+1,n-a-1);return t="".concat(r,":").concat(t),{owner:r,repo:e.substr(n+1),path:e.substr(a+1),token:"Basic ".concat(k.a.encode(t))}}function on(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=e.owner,r=e.token;if(!a||!r)return Promise.reject("github: bad request");var i=t.startsWith("/")?"":"/";return fetch("https://api.github.com".concat(i).concat(t),Object(I.a)({method:"GET",headers:{Accept:"application/vnd.github.v3+json",Authorization:r,Host:"api.github.com","User-Agent":a}},n)).then((function(e){return e.json()}))}function sn(e,t){return un.apply(this,arguments)}function un(){return(un=Object(B.a)(M.a.mark((function e(t,n){var a;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=cn(t,n),e.abrupt("return",on(a,"/repos/".concat(a.path,"/contents")).then((function(e){return e.map((function(e){return{name:e.name,path:e.path,sha:e.sha}}))})).catch((function(e){Object(y.a)(e)})));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ln(e,t,n){return dn.apply(this,arguments)}function dn(){return(dn=Object(B.a)(M.a.mark((function e(t,n,a){var r;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===a||void 0===a?void 0:a.path){e.next=2;break}return e.abrupt("return",Promise.reject("github: path not specified"));case 2:return r=cn(t,n),e.abrupt("return",on(r,"/repos/".concat(r.path,"/contents/").concat(a.path)).then((function(e){return Object(y.a)("github: downloaded ".concat(a.path)),k.a.decode(e.content)})).catch((function(e){return Object(y.a)(e),[]})));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function hn(e,t,n,a){return pn.apply(this,arguments)}function pn(){return(pn=Object(B.a)(M.a.mark((function e(t,n,a,r){var i,c,o;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a){e.next=2;break}return e.abrupt("return",Promise.reject("github: path not specified"));case 2:return i=cn(t,n),"string"===typeof a?c=a:(c=a.path,o=a.sha),"string"!==typeof r&&(r=JSON.stringify(r)),r=k.a.encode(r),e.abrupt("return",on(i,"/repos/".concat(i.path,"/contents/").concat(c),{method:"PUT",body:JSON.stringify({message:"".concat(o?"updated":"added"," "),content:r,sha:o})}).then((function(e){var t=e.content;return Object(y.a)("github: ".concat(o?"updated":"created"," ").concat(c)),{path:c,sha:t.sha}})).catch((function(e){Object(y.a)(e)})));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function fn(e,t,n){return mn.apply(this,arguments)}function mn(){return(mn=Object(B.a)(M.a.mark((function e(t,n,a){var r;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===a||void 0===a?void 0:a.path){e.next=2;break}return e.abrupt("return",Promise.reject("github: path not specified"));case 2:return r=cn(t,n),e.abrupt("return",on(r,"/repos/".concat(r.path,"/contents/").concat(a.path),{method:"DELETE",body:JSON.stringify({message:"delete",sha:a.sha})}).then((function(e){return Object(y.a)("github: deleted ".concat(a.path)),!0})).catch((function(e){return Object(y.a)(e),!1})));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function vn(e,t){var n=Object(m.b)("lastSyncTime")||0,a={localAdded:0,localDeleted:0,localUpdated:0,remoteAdded:0,remoteDeleted:0,remoteUpdated:0};return e.forEach((function(e){return e.sync=""})),t.forEach((function(t){t.sync="";var r=function(e,t,n){var a={localAdded:0,localDeleted:0,localUpdated:0,remoteAdded:0,remoteDeleted:0,remoteUpdated:0},r=n.items;if(!(null===r||void 0===r?void 0:r.length))return n.sync="discarded",a;var i=function(e){var t=e.lastUpdated;if(!t){var n=e.items,a=0;n.forEach((function(e){var t=e.last_modified;a?t>a&&(a=t):a=t}))}return t}(n),c=t.find((function(e){return e.getId()===n.id}));if(!c){if(i<e)return Object(y.a)("sync: discarded ".concat(n.id," - already deleted locally")),n.sync="discarded",a.remoteDeleted=r.length,a;var o=new an(nn(n));return o.loadData(r),t.push(o),Object(y.a)("sync: added ".concat(n.id)),o.sync="added",a.localAdded=r.length,a}var s=c.getDataSource().items;r.forEach((function(t){var n=s.findIndex((function(e){return e.id===t.id}));if(-1===n){if(t.last_modified<e)return void a.remoteDelete++;s.push(t),a.localAdded++}else{var r=s[n];r.last_modified<t.last_modified?(s[n]=Object(qe.d)(t),a.localUpdated++):r.last_modified>t.last_modified&&a.remoteUpdated++}}));for(var u=function(t){var n=s[t];-1===r.findIndex((function(e){return e.id===n.id}))&&(n.last_modified<e?(s.splice(t,1),a.localDeleted++):(n.last_modified=be(),a.localUpdated++,a.remoteAdded++))},l=s.length-1;l>=0;l--)u(l);var d=a.localAdded,h=a.localDeleted,p=a.localUpdated,f=a.remoteAdded,m=a.remoteDeleted,v=a.remoteUpdated;return(d||h||p)&&(c.sync="updated"),(f||m||v)&&(n.sync="updated"),a}(n,e,t);Object.keys(a).forEach((function(e){return a[e]+=r[e]}))})),e.forEach((function(e){"updated"===e.sync&&e.getDataSource().syncMetaData("all")})),Object(m.g)("lastSyncTime",be()),a}function bn(){return(bn=Object(B.a)(M.a.mark((function e(t,n,a){var r,i,c,o;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=[],i=[],o={created:[],deleted:[],updated:[]},e.abrupt("return",sn(n,a).then((function(e){return r=e.filter((function(e){return Xt(e.name)})),Promise.all(r.map((function(e){return ln(n,a,e)})))})).then((function(e){return e.forEach((function(e){try{var t=JSON.parse(e);i.push(t)}catch(n){return Object(y.a)("sync/github: caught an exception"),Promise.reject(n)}})),vn(t,i)})).then((function(e){c=e;var n=new Map;r.forEach((function(e){n.set(e.path,e)})),i.forEach((function(e){var t=e.id,a=e.sync;if("discarded"===a||"updated"===a){var r=n.get(t);r.decision="discarded"===a?"delete":"update",n.set(t,r)}})),t.forEach((function(e){var t=e.getId(),a=e.sync;if(n.has(t)){var r=n.get(t);a&&"added"!==a&&(r.decision="update",n.set(t,r))}else e.isEmpty()||n.set(t,{path:t,decision:"create"})})),n.forEach((function(e){"delete"===e.decision?o.deleted.push(e):"update"===e.decision?o.updated.push(e):"create"===e.decision&&o.created.push(e)}))})).then((function(e){return Promise.all(o.deleted.map((function(e){return fn(n,a,e)})))})).then((function(e){return Promise.all([].concat(Object(S.a)(o.updated),Object(S.a)(o.created)).map((function(e){var r=e.path,i=t.find((function(e){return e.getId()===r})),c=Object(I.a)(Object(I.a)({},nn(i)),{},{lastUpdated:be(),items:i.getDataSource().items});return hn(n,a,e.sha?e:r,c)})))})).then((function(e){return c})));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var gn=i.a.lazy((function(){return Promise.all([n.e(0),n.e(14)]).then(n.bind(null,1443))})),jn=i.a.lazy((function(){return Promise.all([n.e(0),n.e(15)]).then(n.bind(null,1444))})),On=i.a.lazy((function(){return Promise.all([n.e(0),n.e(7),n.e(16)]).then(n.bind(null,1445))})),kn=i.a.lazy((function(){return n.e(12).then(n.bind(null,1446))})),yn=i.a.lazy((function(){return n.e(13).then(n.bind(null,1447))})),xn="awesome",wn=function(e){Object(h.a)(i,e);var t=Object(p.a)(i);function i(e){var n;return Object(u.a)(this,i),(n=t.call(this,e)).id="".concat(xn,".").concat(Object(ge.a)()),Object(y.a)("".concat(n.id,": created")),n.state={mode:"default",evtObj:void 0},n.items=[],n.tags=[],n.workspaceManager=new rn,n.onCloseDrawer=n.onCloseDrawer.bind(Object(d.a)(n)),n.onEvent=n.onEvent.bind(Object(d.a)(n)),n.onChangeWorkspace=n.onChangeWorkspace.bind(Object(d.a)(n)),n.onEditWorkspace=n.onEditWorkspace.bind(Object(d.a)(n)),n.onClickWorkspace=n.onClickWorkspace.bind(Object(d.a)(n)),n.onImport=n.onImport.bind(Object(d.a)(n)),n.onExport=n.onExport.bind(Object(d.a)(n)),Object(g.a)("".concat(xn,"-").concat(n.id),n.onEvent.bind(Object(d.a)(n))),de("//".concat(xn," Page")),n}return Object(l.a)(i,[{key:"componentDidMount",value:function(){var e=this;Object(ce.a)("".concat(xn,"#spaces")).then((function(t){return e.loadWorkspaceMetaData(t)})).catch((function(t){return e.loadWorkspaceMetaData([])}))}},{key:"componentWillUnmount",value:function(){Object(g.d)("".concat(xn,"-").concat(this.id))}},{key:"getWorkspace",value:function(){return this.workspaceManager.getActiveWorkspace()}},{key:"getAllWorkspaces",value:function(){return this.workspaceManager.getAllWorkspaces()}},{key:"getDescriptor",value:function(){return this.getWorkspace().descriptor}},{key:"getDataSource",value:function(){return this.getWorkspace().dataSource}},{key:"getPersistItemName",value:function(e){var t=e.indexOf(".");return-1!==t&&(e=e.substr(t+1)),"".concat(xn,"#data#").concat(e)}},{key:"onLoadedWorkspaceData",value:function(e,t){e.loadData(null===t||void 0===t?void 0:t.items),this.forceUpdate(),Object(y.a)("".concat(this.id,": loaded ").concat(e.getId())),g.b.postEvent("workspace#ready")}},{key:"loadWorkspaceData",value:function(e){var t=this;if(!e.getWorkingState().loaded)return e.setWorkingState({loaded:!1}),Object(ce.a)(this.getPersistItemName(e.getId())).then((function(n){return t.onLoadedWorkspaceData(e,n)})).catch((function(n){return t.onLoadedWorkspaceData(e,{items:[]})}));g.b.postEvent("workspace#ready")}},{key:"saveWorkspaceData",value:function(e){var t=null===e||void 0===e?void 0:e.getDataSource();if(t){var n=t.items;Object(ce.d)(this.getPersistItemName(e.getId()),{items:n}),t.dirty=!1,Object(y.a)("".concat(this.id,": saved ").concat(e.getId()))}}},{key:"removeWorkspaceData",value:function(e){Object(ce.c)(this.getPersistItemName(e.getId())),Object(y.a)("".concat(this.id,": removed ").concat(e.getId()))}},{key:"bulkLoadWorkspaceData",value:function(){var e=this,t=this.getAllWorkspaces(),n=t.filter((function(e){return!e.getWorkingState().loaded}));return n.length?Promise.all(n.map((function(t){return Object(ce.a)(e.getPersistItemName(t.getId()))}))).then((function(e){for(var a=0;a<n.length;a++){var r;n[a].loadData(null===(r=e[a])||void 0===r?void 0:r.items)}return t})):Promise.resolve(t)}},{key:"bulkSaveWorkspaceData",value:function(e){var t=this,n=this.getAllWorkspaces();null===e||void 0===e||e.forEach((function(e){t.saveWorkspaceData(n.find((function(t){return t.id===e})))}))}},{key:"bulkRemoveWorkspaceData",value:function(e){var t=this,n=this.getAllWorkspaces();null===e||void 0===e||e.forEach((function(e){t.removeWorkspace(n.find((function(t){return t.id===e})))}))}},{key:"loadWorkspaceMetaData",value:function(e){e&&e.length||(e=[{id:"memo.".concat(Object(ge.a)()),name:"Memo"}]),this.workspaceManager.createWorkspaces(e.filter((function(e){return e.id&&e.name}))),this.loadWorkspaceData(this.getWorkspace()),Object(y.a)("".concat(this.id,": loaded ").concat(e.length," workspace(s) metadata"))}},{key:"saveWorkspaceMetaData",value:function(){var e=this.getAllWorkspaces(),t=e.map((function(e){return e.getMetaData()}));Object(ce.d)("".concat(xn,"#spaces"),t),Object(y.a)("".concat(this.id,": saved ").concat(e.length," workspace(s) metadata"))}},{key:"removeWorkspace",value:function(e){var t=this.workspaceManager.removeWorkspace(e);t?(this.workspaceManager.setActiveWorkspace(t.getId()),g.b.postEvent("workspace#changed")):g.b.postEvent("req@toast",{title:"Workspace",message:"Unable to remove the workspace"})}},{key:"onCloseDrawer",value:function(){this.setState({mode:"default"})}},{key:"onChangeWorkspace",value:function(e){this.workspaceManager.setActiveWorkspace(e)&&(this.onCloseDrawer(),g.b.postEvent("workspace#changed"))}},{key:"onAddWorkspace",value:function(){var e=this;(function(){return X.apply(this,arguments)})().then((function(t){var n=t.name,a=t.type,r=e.workspaceManager.addWorkspace(n,a);e.workspaceManager.setActiveWorkspace(null===r||void 0===r?void 0:r.id)&&g.b.postEvent("workspace#changed")})).catch((function(e){}))}},{key:"onConfirmAndRenameWorkspace",value:function(){var e=this;F({title:"Rename workspace",placeholder:"Enter workspace name here!",text:this.getWorkspace().getName()}).then((function(t){e.workspaceManager.renameActiveWorkspace(t.text)}))}},{key:"onConfirmAndDeleteWorkspace",value:function(){Y({title:"Remove workspace",text:'Are you sure to delete workspace "'.concat(this.getWorkspace().getName(),'" , all data will be lost')}).then((function(e){g.b.postEvent("workspace#remove")})).catch((function(e){}))}},{key:"onClickWorkspace",value:function(e){this.getWorkspace().getId()===e&&this.onConfirmAndRenameWorkspace()}},{key:"onEditWorkspace",value:function(e,t){"add"===t?this.onAddWorkspace():"remove"===t&&this.onConfirmAndDeleteWorkspace()}},{key:"onConfirmAndDeleteItems",value:function(){var e=this.getWorkspace().getVisibleData().items;Y({title:"Remove items",text:"Are you sure to delete ".concat(e.length," items")}).then((function(e){return g.b.postEvent("cmd#bulk-delete-items")})).catch((function(e){}))}},{key:"onImport",value:function(){var e=this;(function(){return $.apply(this,arguments)})().then((function(t){var n=t;if(n){var a=e.getWorkspace();return function(e){return he.apply(this,arguments)}(n).then((function(e){return a.getDescriptor().importText(a.getDataSource(),e)})).then((function(t){e.saveWorkspaceData(a),a.invalidateVisibleData(),e.forceUpdate()})).catch((function(e){var t,n;A.a.open({message:"Import",description:"".concat(JSON.stringify((null===(t=e.err)||void 0===t?void 0:t.message)||e.message||(null===(n=e.err)||void 0===n?void 0:n.stack)||e.stack||"Failed to import, possibly incorrect format file"))})}))}})).catch((function(e){}))}},{key:"onExport",value:function(){var e=this;(function(){return ee.apply(this,arguments)})().then((function(t){var a=t.type,r=t.email,i=e.getWorkspace();i.getDescriptor().exportText(i.getDataSource()).then((function(t){if("file"===a){var i=n(513),c=new Blob([t],{type:"application/json;charset=utf-8"});i.saveAs(c,"".concat(e.getWorkspace().name,".json"))}else"gdrive"===a?function(){return z.apply(this,arguments)}().then((function(e){return function(e,t){return H.apply(this,arguments)}("awesome",t)})):"email"===a&&function(e,t,n){var a={user_id:m.a.EMAILJS_USER_ID,service_id:m.a.EMAILJS_SERVICE_ID,template_id:m.a.EMAILJS_TEMPATE_ID,template_params:{from_name:n||"awesome",email:e,message:t}};return fetch("https://api.emailjs.com/api/v1.0/email/send",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)})}(r,t).then((function(e){A.a.open({message:"Export",description:"Exported to ".concat(r)})})).catch((function(e){var t,n;A.a.open({message:"Export",description:"".concat(JSON.stringify((null===(t=e.err)||void 0===t?void 0:t.message)||(null===(n=e.err)||void 0===n?void 0:n.stack)||"Failed to send email"))})}))}))})).catch((function(e){}))}},{key:"syncGithub",value:function(e,t){var n,r,i=this,c={added:[],deleted:[],updated:[]};this.bulkLoadWorkspaceData().then((function(e){return n=e})).then((function(a){return function(e,t,n){return bn.apply(this,arguments)}(n,e,t)})).then((function(e){r=e,n.forEach((function(e){var t=e.id,n=e.sync;"added"===n?c.added.push(t):"updated"===n&&c.updated.push(t)}))})).then((function(e){return i.bulkSaveWorkspaceData([].concat(Object(S.a)(c.updated),Object(S.a)(c.added)))})).then((function(e){c.added.length&&i.saveWorkspaceMetaData()})).then((function(t){var n=r,c=n.localAdded,o=n.localDeleted,s=n.localUpdated,u=n.remoteAdded,l=n.remoteDeleted,d=n.remoteUpdated;A.a.open({message:"Sync",description:Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("div",{children:"Synced ".concat(e)}),Object(a.jsx)("div",{children:"local: added ".concat(c,", deleted ").concat(o,", updated ").concat(s)}),Object(a.jsx)("div",{children:"remote: created ".concat(u,", deleted ").concat(l,", updated ").concat(d)})]})}),i.forceUpdate()})).catch((function(e){A.a.open({message:"Sync",description:Object(a.jsx)("div",{children:"Please try it later, caught an error ".concat(e)})})}))}},{key:"onSync",value:function(){var e=this;(function(e){return te.apply(this,arguments)})({githubrepo:Object(m.b)("githubrepo"),githubtoken:Object(m.b)("githubtoken")}).then((function(t){var n=t.type,a=t.url,r=t.token;"github"===n&&a&&r&&(Object(m.h)({githubrepo:a,githubtoken:r}),e.syncGithub(a,r))})).catch((function(e){}))}},{key:"onEvent",value:function(e,t){var n=this.getWorkspace();switch(Object(y.a)("".concat(this.id,"-").concat(n.id,": ").concat(e)),(e.endsWith("#cancelled")||e.endsWith("#OK"))&&this.onCloseDrawer(),e){case"dlg#confirm":case"dlg#getText":case"dlg#getWorkspace":case"dlg#import":case"dlg#export":case"dlg#sync":case"dlg#editItem":case"dlg#addTags":case"dlg#deleteTags":this.setState({mode:e,evtObj:t});break;case"cmd#import":this.onImport();break;case"cmd#export":this.onExport();break;case"cmd#sync":this.onSync();break;case"cmd#add-workspace":this.onAddWorkspace();break;case"cmd#confirm-and-edit-workspace":this.onConfirmAndRenameWorkspace();break;case"cmd#confirm-and-delete-workspace":this.onConfirmAndDeleteWorkspace();break;case"workspace#remove":this.removeWorkspace(null===n||void 0===n?void 0:n.id);break;case"workspace#changed":this.loadWorkspaceData(n);break;case"workspace#added":this.saveWorkspaceData(n);break;case"workspace#updated":break;case"workspace#deleted":this.removeWorkspaceData(t);break;case"cmd#confirm-and-delete-items":this.onConfirmAndDeleteItems();break;case"item#added":case"item#updated":case"item#deleted":case"item#updated-hashtag":case"item#updated-tag":case"item#updated-prop":this.saveWorkspaceData(n),this.forceUpdate()}switch(e){case"workspace#added":case"workspace#updated":case"workspace#deleted":this.saveWorkspaceMetaData(),this.forceUpdate();break;case"workspace#ready":this.forceUpdate()}}},{key:"renderDrawers",value:function(e){var t="100vw";e||(t=window.innerWidth)>600&&(t=600);var n=this.getDescriptor(),i=null===n||void 0===n?void 0:n.drawer();if(i)return i;switch(this.state.mode){case"dlg#confirm":return Object(a.jsx)(r.Suspense,{fallback:Object(a.jsx)("div",{children:"Loading..."}),children:Object(a.jsx)(gn,{context:this.state.evtObj})});case"dlg#getText":return Object(a.jsx)(r.Suspense,{fallback:Object(a.jsx)("div",{children:"Loading..."}),children:Object(a.jsx)(jn,{context:this.state.evtObj})});case"dlg#getWorkspace":return Object(a.jsx)(r.Suspense,{fallback:Object(a.jsx)("div",{children:"Loading..."}),children:Object(a.jsx)(On,{})});case"dlg#import":return Object(a.jsx)(_.a,{placement:"right",width:t,closable:!1,onClose:this.onCloseDrawer,visible:!0,children:n.drawer("import",this.state.evtObj)});case"dlg#export":return Object(a.jsx)(_.a,{placement:"right",width:t,closable:!1,onClose:this.onCloseDrawer,visible:!0,children:n.drawer("export",this.state.evtObj)});case"dlg#sync":return Object(a.jsx)(_.a,{placement:"right",width:t,closable:!1,onClose:this.onCloseDrawer,visible:!0,children:n.drawer("sync",this.state.evtObj)});case"dlg#editItem":return Object(a.jsx)(_.a,{placement:"right",width:t,closable:!1,onClose:this.onCloseDrawer,visible:!0,children:n.editor(this.state.evtObj)});case"dlg#addTags":return Object(a.jsx)(r.Suspense,{fallback:Object(a.jsx)("div",{children:"Loading..."}),children:Object(a.jsx)(_.a,{placement:"right",width:t,closable:!1,onClose:this.onCloseDrawer,visible:!0,children:Object(a.jsx)(kn,{title:"Add Tags"})})});case"dlg#deleteTags":return Object(a.jsx)(r.Suspense,{fallback:Object(a.jsx)("div",{children:"Loading..."}),children:Object(a.jsx)(_.a,{placement:"right",width:t,closable:!1,onClose:this.onCloseDrawer,visible:!0,children:Object(a.jsx)(yn,{title:"Remove Tags",tags:this.state.evtObj})})})}return""}},{key:"renderFAB",value:function(){return Object(a.jsx)(T.a,{type:"primary",shape:"circle",size:"Small",style:{position:"absolute",bottom:"48px",left:"16px"},onClick:function(){g.b.postEvent("cmd#add-item")},children:Object(a.jsx)(N.a,{style:{position:"relative",top:"-4px"}})})}},{key:"renderTabs",value:function(e){var t=this.getAllWorkspaces(),n=this.getWorkspace();return Object(a.jsx)(W.a,{activeKey:n.id,type:e,onChange:this.onChangeWorkspace,onEdit:this.onEditWorkspace,onTabClick:this.onClickWorkspace,style:{margin:"4px 8px -16px 8px"},children:t.map((function(e,t){var n;return Object(a.jsx)(W.a.TabPane,{tab:Object(a.jsxs)("span",{style:{display:"flex",alignItems:"baseline"},children:[(null===(n=e.descriptor)||void 0===n?void 0:n.icon)||"",me(e.name,35)]}),closable:!0},e.id)}))})}},{key:"render",value:function(){return void 0===this.getDescriptor()?Object(a.jsx)("div",{className:"no-select",children:this.renderTabs()}):Object(a.jsxs)("div",{className:"no-select",children:[this.renderTabs("editable-card"),Object(a.jsx)(rt,Object(I.a)({workspace:this.getWorkspace()},this.props)),Object(a.jsx)(D.a,{maxWidth:767,children:this.renderDrawers(!0)}),Object(a.jsx)(D.a,{minWidth:768,children:this.renderDrawers(!1)}),this.renderFAB()]})}}]),i}(r.Component),In=wn,En=[{path:"/",component:wn}];function Sn(e){var t,n,a=e,r=Object(E.a)(En);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i.path===e){t=i.component;break}e.startsWith(i.path)&&a.length<i.path&&(a=i.path,t=i.component)}}catch(c){r.e(c)}finally{r.f()}return t||In}var Cn=function(e){Object(h.a)(n,e);var t=Object(p.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){var e=Sn(this.props.route);return Object(a.jsx)(e,Object(I.a)(Object(I.a)({},this.props),{},{referred:In===wn}))}}]),n}(i.a.Component),Dn={Dismiss:"Ignorer",OK:"OK",Done:"Termin\xe9",Apply:"Appliquer","Try Again":"R\xe9essayer",Reset:"R\xe9initialiser",Send:"Envoyer",Cancel:"Annuler",Clear:"Effacer","Please tap BACK again to exit":"S'il vous pla\xeet appuyez sur RETOUR pour quitter","Sorry, we are unable to complete your request. Please try again later.":"D\xe9sol\xe9, nous ne sommes pas en mesure de compl\xe9ter votre demande. Veuillez r\xe9essayer plus tard.","Unable to connect to Wi-Fi or Mobile Network. Please check your connection settings.":"Connexion au r\xe9seau Wi-Fi ou mobile impossible. Veuillez v\xe9rifier vos param\xe8tres de connexion."};function An(e){return function(e,t){if(t){if("en"===t)return e;if("fr"===t)return Dn[e]}return e}(e,m.a.LANGUAGE)||e}var _n=function(e){Object(h.a)(n,e);var t=Object(p.a)(n);function n(e){var a;return Object(u.a)(this,n),a=t.call(this,e),Object(y.a)("app: starting..."),a.state={},a.backButtonPressedTime=new Date,a.finishApp=!1,window.addEventListener("beforeunload",a.onBeforeUnload.bind(Object(d.a)(a))),Object(g.a)("app",a.onEvent.bind(Object(d.a)(a))),a}return Object(l.a)(n,[{key:"componentDidMount",value:function(){Object(y.a)("app: did mount"),this.onDeserialize(),Object(m.d)()||le(),!window.performance||performance.navigation.type}},{key:"componentWillUnmount",value:function(){Object(y.a)("app: will unmount"),Object(g.d)("app")}},{key:"onSerialize",value:function(){Object(y.a)("app: serialize")}},{key:"onDeserialize",value:function(){Object(y.a)("app: deserialize")}},{key:"onBeforeUnload",value:function(){this.onSerialize()}},{key:"onEvent",value:function(e,t){if(e.startsWith("route:")){var n=e.substr(6);return window.history.replaceState&&window.history.replaceState("",window.location.title,n),void this.setState({route:n})}switch(e){case"#refresh":case"nav#back":case"resp@get-pref":this.forceUpdate();break;case"resp@get-env":t&&(m.a.DEVICE_TYPE=f.d,t.user&&(m.a.USER=t.user),t.language&&(m.a.LANGUAGE=t.language.toLowerCase()),this.forceUpdate());break;case"notify@state":if(!t)break;if(t.network&&(r="connected"===t.network,b["state#network"]=r,this.forceUpdate()),"loaded"===t.web&&(m.a.DEVICE_TYPE=f.d,Object(m.f)([t]),m.a.USER||Object(v.b)(),Object(v.c)(),le()),"pressed"===t.backButton){if(Object(m.c)()){var a=new Date;if(a.getTime()-this.backButtonPressedTime.getTime()<2e3&&this.finishApp){Object(v.d)();break}this.finishApp=!0,Object(v.f)(An("Please tap BACK again to exit")),this.backButtonPressedTime=a}Object(g.c)("nav#back")}}var r}},{key:"render",value:function(){return Object(a.jsx)(Cn,{route:this.state.route||window.location.pathname,location:window.location})}}]),n}(i.a.Component);o.a.render(Object(a.jsx)(s.a,{children:Object(a.jsx)(_n,{})}),document.getElementById("root"))},54:function(e,t,n){"use strict";function a(e,t){return 0!==(e&t)}function r(e,t){return e|t}function i(e,t){return e&~t}n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return r})),n.d(t,"a",(function(){return i}))},67:function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return s}));var a=n(11),r=n(28),i=n(23);function c(e,t){var n=Object(r.a)(new Set([].concat(Object(r.a)(e.tags),Object(r.a)(t.tags)))),i=Object(a.a)({},e);i.tags=n;var c=i,o=t;for(var s in o)"tags"!==s&&(i[s]?c[s]!==o[s]&&(c.last_modified&&o.last_modified?Number(o.last_modified)>Number(c.last_modified)?i[s]=o[s]:i[s]=c[s]:c.last_modified?i[s]=c[s]:(o.last_modified,i[s]=o[s])):i[s]=o[s]);return i}function o(e,t){for(var n=[],a=new Map,o=0,s=[].concat(Object(r.a)(e),Object(r.a)(t));o<s.length;o++){var u=s[o],l=Object(i.g)(u);if(a.has(l)){var d=a.get(l);n[d]=c(n[d],u)}else n.push(u),a.set(l,n.length-1)}e.splice(0,e.length);for(var h=0,p=n;h<p.length;h++){var f=p[h];e.push(f)}return e}function s(e){if(e){var t=0,n=0,a=0,r=new Map,i=new Map,c=new Map;e.forEach((function(e){e.tags.length?e.tags.forEach((function(e){r.has(e)?r.set(e,r.get(e)+1):r.set(e,1)})):t++;var o=e.category;void 0!==o&&(o?i.has(o)?i.set(o,i.get(o)+1):i.set(o,1):n++);var s=e.theme;void 0!==s&&(s?c.has(s)?c.set(s,c.get(s)+1):c.set(s,1):a++)}));var o=[];r.forEach((function(e,t){return o.push({name:t,count:e})}));var s=[];i.forEach((function(e,t){return s.push({name:t,count:e})}));var u=[];return c.forEach((function(e,t){return u.push({name:t,count:e})})),{tags:o,noTagCount:t,icons:s,noIconCount:n,themes:u,noThemeCount:a}}}},68:function(e,t,n){"use strict";n.d(t,"b",(function(){return S})),n.d(t,"a",(function(){return C})),n.d(t,"d",(function(){return D})),n.d(t,"c",(function(){return A}));var a=n(7),r=n.n(a),i=n(12),c=n(113),o=n(9),s=n(305),u="keyval",l=Object(s.a)("idealab",1,{upgrade:function(e){e.createObjectStore(u)}});function d(e){return h.apply(this,arguments)}function h(){return(h=Object(i.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",l.then((function(e){return Object(o.a)("db: loaded ".concat(t)),e.get(u,t)})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function p(e,t){return f.apply(this,arguments)}function f(){return(f=Object(i.a)(r.a.mark((function e(t,n){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",l.then((function(e){return Object(o.a)("db: saved ".concat(t)),e.put(u,n,t)})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function m(e){return v.apply(this,arguments)}function v(){return(v=Object(i.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",l.then((function(e){return Object(o.a)("db: deleted ".concat(t)),e.delete(u,t)})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function b(){return g.apply(this,arguments)}function g(){return(g=Object(i.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",l.then((function(e){return e.getAllKeys(u)})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var j="indexedDB";function O(e,t){var n,a=[],r=Object(c.a)(e);try{for(r.s();!(n=r.n()).done;){var i=n.value;t&&!i.startsWith(t)||a.push(i)}}catch(o){r.e(o)}finally{r.f()}return a}function k(e,t){return e in window?O(Object.keys(window[e]),t):[]}function y(e,t,n){if(t&&e in window){var a=window[e].getItem(t);if(a)return Object(o.a)("storage: loaded ".concat(t)),JSON.parse(a)}return n}function x(e,t,n){t&&n?e in window&&(Object(o.a)("storage: saved ".concat(t)),window[e].setItem(t,JSON.stringify(n))):Object(o.a)("storage:setItem: invalid key or value")}function w(e,t){t?e in window&&(Object(o.a)("storage: removed ".concat(t)),window[e].removeItem(t)):Object(o.a)("storage:removeItem: invalid key")}var I="file:"===window.location.protocol;function E(e){if("indexedDB"===e){if(I)return"localStorage";if(!(e in window))return"localStorage"}return e}function S(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"indexedDB";return"indexedDB"===(t=E(t))?b().then((function(t){return O(t,e)})):Promise.resolve(k(t,e))}function C(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:j;return"indexedDB"===(n=E(n))?d(e).then((function(e){return e?JSON.parse(e):t})):Promise.resolve(y(n,e,t))}function D(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:j;"indexedDB"===(n=E(n))?p(e,JSON.stringify(t)):x(n,e,t)}function A(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:j;"indexedDB"===(t=E(t))?m(e):w(t,e)}},69:function(e,t,n){},70:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var a=n(194),r=n.n(a);function i(){return r.a.generate()}},77:function(e,t,n){"use strict";n.d(t,"f",(function(){return a})),n.d(t,"g",(function(){return r})),n.d(t,"e",(function(){return i})),n.d(t,"b",(function(){return c})),n.d(t,"c",(function(){return o})),n.d(t,"d",(function(){return s})),n.d(t,"a",(function(){return u}));var a=0,r=2,i=3,c=1,o=2,s=3,u=0},83:function(e,t,n){"use strict";n.d(t,"e",(function(){return h})),n.d(t,"f",(function(){return p})),n.d(t,"d",(function(){return f})),n.d(t,"b",(function(){return m})),n.d(t,"c",(function(){return v})),n.d(t,"a",(function(){return b}));var a=n(11),r=n(304),i=n(13),c=n(68);var o=n(125),s=n(9);function u(e){Object(o.a)(e)?window.open("mailto://"+e,"_blank"):Object(o.b)(e)?window.open("tel:"+e,"_blank"):window.open(e,"_blank")}function l(e){var t=e.url;return t?fetch(t,{method:"GET"|e.method,headers:e.headers,body:e.body}).then((function(e){return e.blob()})).then((function(e){return function(e){return new Promise((function(t){var n=new FileReader;n.addEventListener("load",(function(){return t(n.result)}),!1),n.readAsDataURL(e)}))}(e)})).then((function(t){return Promise.resolve({req:e,resp:t})})).catch((function(t){return Promise.reject({req:e,resp:"",error:{message:t.message,stack:t.stack}})})):Promise.reject({req:e,resp:"",error:{message:"invalid request"}})}function d(e,t){if(window.Android||window.webkit){if(window.Android&&window.Android.eventHandler){var n=JSON.stringify(t?Object(a.a)({evt:e},t):{evt:e});return void window.Android.eventHandler(n)}if(window.webkit&&window.webkit.messageHandlers){var o=JSON.stringify(t?Object(a.a)({evt:e},t):{evt:e});return void window.webkit.messageHandlers.eventHandler.postMessage(o)}}!function(e,t){switch("notify@log"!==e&&Object(s.a)("service: ".concat(e)),e){case"notify@log":console.log(t.msg||"");break;case"req@toast":r.a.open({message:t.title||"",description:t.msg||""});break;case"req@send-email":u(t.email||t.link);break;case"req@open-url":u(t.url||t.link);break;case"req@get-pref":Object(c.a)("pref#".concat(t.name)).then((function(e){Object(i.c)("resp@get-pref",{result:e})}));break;case"req@save-pref":Object(c.d)("pref#".concat(t.name),t.value);break;case"req@fetch-url":l(t).then((function(e){return Object(i.c)("resp@fetch-url",e)})).catch((function(e){return Object(i.c)("resp@fetch-url",e)}));break;case"req@kill-app":case"req@make-call":default:Object(s.a)("service: ".concat(e," not supported"))}}(e,t)}function h(e){d("notify@log",{msg:e})}function p(e){d("req@toast",{msg:e})}function f(){d("req@kill-app")}function m(){d("req@get-env")}function v(){d("req@get-pref")}function b(e,t){d("req@fetch-url",Object(a.a)({url:e},t))}window._runtime_={eventHandler:function(e){if(e){var t={};try{if(!(t=JSON.parse(e)).evt)return void Object(s.a)("service: discarded a suspecious event ".concat(e))}catch(n){return void Object(s.a)("service: discarded an invalid event ".concat(e,", ").concat(n))}Object(s.a)("service: ".concat(t.evt)),Object(i.c)(t.evt,t)}else Object(s.a)("service: received an empty response!")}}},9:function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return o})),n.d(t,"d",(function(){return s})),n.d(t,"e",(function(){return u})),n.d(t,"c",(function(){return l}));var a=n(14),r=n(83);function i(e,t){var n=new Date;Object(r.e)("".concat(e,"-").concat(n.getHours(),":").concat(n.getMinutes(),":").concat(n.getSeconds(),":").concat(n.getMilliseconds()," ").concat(t))}function c(e){i("dbg",e)}function o(e,t){void 0===t?a.a.ENABLE_VERBOSE_LOG&&i("dbg",e):t&&i("dbg",e)}function s(e){i("info",e)}function u(e){i("warn",e)}function l(e){i("err",e)}},95:function(e,t,n){"use strict";n.r(t),n.d(t,"getThemeMap",(function(){return v})),n.d(t,"getTheme",(function(){return b}));var a=n(11),r=n(24),i=n(25),c=n(41),o=n(40),s=n(2),u=n(0),l=(n(65),n(165)),d=n(306),h=n(199),p=(n(69),n(156)),f=[{name:"",bkColor:"#fff",foreColor:"black",default:!0},{name:"blue",bkColor:"#89a6db"},{name:"green",bkColor:"#9ecf89"},{name:"orange",bkColor:"#e9ae77"},{name:"purple",bkColor:"#a094d4"},{name:"red",bkColor:"#d69e9c"},{name:"yellow",bkColor:"#f8ef88"},{name:"black",bkColor:"#4e4e4e",foreColor:"white"}],m=Object(p.a)(f);function v(){return m}function b(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e&&m.has(e)?m.get(e):f[0]}var g=function(e){Object(c.a)(n,e);var t=Object(o.a)(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"getMenuItem",value:function(e){var t=this,n=e.name,a=e.bkColor,r=e.foreColor;return Object(s.jsx)(l.a.Item,{onClick:function(e){var a,r;null===(a=(r=t.props).eventHandler)||void 0===a||a.call(r,"color#changed",{name:n})},style:{background:a,color:r||"black"},children:Object(s.jsx)("span",{style:{marginLeft:"8px"},children:n||"white"})},"menu#".concat(n))}},{key:"getDropdownMenu",value:function(){var e=this;return Object(s.jsx)(l.a,{children:f.map((function(t){return e.getMenuItem(t)}))})}},{key:"render",value:function(){var e=b(this.props.theme),t=e.name,n=e.bkColor,r=e.foreColor,i=this.props,c=i.mode,o=i.style,u=o?Object(a.a)({},o):{};"detail"===c&&((u={display:"flex",alignItems:"baseline"}).color=r||"black",u.background=n);var l=t||"white";return Object(s.jsx)(d.a,{overlay:this.getDropdownMenu(),placement:"bottomLeft",trigger:["click"],className:"icon",children:Object(s.jsxs)("div",{style:Object(a.a)({width:"detail"===c?"100%":void 0},u),className:"clickable",children:[Object(s.jsx)(h.a,{type:"bg-colors",className:"icon"}),"detail"===c&&Object(s.jsx)("span",{style:{flex:"auto",marginLeft:"8px"},children:l})]})})}}]),n}(u.Component);t.default=g}},[[519,4,6]]]);
//# sourceMappingURL=main.5971a12a.chunk.js.map